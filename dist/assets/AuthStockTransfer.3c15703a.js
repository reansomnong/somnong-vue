import{d as K,a as g,u as F,b as Y,e as Z,r as w,o as ee,f as C,g as te,h as m,i as k,k as t,w as a,m as e,T as r,l,F as j,s as M,t as N,j as n,v as _,q as b,D as f,P as q,z,n as E,_ as v,C as $,S,N as ae,E as se,G as oe,O as ne}from"./index.62cb36ac.js";const R="http://garage_api.test/api/",re=K({id:"AuthTransferStore",state:()=>({Items:[],ItemDetail:[],ItemView:[]}),getters:{getItems(d){return d.Items},getItemView(d){return d.ItemView},getItemsDetail(d){return d.ItemDetail}},actions:{async una_transfer(){await g.get("v1/pos/una_stock_transfer").then(d=>{if(d.data.success)return this.Items=d.data.data,this.Items})},async view_una_transfer(d){await g.get(`v1/pos/una_stock_transfer/${d}`).then(s=>{if(s.data.success)return this.ItemView=s.data.data,this.ItemView})},async view_una_transfer_details(d){await g.get(`v1/pos/una_transfer_details/${d}`).then(s=>{if(s.data.success)return this.ItemDetail=s.data.data,this.ItemDetail})},async auth_transfer(d){return await g.post(R+"v1/pos/auth_transfer",d).then(async s=>{if(s.data.success)return s.data.success}).catch(s=>{if(s.response&&s.response.data){const c=s.response.data;F().setErrors(c.errors)}})},async reject_transfer(d){return console.log(d),await g.post(R+"v1/pos/reject_transfer",d).then(async s=>{if(s.data.success)return s.data.success}).catch(s=>{if(s.response&&s.response.data){const c=s.response.data;F().setErrors(c.errors)}})}}}),le={class:"grid grid-cols-12 gap-6 mt-5"},de={key:0,class:"col-span-12 overflow-auto intro-y lg:overflow-visible"},ie={href:"",class:"font-medium whitespace-nowrap"},ce={class:"text-slate-500 text-xs whitespace-nowrap mt-0.5"},ue={class:"flex items-center justify-center"},fe=["onClick"],_e={key:1,class:"col-span-12 overflow-auto intro-y lg:overflow-visible",role:"alert"},pe=ae('<div class="flex"><div class="py-1"><svg class="fill-current h-6 w-6 text-teal-500 mr-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.93 17.07A10 10 0 1 1 17.07 2.93 10 10 0 0 1 2.93 17.07zm12.73-1.41A8 8 0 1 0 4.34 4.34a8 8 0 0 0 11.32 11.32zM9 11V9h2v6H9v-4zm0-6h2v2H9V5z"></path></svg></div><div><p class="font-bold">No record display</p><p class="text-sm">Make sure you already booking.</p></div></div>',1),me=[pe],ve={class:"text-center"},he={class:"p-5"},we=n("h2",{class:"mr-auto text-base font-medium"}," Authorize Stock Transfer ",-1),be={class:"col-span-12 sm:col-span-6"},xe={class:"col-span-12 sm:col-span-6"},ye={class:"col-span-12 sm:col-span-12"},ge={class:"p-5 text-center"},ke=n("div",{class:"mt-5 text-3xl"},"Are you sure ?",-1),Te={class:"mt-2 text-slate-500"},Ce={class:"px-5 pb-8 text-center"},Se={class:"p-5 text-center"},Ie=n("div",{class:"mt-5 text-3xl"},"Are you sure?",-1),Ve={class:"mt-2 text-slate-500"},$e={class:"px-5 pb-8 text-center"},Ae=n("div",{class:"ml-4 mr-4"},[n("div",{class:"font-medium"},"Trasaction has been authorized!")],-1),Be=n("div",{class:"ml-4 mr-4"},[n("div",{class:"font-medium"},"Trasaction has been rejected!")],-1),De=n("div",{class:"ml-4 mr-4"},[n("div",{class:"mt-1 text-slate-500"},"Please check the fileld form.")],-1),Fe=Y({__name:"AuthStockTransfer",setup(d){const s=Z({}),c=re();w(null);const I=w(null),L=w(null),V=w(!1),h=u=>{V.value=u},A=w(!1),T=u=>{A.value=u},B=w(!1),x=u=>{B.value=u};ee(async()=>{await c.una_transfer()});const D=C(()=>c.getItems),y=C(()=>c.getItemView),O=C(()=>c.getItemsDetail);async function W(u){await c.view_una_transfer(u),await c.view_una_transfer_details(u),s.status="auth_transfer",s.tran_code=y.value[0].tran_code,s.stock_name=y.value[0].stock_name,s.sto_code_from=y.value[0].sto_code_from,s.sto_code_to=y.value[0].sto_code_to,s.inputter=y.value[0].inputter,h(!0)}function P(){s.tran_code="",s.sto_code_from="",s.sto_code_to="",s.remark="",p.value.$reset(),s.status="auth_transfer"}const U=C(()=>({tran_code:{required:se.withMessage("Please verify transfer transaction ",oe),minLength:ne(1)}})),p=te(U,s,{$autoDirty:!0});async function H(){x(!0)}async function X(){T(!0)}async function G(){if(p.value.$touch(),p.value.$invalid){const o=document.querySelectorAll("#failed-notification-content")[0].cloneNode(!0);o.classList.remove("hidden"),S({node:o,duration:3e3,newWindow:!0,close:!0,gravity:"top",position:"right",stopOnFocus:!0}).showToast()}else{var u=await c.auth_transfer(s);if(u){const o=document.querySelectorAll("#success-notification-content")[0].cloneNode(!0);o.classList.remove("hidden"),S({node:o,duration:3e3,newWindow:!0,close:!0,gravity:"top",position:"right",stopOnFocus:!0}).showToast(),await c.una_transfer(),h(!1),x(!1),P(),p.value.$reset()}}}async function Q(){if(p.value.$touch(),p.value.$invalid){const o=document.querySelectorAll("#failed-notification-content")[0].cloneNode(!0);o.classList.remove("hidden"),S({node:o,duration:3e3,newWindow:!0,close:!0,gravity:"top",position:"right",stopOnFocus:!0}).showToast()}else{s.status="reject_auth_transfer";var u=await c.reject_transfer(s);if(u){const o=document.querySelectorAll("#reject-notification-content")[0].cloneNode(!0);o.classList.remove("hidden"),S({node:o,duration:3e3,newWindow:!0,close:!0,gravity:"top",position:"right",stopOnFocus:!0}).showToast(),await c.una_transfer(),h(!1),x(!1),T(!1),P(),p.value.$reset()}}}return(u,o)=>(m(),k("div",le,[D.value.length>0?(m(),k("div",de,[t(e(r),{class:"border-spacing-y-[10px] border-separate -mt-2"},{default:a(()=>[t(e(r).Thead,null,{default:a(()=>[t(e(r).Tr,null,{default:a(()=>[t(e(r).Th,{class:"border-b-0 whitespace-nowrap"},{default:a(()=>[l(" Stock Transfer ")]),_:1}),t(e(r).Th,{class:"border-b-0 whitespace-nowrap"},{default:a(()=>[l(" Inputter ")]),_:1}),t(e(r).Th,{class:"border-b-0 whitespace-nowrap"},{default:a(()=>[l(" InputDate ")]),_:1}),t(e(r).Th,{class:"text-center border-b-0 whitespace-nowrap"},{default:a(()=>[l(" Action ")]),_:1})]),_:1})]),_:1}),t(e(r).Tbody,null,{default:a(()=>[(m(!0),k(j,null,M(D.value,i=>(m(),N(e(r).Tr,{key:i.tran_code,class:"intro-x"},{default:a(()=>[t(e(r).Td,{class:"first:rounded-l-md last:rounded-r-md bg-white border-b-0 dark:bg-darkmode-600 shadow-[20px_3px_20px_#0000000b]"},{default:a(()=>[n("a",ie,_(i.stock_name),1),n("div",ce," ID: "+_(i.tran_code),1)]),_:2},1024),t(e(r).Td,{class:"first:rounded-l-md last:rounded-r-md bg-white border-b-0 dark:bg-darkmode-600 shadow-[20px_3px_20px_#0000000b]"},{default:a(()=>[l(_(i.inputter),1)]),_:2},1024),t(e(r).Td,{class:"first:rounded-l-md last:rounded-r-md bg-white border-b-0 dark:bg-darkmode-600 shadow-[20px_3px_20px_#0000000b]"},{default:a(()=>[l(_(i.input_date),1)]),_:2},1024),t(e(r).Td,{class:"first:rounded-l-md last:rounded-r-md w-56 bg-white border-b-0 dark:bg-darkmode-600 shadow-[20px_3px_20px_#0000000b] py-0 relative before:block before:w-px before:h-8 before:bg-slate-200 before:absolute before:left-0 before:inset-y-0 before:my-auto before:dark:bg-darkmode-400"},{default:a(()=>[n("div",ue,[n("a",{class:"flex items-center mr-3",href:"",onClick:J=>{J.preventDefault(),W(i.tran_code)}},[t(e(b),{icon:"CheckSquare",class:"w-4 h-4 mr-1"}),l(" Edit ")],8,fe)])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])):(m(),k("div",_e,me)),t(e(f),{staticBackdrop:"",open:V.value,onClose:o[6]||(o[6]=()=>{h(!1)})},{default:a(()=>[t(e(f).Panel,{class:"px-5 py-10"},{default:a(()=>[n("div",ve,[t(e(q),{class:"mt-5 intro-y box"},{default:a(()=>[n("div",he,[t(e(q).Panel,null,{default:a(()=>[t(e(f),{staticBackdrop:"",open:V.value,onClose:o[5]||(o[5]=()=>{h(!1)})},{default:a(()=>[t(e(f).Panel,null,{default:a(()=>[t(e(f).Title,null,{default:a(()=>[we]),_:1}),t(e(f).Description,{class:"grid grid-cols-12 gap-4 gap-y-3"},{default:a(()=>[n("div",be,[t(e(z),{htmlFor:"modal-form-1"},{default:a(()=>[l("Code")]),_:1}),t(e(E),{value:s.tran_code,modelValue:s.tran_code,"onUpdate:modelValue":o[0]||(o[0]=i=>s.tran_code=i),type:"text",disabled:!0},null,8,["value","modelValue"])]),n("div",xe,[t(e(z),{htmlFor:"modal-form-1"},{default:a(()=>[l("Stock")]),_:1}),t(e(E),{value:s.stock_name,modelValue:s.stock_name,"onUpdate:modelValue":o[1]||(o[1]=i=>s.stock_name=i),type:"text",disabled:!0},null,8,["value","modelValue"])]),n("div",ye,[t(e(r),{class:"border-spacing-y-[10px] border-separate -mt-2"},{default:a(()=>[t(e(r).Thead,null,{default:a(()=>[t(e(r).Tr,null,{default:a(()=>[t(e(r).Th,{class:"border-b-0 whitespace-nowrap"},{default:a(()=>[l(" Items ")]),_:1}),t(e(r).Th,{class:"border-b-0 whitespace-nowrap"},{default:a(()=>[l(" Qty ")]),_:1})]),_:1})]),_:1}),t(e(r).Tbody,null,{default:a(()=>[(m(!0),k(j,null,M(O.value,i=>(m(),N(e(r).Tr,{key:i.tran_code,class:"intro-x"},{default:a(()=>[t(e(r).Td,{class:"first:rounded-l-md last:rounded-r-md bg-white border-b-0 dark:bg-darkmode-600 shadow-[20px_3px_20px_#0000000b]"},{default:a(()=>[l(_(i.pro_name),1)]),_:2},1024),t(e(r).Td,{class:"first:rounded-l-md last:rounded-r-md bg-white border-b-0 dark:bg-darkmode-600 shadow-[20px_3px_20px_#0000000b]"},{default:a(()=>[l(_(i.qty),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])]),_:1}),t(e(f).Footer,null,{default:a(()=>[t(e(v),{type:"button",variant:"outline-secondary",onClick:o[2]||(o[2]=()=>{h(!1)}),class:"w-20 mr-1"},{default:a(()=>[l(" Cancel ")]),_:1}),t(e(v),{class:"w-20 mr-1",variant:"outline-danger",type:"button",ref:"{sendButtonRef}",onClick:o[3]||(o[3]=i=>X())},{default:a(()=>[l(" Reject ")]),_:1},512),t(e(v),{variant:"primary",type:"button",class:"w-20",ref:"{sendButtonRef}",onClick:o[4]||(o[4]=i=>H())},{default:a(()=>[l(" Authorize ")]),_:1},512)]),_:1})]),_:1})]),_:1},8,["open"])]),_:1})])]),_:1})])]),_:1})]),_:1},8,["open"]),t(e(f),{open:B.value,onClose:o[9]||(o[9]=()=>{x(!1)}),initialFocus:L.value},{default:a(()=>[t(e(f).Panel,null,{default:a(()=>[n("div",ge,[t(e(b),{icon:"CheckCircle",class:"w-16 h-16 mx-auto mt-3 text-success"}),ke,n("div",Te," Authorize Stock transfer "+_(s.tran_code),1)]),n("div",Ce,[t(e(v),{type:"button",variant:"outline-secondary",onClick:o[7]||(o[7]=()=>{x(!1)}),class:"w-24 mr-1"},{default:a(()=>[l(" Cancel ")]),_:1}),t(e(v),{type:"button",variant:"primary",class:"w-24",ref:"{deleteButtonRef}",onClick:o[8]||(o[8]=()=>{G()})},{default:a(()=>[l(" Ok ")]),_:1},512)])]),_:1})]),_:1},8,["open","initialFocus"]),t(e(f),{open:A.value,onClose:o[12]||(o[12]=()=>{T(!1)}),initialFocus:I.value},{default:a(()=>[t(e(f).Panel,null,{default:a(()=>[n("div",Se,[t(e(b),{icon:"XCircle",class:"w-16 h-16 mx-auto mt-3 text-danger"}),Ie,n("div",Ve," Reject Stock transfer "+_(s.tran_code),1)]),n("div",$e,[t(e(v),{type:"button",variant:"outline-secondary",onClick:o[10]||(o[10]=()=>{T(!1)}),class:"w-24 mr-1"},{default:a(()=>[l(" Cancel ")]),_:1}),t(e(v),{type:"button",variant:"danger",class:"w-24",ref:"{deleteButtonRef}",onClick:o[11]||(o[11]=()=>{Q()})},{default:a(()=>[l(" Ok ")]),_:1},512)])]),_:1})]),_:1},8,["open","initialFocus"]),t(e($),{id:"success-notification-content",class:"flex hidden"},{default:a(()=>[t(e(b),{icon:"CheckCircle",class:"text-success"}),Ae]),_:1}),t(e($),{id:"reject-notification-content",class:"flex hidden"},{default:a(()=>[t(e(b),{icon:"CheckCircle",class:"text-success"}),Be]),_:1}),t(e($),{id:"failed-notification-content",class:"flex hidden"},{default:a(()=>[t(e(b),{icon:"XCircle",class:"text-danger"}),De]),_:1})]))}});export{Fe as default};
