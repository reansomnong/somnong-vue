import{d as K,a as g,u as O,b as Y,e as Z,r as v,o as ee,f as S,g as te,h,i as y,k as t,w as s,m as e,T as n,l,F as M,s as j,t as N,j as r,v as _,q as k,D as p,P as q,z as T,n as C,_ as b,C as z,S as I,N as ae,E as se,G as oe,O as le}from"./index.62cb36ac.js";const R="http://garage_api.test/api/",ne=K({id:"AuthPOS",state:()=>({Items:[],ItemDetail:[],ItemView:[]}),getters:{getItems(u){return u.Items},getItemView(u){return u.ItemView},getItemsDetail(u){return u.ItemDetail}},actions:{async una_point_of_sale(){await g.get("v1/pos/una_point_of_sale").then(u=>{if(u.data.success)return this.Items=u.data.data,console.log(this.Items),this.Items})},async view_una_pos(u){await g.get(`v1/pos/una_pos/${u}`).then(a=>{if(a.data.success)return this.ItemView=a.data.data,this.ItemView})},async view_una_po_details(u){await g.get(`v1/pos/una_pos_details/${u}`).then(a=>{if(a.data.success)return this.ItemDetail=a.data.data,this.ItemDetail})},async auth_point_of_sale(u){return await g.post(R+"v1/pos/auth_point_of_sale",u).then(async a=>{if(a.data.success)return a.data.success}).catch(a=>{if(a.response&&a.response.data){const i=a.response.data;O().setErrors(i.errors)}})},async reject_point_of_sale(u){return console.log(u),await g.post(R+"v1/pos/reject_point_of_sale",u).then(async a=>{if(a.data.success)return a.data.success}).catch(a=>{if(a.response&&a.response.data){const i=a.response.data;O().setErrors(i.errors)}})}}}),de={class:"grid grid-cols-12 gap-6 mt-5"},re={key:0,class:"col-span-12 overflow-auto intro-y lg:overflow-visible"},ue={class:"text-slate-500 text-xs whitespace-nowrap mt-0.5"},ie={class:"flex items-center justify-center"},ce=["onClick"],_e={key:1,class:"col-span-12 overflow-auto intro-y lg:overflow-visible",role:"alert"},pe=ae('<div class="flex"><div class="py-1"><svg class="fill-current h-6 w-6 text-teal-500 mr-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.93 17.07A10 10 0 1 1 17.07 2.93 10 10 0 0 1 2.93 17.07zm12.73-1.41A8 8 0 1 0 4.34 4.34a8 8 0 0 0 11.32 11.32zM9 11V9h2v6H9v-4zm0-6h2v2H9V5z"></path></svg></div><div><p class="font-bold">No record display</p><p class="text-sm">Make sure you already booking.</p></div></div>',1),fe=[pe],me={class:"text-center"},ve={class:"p-5"},he=r("h2",{class:"mr-auto text-base font-medium"}," Authorize POS ",-1),be={class:"col-span-12 sm:col-span-6"},we={class:"col-span-12 sm:col-span-6"},xe={class:"col-span-12 sm:col-span-6"},ge={class:"col-span-12 sm:col-span-6"},ye={class:"col-span-12 sm:col-span-6"},ke={class:"col-span-12 sm:col-span-12"},Te={class:"col-span-12 sm:col-span-12"},Ce={class:"-mt-3 overflow-auto lg:overflow-visible"},Ve={class:"p-5 text-center"},Se=r("div",{class:"mt-5 text-3xl"},"Are you sure ?",-1),Ie={class:"mt-2 text-slate-500"},Pe={class:"px-5 pb-8 text-center"},$e={class:"p-5 text-center"},Ae=r("div",{class:"mt-5 text-3xl"},"Are you sure?",-1),De={class:"mt-2 text-slate-500"},Fe={class:"px-5 pb-8 text-center"},Be=r("div",{class:"ml-4 mr-4"},[r("div",{class:"font-medium"},"Trasaction has been authorized!")],-1),Oe=r("div",{class:"ml-4 mr-4"},[r("div",{class:"mt-1 text-slate-500"},"Please check the fileld form.")],-1),je=Y({__name:"AuthPointOfSale",setup(u){const a=Z({}),i=ne();v(null),v(null);const P=v(null),E=v(null),$=v(!1),w=c=>{$.value=c},A=v(!1),V=c=>{A.value=c},D=v(!1),x=c=>{D.value=c};ee(async()=>{await i.una_point_of_sale()});const F=S(()=>i.getItems),f=S(()=>i.getItemView),L=S(()=>i.getItemsDetail);async function U(c){console.log(c),await i.view_una_pos(c),await i.view_una_po_details(c),f.value.length>0&&(a.status="auth_pos",a.pos_code=f.value[0].pos_code,a.cus_code=f.value[0].cus_code,a.table_num=f.value[0].table_num,a.people_num=f.value[0].people_num,a.subtotal=f.value[0].subtotal,a.disamount=f.value[0].disamount,a.remark=f.value[0].remark,a.total_amount=f.value[0].total_amount,w(!0))}function B(){a.pos_code="",a.branch_code="",a.cus_code="",a.people_num="",a.table_num="",a.ref_exchange="",a.subtotal=0,a.disamount=0,a.vat=0,a.remark="",a.inputter="",m.value.$reset(),a.status="auth_pos"}const W=S(()=>({pos_code:{required:se.withMessage("Please verify point of sale code",oe),minLength:le(1)}})),m=te(W,a,{$autoDirty:!0});async function H(){x(!0)}async function X(){V(!0)}async function G(){if(m.value.$touch(),m.value.$invalid){const o=document.querySelectorAll("#failed-notification-content")[0].cloneNode(!0);o.classList.remove("hidden"),I({node:o,duration:3e3,newWindow:!0,close:!0,gravity:"top",position:"right",stopOnFocus:!0}).showToast()}else{console.log(a);var c=await i.auth_point_of_sale(a);if(c){const o=document.querySelectorAll("#success-notification-content")[0].cloneNode(!0);o.classList.remove("hidden"),I({node:o,duration:3e3,newWindow:!0,close:!0,gravity:"top",position:"right",stopOnFocus:!0}).showToast(),await i.una_point_of_sale(),w(!1),x(!1),B(),m.value.$reset()}}}async function Q(){if(m.value.$touch(),m.value.$invalid){const o=document.querySelectorAll("#failed-notification-content")[0].cloneNode(!0);o.classList.remove("hidden"),I({node:o,duration:3e3,newWindow:!0,close:!0,gravity:"top",position:"right",stopOnFocus:!0}).showToast()}else{a.status="reject_auth_pos";var c=await i.reject_point_of_sale(a);if(c){const o=document.querySelectorAll("#success-notification-content")[0].cloneNode(!0);o.classList.remove("hidden"),I({node:o,duration:3e3,newWindow:!0,close:!0,gravity:"top",position:"right",stopOnFocus:!0}).showToast(),await i.una_point_of_sale(),w(!1),x(!1),V(!1),B(),m.value.$reset()}}}return(c,o)=>(h(),y("div",de,[F.value.length>0?(h(),y("div",re,[t(e(n),{class:"border-spacing-y-[10px] border-separate -mt-2"},{default:s(()=>[t(e(n).Thead,null,{default:s(()=>[t(e(n).Tr,null,{default:s(()=>[t(e(n).Th,{class:"border-b-0 whitespace-nowrap"},{default:s(()=>[l(" Invoice ")]),_:1}),t(e(n).Th,{class:"border-b-0 whitespace-nowrap"},{default:s(()=>[l(" Customer ")]),_:1}),t(e(n).Th,{class:"border-b-0 whitespace-nowrap"},{default:s(()=>[l(" Subtotal ")]),_:1}),t(e(n).Th,{class:"border-b-0 whitespace-nowrap"},{default:s(()=>[l(" Discount ")]),_:1}),t(e(n).Th,{class:"border-b-0 whitespace-nowrap"},{default:s(()=>[l(" Amount ")]),_:1}),t(e(n).Th,{class:"border-b-0 whitespace-nowrap"},{default:s(()=>[l(" Input Date ")]),_:1}),t(e(n).Th,{class:"text-center border-b-0 whitespace-nowrap"},{default:s(()=>[l(" Action ")]),_:1})]),_:1})]),_:1}),t(e(n).Tbody,null,{default:s(()=>[(h(!0),y(M,null,j(F.value,d=>(h(),N(e(n).Tr,{key:d.pos_code,class:"intro-x"},{default:s(()=>[t(e(n).Td,{class:"first:rounded-l-md last:rounded-r-md bg-white border-b-0 dark:bg-darkmode-600 shadow-[20px_3px_20px_#0000000b]"},{default:s(()=>[r("div",ue," ID: "+_(d.pos_code),1)]),_:2},1024),t(e(n).Td,{class:"first:rounded-l-md last:rounded-r-md bg-white border-b-0 dark:bg-darkmode-600 shadow-[20px_3px_20px_#0000000b]"},{default:s(()=>[l(_(d.cus_name),1)]),_:2},1024),t(e(n).Td,{class:"first:rounded-l-md last:rounded-r-md bg-white border-b-0 dark:bg-darkmode-600 shadow-[20px_3px_20px_#0000000b]"},{default:s(()=>[l(_(d.subtotal),1)]),_:2},1024),t(e(n).Td,{class:"first:rounded-l-md last:rounded-r-md bg-white border-b-0 dark:bg-darkmode-600 shadow-[20px_3px_20px_#0000000b]"},{default:s(()=>[l(_(d.disamount),1)]),_:2},1024),t(e(n).Td,{class:"first:rounded-l-md last:rounded-r-md bg-white border-b-0 dark:bg-darkmode-600 shadow-[20px_3px_20px_#0000000b]"},{default:s(()=>[l(_(d.total_amount),1)]),_:2},1024),t(e(n).Td,{class:"first:rounded-l-md last:rounded-r-md bg-white border-b-0 dark:bg-darkmode-600 shadow-[20px_3px_20px_#0000000b]"},{default:s(()=>[l(_(d.input_date),1)]),_:2},1024),t(e(n).Td,{class:"first:rounded-l-md last:rounded-r-md w-56 bg-white border-b-0 dark:bg-darkmode-600 shadow-[20px_3px_20px_#0000000b] py-0 relative before:block before:w-px before:h-8 before:bg-slate-200 before:absolute before:left-0 before:inset-y-0 before:my-auto before:dark:bg-darkmode-400"},{default:s(()=>[r("div",ie,[r("a",{class:"flex items-center mr-3",href:"",onClick:J=>{J.preventDefault(),U(d.pos_code)}},[t(e(k),{icon:"CheckSquare",class:"w-4 h-4 mr-1"}),l(" Review ")],8,ce)])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])):(h(),y("div",_e,fe)),t(e(p),{staticBackdrop:"",open:$.value,onClose:o[9]||(o[9]=()=>{w(!1)})},{default:s(()=>[t(e(p).Panel,{class:"px-5 py-10"},{default:s(()=>[r("div",me,[t(e(q),{class:"mt-5 intro-y box"},{default:s(()=>[r("div",ve,[t(e(q).Panel,null,{default:s(()=>[t(e(p),{staticBackdrop:"",open:$.value,onClose:o[8]||(o[8]=()=>{w(!1)})},{default:s(()=>[t(e(p).Panel,null,{default:s(()=>[t(e(p).Title,null,{default:s(()=>[he]),_:1}),t(e(p).Description,{class:"grid grid-cols-12 gap-4 gap-y-3"},{default:s(()=>[r("div",be,[t(e(T),{htmlFor:"modal-form-1"},{default:s(()=>[l("Invoice")]),_:1}),t(e(C),{value:a.pos_code,type:"text",placeholder:"invoice",modelValue:a.pos_code,"onUpdate:modelValue":o[0]||(o[0]=d=>a.pos_code=d),disabled:!0},null,8,["value","modelValue"])]),r("div",we,[t(e(T),{htmlFor:"modal-form-3"},{default:s(()=>[l(" Customer ")]),_:1}),t(e(C),{type:"text",value:a.cus_name,placeholder:"Customer name",modelValue:a.cus_name,"onUpdate:modelValue":o[1]||(o[1]=d=>a.cus_name=d),disabled:!0},null,8,["value","modelValue"])]),r("div",xe,[t(e(T),{htmlFor:"modal-form-4"},{default:s(()=>[l(" SubTotal ")]),_:1}),t(e(C),{type:"text",value:a.subtotal,modelValue:a.subtotal,"onUpdate:modelValue":o[2]||(o[2]=d=>a.subtotal=d),disabled:!0},null,8,["value","modelValue"])]),r("div",ge,[t(e(T),{htmlFor:"modal-form-4"},{default:s(()=>[l(" Discount ")]),_:1}),t(e(C),{type:"text",value:a.disamount,modelValue:a.disamount,"onUpdate:modelValue":o[3]||(o[3]=d=>a.disamount=d),disabled:!0},null,8,["value","modelValue"])]),r("div",ye,[t(e(T),{htmlFor:"modal-form-4"},{default:s(()=>[l(" Total ")]),_:1}),t(e(C),{type:"text",value:a.total_amount,modelValue:a.total_amount,"onUpdate:modelValue":o[4]||(o[4]=d=>a.total_amount=d),disabled:!0},null,8,["value","modelValue"])]),r("div",ke,[r("div",Te,[r("div",Ce,[t(e(n),{striped:""},{default:s(()=>[t(e(n).Thead,null,{default:s(()=>[t(e(n).Tr,null,{default:s(()=>[t(e(n).Th,{class:"border-b-0 whitespace-nowrap"},{default:s(()=>[l(" Items ")]),_:1}),t(e(n).Th,{class:"border-b-0 whitespace-nowrap"},{default:s(()=>[l(" Stock ")]),_:1}),t(e(n).Th,{class:"border-b-0 whitespace-nowrap"},{default:s(()=>[l(" Price ")]),_:1}),t(e(n).Th,{class:"border-b-0 whitespace-nowrap"},{default:s(()=>[l(" Qty ")]),_:1}),t(e(n).Th,{class:"border-b-0 whitespace-nowrap"},{default:s(()=>[l(" Amount ")]),_:1})]),_:1})]),_:1}),t(e(n).Tbody,null,{default:s(()=>[(h(!0),y(M,null,j(L.value,d=>(h(),N(e(n).Tr,{key:d.pos_code,class:"intro-x"},{default:s(()=>[t(e(n).Td,{class:"text-left"},{default:s(()=>[l(_(d.pro_name),1)]),_:2},1024),t(e(n).Td,{class:"text-left"},{default:s(()=>[l(_(d.stc_name),1)]),_:2},1024),t(e(n).Td,{class:"text-left"},{default:s(()=>[l(" $"+_(d.unitprice),1)]),_:2},1024),t(e(n).Td,{class:"text-right"},{default:s(()=>[l(_(d.qty),1)]),_:2},1024),t(e(n).Td,{class:"text-right"},{default:s(()=>[l(" $"+_(d.disamount),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])])])]),_:1}),t(e(p).Footer,null,{default:s(()=>[t(e(b),{type:"button",variant:"outline-secondary",onClick:o[5]||(o[5]=()=>{w(!1)}),class:"w-20 mr-1"},{default:s(()=>[l(" Cancel ")]),_:1}),t(e(b),{class:"w-20 mr-1",variant:"outline-danger",type:"button",ref:"{sendButtonRef}",onClick:o[6]||(o[6]=d=>X())},{default:s(()=>[l(" Reject ")]),_:1},512),t(e(b),{variant:"primary",type:"button",class:"w-20",ref:"{sendButtonRef}",onClick:o[7]||(o[7]=d=>H())},{default:s(()=>[l(" Authorize ")]),_:1},512)]),_:1})]),_:1})]),_:1},8,["open"])]),_:1})])]),_:1})])]),_:1})]),_:1},8,["open"]),t(e(p),{open:D.value,onClose:o[12]||(o[12]=()=>{x(!1)}),initialFocus:E.value},{default:s(()=>[t(e(p).Panel,null,{default:s(()=>[r("div",Ve,[t(e(k),{icon:"CheckCircle",class:"w-16 h-16 mx-auto mt-3 text-success"}),Se,r("div",Ie," Authorize POS invoice "+_(a.pos_code),1)]),r("div",Pe,[t(e(b),{type:"button",variant:"outline-secondary",onClick:o[10]||(o[10]=()=>{x(!1)}),class:"w-24 mr-1"},{default:s(()=>[l(" Cancel ")]),_:1}),t(e(b),{type:"button",variant:"primary",class:"w-24",ref:"{deleteButtonRef}",onClick:o[11]||(o[11]=()=>{G()})},{default:s(()=>[l(" Ok ")]),_:1},512)])]),_:1})]),_:1},8,["open","initialFocus"]),t(e(p),{open:A.value,onClose:o[15]||(o[15]=()=>{V(!1)}),initialFocus:P.value},{default:s(()=>[t(e(p).Panel,null,{default:s(()=>[r("div",$e,[t(e(k),{icon:"XCircle",class:"w-16 h-16 mx-auto mt-3 text-danger"}),Ae,r("div",De," Reject purchase order "+_(a.pos_code),1)]),r("div",Fe,[t(e(b),{type:"button",variant:"outline-secondary",onClick:o[13]||(o[13]=()=>{V(!1)}),class:"w-24 mr-1"},{default:s(()=>[l(" Cancel ")]),_:1}),t(e(b),{type:"button",variant:"danger",class:"w-24",ref:"{deleteButtonRef}",onClick:o[14]||(o[14]=()=>{Q()})},{default:s(()=>[l(" Ok ")]),_:1},512)])]),_:1})]),_:1},8,["open","initialFocus"]),t(e(z),{id:"success-notification-content",class:"flex hidden"},{default:s(()=>[t(e(k),{icon:"CheckCircle",class:"text-success"}),Be]),_:1}),t(e(z),{id:"failed-notification-content",class:"flex hidden"},{default:s(()=>[t(e(k),{icon:"XCircle",class:"text-danger"}),Oe]),_:1})]))}});export{je as default};
