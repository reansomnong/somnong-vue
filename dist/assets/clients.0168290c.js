import{d as ae,a as T,u as M,b as te,r as h,p as se,R as oe,c as re,e as le,o as ne,f as S,H as R,g as de,h as p,i as y,j as n,k as a,w as s,l as d,m as e,_ as N,n as B,q as $,T as c,F as U,s as A,t as j,v as _,x as I,D as g,P as z,y as H,z as C,L as K,B as ie,C as ce,E as G,G as F,O as q}from"./index.62cb36ac.js";const ue="http://garage_api.test/api/",me=ae({id:"ClientStore",state:()=>({ItemDetail:[],ItemEdit:[],Gender:[]}),getters:{getItemsDetail(l){return l.ItemDetail},getItemsById(l){return l.ItemEdit},getGender(l){return l.Gender}},actions:{async ComboGender(){await T.get("v1/gb/combo/gender").then(l=>{this.Gender=l.data.data}).catch(l=>{if(l.response&&l.response.data){const i=l.response.data;M().setErrors(i.errors)}})},async ItemsById(l){await T.get(`v1/somnong/clients_byId/${l}`).then(i=>{if(i.data.success)return this.ItemEdit=i.data.data,this.ItemEdit})},async ItemsList(){await T.get("v1/somnong/getClients").then(l=>{l.data.success&&(this.ItemDetail=l.data.data)}).catch(l=>{if(l.response&&l.response.data){const i=l.response.data;M().setErrors(i.errors)}})},async create(l){return await T.post(ue+"v1/somnong/create_clients",l).then(async i=>{if(i.data.success)return i.data.success}).catch(i=>{if(i.response&&i.response.data){const b=i.response.data;M().setErrors(b.errors)}})}}}),pe={class:"grid grid-cols-12 gap-6 mt-5"},_e={class:"flex flex-wrap items-center col-span-12 mt-2 intro-y sm:flex-nowrap"},fe=n("div",{class:"hidden mx-auto md:block text-slate-500"}," Showing 1 to 10 of 150 entries ",-1),ve={class:"w-full mt-3 sm:w-auto sm:mt-0 sm:ml-auto md:ml-0"},he={class:"relative w-56 text-slate-500"},ge={class:"col-span-12 overflow-auto intro-y lg:overflow-visible"},be={href:"",class:"font-medium whitespace-nowrap"},we={class:"text-slate-500 text-xs whitespace-nowrap mt-0.5"},ke={class:"flex items-center justify-center"},xe=["onClick"],ye={class:"text-center"},Ce=n("h2",{class:"mr-auto text-base font-medium"}," Client info ",-1),Se={class:"col-span-12 sm:col-span-6"},$e={class:"col-span-12 sm:col-span-6"},Ie={class:"col-span-12 sm:col-span-6"},Ve=["value"],Te={class:"col-span-12 sm:col-span-6"},Be=["value"],Ge={class:"col-span-12 sm:col-span-12"},Fe={class:"col-span-12 sm:col-span-12"},qe={class:"ml-4 mr-4"},Pe={class:"font-medium"},Le=te({__name:"clients",setup(l){const i=h(),b=()=>{var m;(m=i.value)==null||m.showToast()};se("bind[basicStickyNotification]",m=>{i.value=m});const P=oe(),f=me(),O=re(),t=le({}),w=h("0"),k=h("0"),V=h(""),D=h("");h(null);const L=h(!1),x=m=>{u.value.$reset(),L.value=m};ne(async()=>{E(),await f.ItemsList(),await f.ComboGender(),await P.getComboProvince()});const X=S(()=>P.getProvince),J=S(()=>f.getGender),v=S(()=>f.getItemsById),Q=S(()=>f.getItemsDetail);R(w,()=>{t.gender=w.value}),R(k,()=>{t.address_code=k.value});async function W(m){E(),await f.ItemsById(m),t.status="u",t.client_id=v.value[0].client_id,t.name=v.value[0].name,w.value=v.value[0].gender,t.phone=v.value[0].phone,t.remark=v.value[0].remark,t.active=t.active=!!v.value[0].active,t.google_map=v.value[0].google_map,k.value=v.value[0].address_code,x(!0)}function E(){t.branch_code="",t.client_id="",t.name="",t.phone="",t.address="",t.google_map="",t.remark="",u.value.$reset(),t.active=!0,t.status="i",w.value=""}const Y=S(()=>({name:{required:G.withMessage("Client name is required",F),minLength:q(3)},gender:{required:G.withMessage("Gender is required",F),minLength:q(1)},phone:{required:G.withMessage("Phone is required",F),minLength:q(1)},address_code:{required:G.withMessage("location is required",F),minLength:q(1)}})),u=de(Y,t,{$autoDirty:!0});async function Z(){if(u.value.$touch(),u.value.$invalid)V.value=u.value.$errors[0].$message,D.value="error",b();else{var m=await f.create(t);m&&(D.value="",t.status=="i"?V.value=O.getInsert:V.value=O.getUpdate,b(),x(!1),await f.ItemsList(),E())}}return(m,r)=>(p(),y("div",pe,[n("div",_e,[a(e(N),{variant:"primary",class:"mr-2 shadow-md",onClick:r[0]||(r[0]=()=>{x(!0)})},{default:s(()=>[d(" Create New ")]),_:1}),fe,n("div",ve,[n("div",he,[a(e(B),{type:"text",class:"w-56 pr-10 !box",placeholder:"Search..."}),a(e($),{icon:"Search",class:"absolute inset-y-0 right-0 w-4 h-4 my-auto mr-3"})])])]),n("div",ge,[a(e(c),{class:"border-spacing-y-[10px] border-separate -mt-2"},{default:s(()=>[a(e(c).Thead,null,{default:s(()=>[a(e(c).Tr,null,{default:s(()=>[a(e(c).Th,{class:"border-b-0 whitespace-nowrap"},{default:s(()=>[d(" Customer name ")]),_:1}),a(e(c).Th,{class:"border-b-0 whitespace-nowrap"},{default:s(()=>[d(" Phone ")]),_:1}),a(e(c).Th,{class:"border-b-0 whitespace-nowrap"},{default:s(()=>[d(" Address ")]),_:1}),a(e(c).Th,{class:"text-center border-b-0 whitespace-nowrap"},{default:s(()=>[d(" STATUS ")]),_:1}),a(e(c).Th,{class:"text-center border-b-0 whitespace-nowrap"},{default:s(()=>[d(" ACTIONS ")]),_:1})]),_:1})]),_:1}),a(e(c).Tbody,null,{default:s(()=>[(p(!0),y(U,null,A(Q.value,o=>(p(),j(e(c).Tr,{key:o.client_id,class:"intro-x"},{default:s(()=>[a(e(c).Td,{class:"first:rounded-l-md last:rounded-r-md bg-white border-b-0 dark:bg-darkmode-600 shadow-[20px_3px_20px_#0000000b]"},{default:s(()=>[n("a",be,_(o.name),1),n("div",we," id: "+_(o.client_id)+"-"+_(o.phone),1)]),_:2},1024),a(e(c).Td,{class:"first:rounded-l-md last:rounded-r-md bg-white border-b-0 dark:bg-darkmode-600 shadow-[20px_3px_20px_#0000000b]"},{default:s(()=>[d(_(o.phone),1)]),_:2},1024),a(e(c).Td,{class:"first:rounded-l-md last:rounded-r-md bg-white border-b-0 dark:bg-darkmode-600 shadow-[20px_3px_20px_#0000000b]"},{default:s(()=>[d(_(o.address),1)]),_:2},1024),a(e(c).Td,{class:"first:rounded-l-md last:rounded-r-md w-40 bg-white border-b-0 dark:bg-darkmode-600 shadow-[20px_3px_20px_#0000000b]"},{default:s(()=>[n("div",{class:I(["flex items-center justify-center",{"text-success":o.active},{"text-danger":!o.active}])},[a(e($),{icon:"CheckSquare",class:"w-4 h-4 mr-2"}),d(" "+_(o.active?"Active":"Inactive"),1)],2)]),_:2},1024),a(e(c).Td,{class:"first:rounded-l-md last:rounded-r-md w-56 bg-white border-b-0 dark:bg-darkmode-600 shadow-[20px_3px_20px_#0000000b] py-0 relative before:block before:w-px before:h-8 before:bg-slate-200 before:absolute before:left-0 before:inset-y-0 before:my-auto before:dark:bg-darkmode-400"},{default:s(()=>[n("div",ke,[n("a",{class:"flex items-center mr-3",href:"",onClick:ee=>{ee.preventDefault(),W(o.client_id)}},[a(e($),{icon:"CheckSquare",class:"w-4 h-4 mr-1"}),d(" Edit ")],8,xe)])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),a(e(g),{staticBackdrop:"",open:L.value,onClose:r[11]||(r[11]=()=>{x(!1)})},{default:s(()=>[a(e(g).Panel,{class:"px-5 py-10"},{default:s(()=>[n("div",ye,[a(e(z),{class:"mt-5 intro-y box"},{default:s(()=>[a(e(z).Panel,null,{default:s(()=>[a(e(g),{staticBackdrop:"",open:L.value,onClose:r[10]||(r[10]=()=>{x(!1)})},{default:s(()=>[a(e(g).Panel,null,{default:s(()=>[a(e(g).Title,null,{default:s(()=>[Ce,a(e(H),{class:"mt-2"},{default:s(()=>[a(e(H).Input,{checked:t.active,modelValue:t.active,"onUpdate:modelValue":r[1]||(r[1]=o=>t.active=o),type:"checkbox"},null,8,["checked","modelValue"])]),_:1})]),_:1}),a(e(g).Description,{class:"grid grid-cols-12 gap-4 gap-y-3"},{default:s(()=>[n("div",Se,[a(e(C),{htmlFor:"modal-form-1"},{default:s(()=>[d("Full Name")]),_:1}),a(e(B),{value:t.name,type:"text",placeholder:"client name",modelValue:t.name,"onUpdate:modelValue":r[2]||(r[2]=o=>t.name=o),error:e(u).name.$error,class:I({"border-danger":e(u).name.$error})},null,8,["value","modelValue","error","class"])]),n("div",$e,[a(e(C),{htmlFor:"modal-form-4"},{default:s(()=>[d(" Phone ")]),_:1}),a(e(B),{type:"text",value:t.phone,placeholder:"phone",modelValue:t.phone,"onUpdate:modelValue":r[3]||(r[3]=o=>t.phone=o),error:e(u).phone.$error,class:I({"border-danger":e(u).phone.$error})},null,8,["value","modelValue","error","class"])]),n("div",Ie,[a(e(C),{htmlFor:"modal-form-1"},{default:s(()=>[d("Gender")]),_:1}),a(e(K),{name:"cboGender",modelValue:w.value,"onUpdate:modelValue":r[4]||(r[4]=o=>w.value=o),error:e(u).gender.$error,class:I({"border-danger":e(u).gender.$error})},{default:s(()=>[(p(!0),y(U,null,A(J.value,o=>(p(),y("option",{value:o.id,key:o.id},_(o.name),9,Ve))),128))]),_:1},8,["modelValue","error","class"])]),n("div",Te,[a(e(C),{htmlFor:"modal-form-6"},{default:s(()=>[d("Address")]),_:1}),a(e(K),{name:"cboAddress",modelValue:k.value,"onUpdate:modelValue":r[5]||(r[5]=o=>k.value=o),value:k.value,error:e(u).address_code.$error,class:I({"border-danger":e(u).address_code.$error})},{default:s(()=>[(p(!0),y(U,null,A(X.value,o=>(p(),y("option",{value:o.id,key:o.id},_(o.name),9,Be))),128))]),_:1},8,["modelValue","value","error","class"])]),n("div",Ge,[a(e(C),{htmlFor:"modal-form-4"},{default:s(()=>[d(" Link Google Map ")]),_:1}),a(e(B),{type:"text",value:t.google_map,placeholder:"Google Map",modelValue:t.google_map,"onUpdate:modelValue":r[6]||(r[6]=o=>t.google_map=o)},null,8,["value","modelValue"])]),n("div",Fe,[a(e(C),{htmlFor:"remark"},{default:s(()=>[d(" Remark ")]),_:1}),a(e(ie),{modelValue:t.remark,"onUpdate:modelValue":r[7]||(r[7]=o=>t.remark=o),value:t.remark,placeholder:"type your comment"},null,8,["modelValue","value"])])]),_:1}),a(e(g).Footer,null,{default:s(()=>[a(e(N),{type:"button",variant:"outline-secondary",onClick:r[8]||(r[8]=()=>{x(!1)}),class:"w-20 mr-1"},{default:s(()=>[d(" Cancel ")]),_:1}),a(e(N),{name:"btnOk",variant:"primary",type:"button",class:"w-20",ref:"{sendButtonRef}",disable:e(u).$invalid,onClick:r[9]||(r[9]=o=>Z())},{default:s(()=>[d(" Commit ")]),_:1},8,["disable"])]),_:1})]),_:1})]),_:1},8,["open"])]),_:1})]),_:1})])]),_:1})]),_:1},8,["open"]),a(e(ce),{refKey:"basicStickyNotification",options:{duration:1500},class:"flex hidden"},{default:s(()=>[D.value=="error"?(p(),j(e($),{key:0,icon:"XCircle",class:"text-danger"})):(p(),j(e($),{key:1,icon:"CheckCircle",class:"text-success"})),n("div",qe,[n("div",Pe,_(V.value),1)])]),_:1})]))}});export{Le as default};
