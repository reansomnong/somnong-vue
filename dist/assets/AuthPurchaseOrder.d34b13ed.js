import{d as K,a as g,u as B,b as Y,e as Z,r as m,o as ee,f as I,g as te,h,i as y,k as t,w as a,m as e,T as r,l,F as M,s as j,t as N,j as d,v as c,q as k,D as _,P as q,z as T,n as C,_ as v,C as z,S as P,N as ae,E as se,G as oe,O as le}from"./index.62cb36ac.js";const E="http://garage_api.test/api/",re=K({id:"AuthPurchaseOrder",state:()=>({Items:[],ItemDetail:[],ItemView:[]}),getters:{getItems(u){return u.Items},getItemView(u){return u.ItemView},getItemsDetail(u){return u.ItemDetail}},actions:{async una_PurchaseOrder(){await g.get("v1/pos/una_purchase_order").then(u=>{if(u.data.success)return this.Items=u.data.data,console.log(this.Items),this.Items})},async view_una_pos(u){await g.get(`v1/pos/una_po_view/${u}`).then(s=>{if(s.data.success)return this.ItemView=s.data.data,console.log(this.ItemView),this.ItemView})},async view_una_po_details(u){await g.get(`v1/pos/una_po_details/${u}`).then(s=>{if(s.data.success)return this.ItemDetail=s.data.data,this.ItemDetail})},async auth_purchaseorder(u){return console.log(u),await g.post(E+"v1/pos/auth_purchaseorder",u).then(async s=>{if(s.data.success)return s.data.success}).catch(s=>{if(s.response&&s.response.data){const i=s.response.data;B().setErrors(i.errors)}})},async reject_purchaseorder(u){return console.log(u),await g.post(E+"v1/pos/reject_purchaseorder",u).then(async s=>{if(s.data.success)return s.data.success}).catch(s=>{if(s.response&&s.response.data){const i=s.response.data;B().setErrors(i.errors)}})}}}),ne={class:"grid grid-cols-12 gap-6 mt-5"},de={key:0,class:"col-span-12 overflow-auto intro-y lg:overflow-visible"},ue={href:"",class:"font-medium whitespace-nowrap"},ie={class:"text-slate-500 text-xs whitespace-nowrap mt-0.5"},ce={class:"flex items-center justify-center"},pe=["onClick"],_e={key:1,class:"col-span-12 overflow-auto intro-y lg:overflow-visible",role:"alert"},fe=ae('<div class="flex"><div class="py-1"><svg class="fill-current h-6 w-6 text-teal-500 mr-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.93 17.07A10 10 0 1 1 17.07 2.93 10 10 0 0 1 2.93 17.07zm12.73-1.41A8 8 0 1 0 4.34 4.34a8 8 0 0 0 11.32 11.32zM9 11V9h2v6H9v-4zm0-6h2v2H9V5z"></path></svg></div><div><p class="font-bold">No record display</p><p class="text-sm">Make sure you already booking.</p></div></div>',1),me=[fe],he={class:"text-center"},ve={class:"p-5"},we=d("h2",{class:"mr-auto text-base font-medium"}," Authorize Purchase Order ",-1),be={class:"col-span-12 sm:col-span-6"},xe={class:"col-span-12 sm:col-span-6"},ge={class:"col-span-12 sm:col-span-6"},ye={class:"col-span-12 sm:col-span-6"},ke={class:"col-span-12 sm:col-span-6"},Te={class:"col-span-12 sm:col-span-12"},Ce={class:"col-span-12 sm:col-span-12"},Ve={class:"-mt-3 overflow-auto lg:overflow-visible"},Ie={class:"p-5 text-center"},Pe=d("div",{class:"mt-5 text-3xl"},"Are you sure ?",-1),Se={class:"mt-2 text-slate-500"},$e={class:"px-5 pb-8 text-center"},Ae={class:"p-5 text-center"},De=d("div",{class:"mt-5 text-3xl"},"Are you sure?",-1),Fe={class:"mt-2 text-slate-500"},Oe={class:"px-5 pb-8 text-center"},Be=d("div",{class:"ml-4 mr-4"},[d("div",{class:"font-medium"},"Trasaction has been authorized!")],-1),Me=d("div",{class:"ml-4 mr-4"},[d("div",{class:"mt-1 text-slate-500"},"Please check the fileld form.")],-1),Ne=Y({__name:"AuthPurchaseOrder",setup(u){const s=Z({}),i=re();m(null),m(null);const S=m(null),R=m(null),$=m(!1),w=p=>{$.value=p},A=m(!1),V=p=>{A.value=p},D=m(!1),x=p=>{D.value=p};ee(async()=>{await i.una_PurchaseOrder()});const F=I(()=>i.getItems),b=I(()=>i.getItemView),L=I(()=>i.getItemsDetail);async function U(p){await i.view_una_pos(p),await i.view_una_po_details(p),s.status="auth_po",s.pur_code=b.value[0].pur_code,s.invoice=b.value[0].invoice,s.sup_name=b.value[0].sup_name,s.subtotal=b.value[0].subtotal,s.disamount=b.value[0].disamount,s.total=b.value[0].total,w(!0)}function O(){s.pur_code="",s.sup_code="",s.sup_name="",s.subtotal=0,s.disamount=0,s.invoice="",s.inputter="",s.remark="",f.value.$reset(),s.status="auth_po"}const W=I(()=>({pur_code:{required:se.withMessage("Please verify purchase order code",oe),minLength:le(1)}})),f=te(W,s,{$autoDirty:!0});async function H(){x(!0)}async function X(){V(!0)}async function G(){if(f.value.$touch(),f.value.$invalid){const o=document.querySelectorAll("#failed-notification-content")[0].cloneNode(!0);o.classList.remove("hidden"),P({node:o,duration:3e3,newWindow:!0,close:!0,gravity:"top",position:"right",stopOnFocus:!0}).showToast()}else{var p=await i.auth_purchaseorder(s);if(p){const o=document.querySelectorAll("#success-notification-content")[0].cloneNode(!0);o.classList.remove("hidden"),P({node:o,duration:3e3,newWindow:!0,close:!0,gravity:"top",position:"right",stopOnFocus:!0}).showToast(),await i.una_PurchaseOrder(),w(!1),x(!1),O(),f.value.$reset()}}}async function Q(){if(f.value.$touch(),f.value.$invalid){const o=document.querySelectorAll("#failed-notification-content")[0].cloneNode(!0);o.classList.remove("hidden"),P({node:o,duration:3e3,newWindow:!0,close:!0,gravity:"top",position:"right",stopOnFocus:!0}).showToast()}else{s.status="reject_auth_po";var p=await i.reject_purchaseorder(s);if(p){const o=document.querySelectorAll("#success-notification-content")[0].cloneNode(!0);o.classList.remove("hidden"),P({node:o,duration:3e3,newWindow:!0,close:!0,gravity:"top",position:"right",stopOnFocus:!0}).showToast(),await i.una_PurchaseOrder(),w(!1),x(!1),V(!1),O(),f.value.$reset()}}}return(p,o)=>(h(),y("div",ne,[F.value.length>0?(h(),y("div",de,[t(e(r),{class:"border-spacing-y-[10px] border-separate -mt-2"},{default:a(()=>[t(e(r).Thead,null,{default:a(()=>[t(e(r).Tr,null,{default:a(()=>[t(e(r).Th,{class:"border-b-0 whitespace-nowrap"},{default:a(()=>[l(" Supply ")]),_:1}),t(e(r).Th,{class:"border-b-0 whitespace-nowrap"},{default:a(()=>[l(" Invoice ")]),_:1}),t(e(r).Th,{class:"border-b-0 whitespace-nowrap"},{default:a(()=>[l(" Subtotal ")]),_:1}),t(e(r).Th,{class:"border-b-0 whitespace-nowrap"},{default:a(()=>[l(" Discount ")]),_:1}),t(e(r).Th,{class:"border-b-0 whitespace-nowrap"},{default:a(()=>[l(" Amount ")]),_:1}),t(e(r).Th,{class:"border-b-0 whitespace-nowrap"},{default:a(()=>[l(" Input Date ")]),_:1}),t(e(r).Th,{class:"text-center border-b-0 whitespace-nowrap"},{default:a(()=>[l(" Action ")]),_:1})]),_:1})]),_:1}),t(e(r).Tbody,null,{default:a(()=>[(h(!0),y(M,null,j(F.value,n=>(h(),N(e(r).Tr,{key:n.pur_code,class:"intro-x"},{default:a(()=>[t(e(r).Td,{class:"first:rounded-l-md last:rounded-r-md bg-white border-b-0 dark:bg-darkmode-600 shadow-[20px_3px_20px_#0000000b]"},{default:a(()=>[d("a",ue,c(n.sup_name),1),d("div",ie," ID: "+c(n.pur_code),1)]),_:2},1024),t(e(r).Td,{class:"first:rounded-l-md last:rounded-r-md bg-white border-b-0 dark:bg-darkmode-600 shadow-[20px_3px_20px_#0000000b]"},{default:a(()=>[l(c(n.invoice),1)]),_:2},1024),t(e(r).Td,{class:"first:rounded-l-md last:rounded-r-md bg-white border-b-0 dark:bg-darkmode-600 shadow-[20px_3px_20px_#0000000b]"},{default:a(()=>[l(c(n.subtotal),1)]),_:2},1024),t(e(r).Td,{class:"first:rounded-l-md last:rounded-r-md bg-white border-b-0 dark:bg-darkmode-600 shadow-[20px_3px_20px_#0000000b]"},{default:a(()=>[l(c(n.disamount),1)]),_:2},1024),t(e(r).Td,{class:"first:rounded-l-md last:rounded-r-md bg-white border-b-0 dark:bg-darkmode-600 shadow-[20px_3px_20px_#0000000b]"},{default:a(()=>[l(c(n.total),1)]),_:2},1024),t(e(r).Td,{class:"first:rounded-l-md last:rounded-r-md bg-white border-b-0 dark:bg-darkmode-600 shadow-[20px_3px_20px_#0000000b]"},{default:a(()=>[l(c(n.input_date),1)]),_:2},1024),t(e(r).Td,{class:"first:rounded-l-md last:rounded-r-md w-56 bg-white border-b-0 dark:bg-darkmode-600 shadow-[20px_3px_20px_#0000000b] py-0 relative before:block before:w-px before:h-8 before:bg-slate-200 before:absolute before:left-0 before:inset-y-0 before:my-auto before:dark:bg-darkmode-400"},{default:a(()=>[d("div",ce,[d("a",{class:"flex items-center mr-3",href:"",onClick:J=>{J.preventDefault(),U(n.pur_code)}},[t(e(k),{icon:"CheckSquare",class:"w-4 h-4 mr-1"}),l(" Edit ")],8,pe)])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])):(h(),y("div",_e,me)),t(e(_),{staticBackdrop:"",open:$.value,onClose:o[9]||(o[9]=()=>{w(!1)})},{default:a(()=>[t(e(_).Panel,{class:"px-5 py-10"},{default:a(()=>[d("div",he,[t(e(q),{class:"mt-5 intro-y box"},{default:a(()=>[d("div",ve,[t(e(q).Panel,null,{default:a(()=>[t(e(_),{staticBackdrop:"",open:$.value,onClose:o[8]||(o[8]=()=>{w(!1)})},{default:a(()=>[t(e(_).Panel,null,{default:a(()=>[t(e(_).Title,null,{default:a(()=>[we]),_:1}),t(e(_).Description,{class:"grid grid-cols-12 gap-4 gap-y-3"},{default:a(()=>[d("div",be,[t(e(T),{htmlFor:"modal-form-1"},{default:a(()=>[l("Invoice")]),_:1}),t(e(C),{value:s.invoice,type:"text",placeholder:"invoice",modelValue:s.invoice,"onUpdate:modelValue":o[0]||(o[0]=n=>s.invoice=n),disabled:!0},null,8,["value","modelValue"])]),d("div",xe,[t(e(T),{htmlFor:"modal-form-3"},{default:a(()=>[l(" Supply ")]),_:1}),t(e(C),{type:"text",value:s.sup_name,placeholder:"Supply name",modelValue:s.sup_name,"onUpdate:modelValue":o[1]||(o[1]=n=>s.sup_name=n),disabled:!0},null,8,["value","modelValue"])]),d("div",ge,[t(e(T),{htmlFor:"modal-form-4"},{default:a(()=>[l(" SubTotal ")]),_:1}),t(e(C),{type:"text",value:s.subtotal,modelValue:s.subtotal,"onUpdate:modelValue":o[2]||(o[2]=n=>s.subtotal=n),disabled:!0},null,8,["value","modelValue"])]),d("div",ye,[t(e(T),{htmlFor:"modal-form-4"},{default:a(()=>[l(" Discount ")]),_:1}),t(e(C),{type:"text",value:s.disamount,modelValue:s.disamount,"onUpdate:modelValue":o[3]||(o[3]=n=>s.disamount=n),disabled:!0},null,8,["value","modelValue"])]),d("div",ke,[t(e(T),{htmlFor:"modal-form-4"},{default:a(()=>[l(" Total ")]),_:1}),t(e(C),{type:"text",value:s.total,modelValue:s.total,"onUpdate:modelValue":o[4]||(o[4]=n=>s.total=n),disabled:!0},null,8,["value","modelValue"])]),d("div",Te,[d("div",Ce,[d("div",Ve,[t(e(r),{striped:""},{default:a(()=>[t(e(r).Thead,null,{default:a(()=>[t(e(r).Tr,null,{default:a(()=>[t(e(r).Th,{class:"border-b-0 whitespace-nowrap"},{default:a(()=>[l(" Items ")]),_:1}),t(e(r).Th,{class:"border-b-0 whitespace-nowrap"},{default:a(()=>[l(" Stock ")]),_:1}),t(e(r).Th,{class:"border-b-0 whitespace-nowrap"},{default:a(()=>[l(" Price ")]),_:1}),t(e(r).Th,{class:"border-b-0 whitespace-nowrap"},{default:a(()=>[l(" Qty ")]),_:1}),t(e(r).Th,{class:"border-b-0 whitespace-nowrap"},{default:a(()=>[l(" Amount ")]),_:1})]),_:1})]),_:1}),t(e(r).Tbody,null,{default:a(()=>[(h(!0),y(M,null,j(L.value,n=>(h(),N(e(r).Tr,{key:n.pur_code,class:"intro-x"},{default:a(()=>[t(e(r).Td,{class:"text-left"},{default:a(()=>[l(c(n.pro_name),1)]),_:2},1024),t(e(r).Td,{class:"text-left"},{default:a(()=>[l(c(n.stc_name),1)]),_:2},1024),t(e(r).Td,{class:"text-left"},{default:a(()=>[l(" $"+c(n.unitprice),1)]),_:2},1024),t(e(r).Td,{class:"text-right"},{default:a(()=>[l(c(n.qty),1)]),_:2},1024),t(e(r).Td,{class:"text-right"},{default:a(()=>[l(" $"+c(n.disamount),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])])])]),_:1}),t(e(_).Footer,null,{default:a(()=>[t(e(v),{type:"button",variant:"outline-secondary",onClick:o[5]||(o[5]=()=>{w(!1)}),class:"w-20 mr-1"},{default:a(()=>[l(" Cancel ")]),_:1}),t(e(v),{class:"w-20 mr-1",variant:"outline-danger",type:"button",ref:"{sendButtonRef}",onClick:o[6]||(o[6]=n=>X())},{default:a(()=>[l(" Reject ")]),_:1},512),t(e(v),{variant:"primary",type:"button",class:"w-20",ref:"{sendButtonRef}",onClick:o[7]||(o[7]=n=>H())},{default:a(()=>[l(" Authorize ")]),_:1},512)]),_:1})]),_:1})]),_:1},8,["open"])]),_:1})])]),_:1})])]),_:1})]),_:1},8,["open"]),t(e(_),{open:D.value,onClose:o[12]||(o[12]=()=>{x(!1)}),initialFocus:R.value},{default:a(()=>[t(e(_).Panel,null,{default:a(()=>[d("div",Ie,[t(e(k),{icon:"CheckCircle",class:"w-16 h-16 mx-auto mt-3 text-success"}),Pe,d("div",Se," Authorize purchase order "+c(s.pur_code),1)]),d("div",$e,[t(e(v),{type:"button",variant:"outline-secondary",onClick:o[10]||(o[10]=()=>{x(!1)}),class:"w-24 mr-1"},{default:a(()=>[l(" Cancel ")]),_:1}),t(e(v),{type:"button",variant:"primary",class:"w-24",ref:"{deleteButtonRef}",onClick:o[11]||(o[11]=()=>{G()})},{default:a(()=>[l(" Ok ")]),_:1},512)])]),_:1})]),_:1},8,["open","initialFocus"]),t(e(_),{open:A.value,onClose:o[15]||(o[15]=()=>{V(!1)}),initialFocus:S.value},{default:a(()=>[t(e(_).Panel,null,{default:a(()=>[d("div",Ae,[t(e(k),{icon:"XCircle",class:"w-16 h-16 mx-auto mt-3 text-danger"}),De,d("div",Fe," Reject purchase order "+c(s.pur_code),1)]),d("div",Oe,[t(e(v),{type:"button",variant:"outline-secondary",onClick:o[13]||(o[13]=()=>{V(!1)}),class:"w-24 mr-1"},{default:a(()=>[l(" Cancel ")]),_:1}),t(e(v),{type:"button",variant:"danger",class:"w-24",ref:"{deleteButtonRef}",onClick:o[14]||(o[14]=()=>{Q()})},{default:a(()=>[l(" Ok ")]),_:1},512)])]),_:1})]),_:1},8,["open","initialFocus"]),t(e(z),{id:"success-notification-content",class:"flex hidden"},{default:a(()=>[t(e(k),{icon:"CheckCircle",class:"text-success"}),Be]),_:1}),t(e(z),{id:"failed-notification-content",class:"flex hidden"},{default:a(()=>[t(e(k),{icon:"XCircle",class:"text-danger"}),Me]),_:1})]))}});export{Ne as default};
