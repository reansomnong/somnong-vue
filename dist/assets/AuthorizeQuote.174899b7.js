import{d as G,a as C,u as V,b as X,e as U,r as w,o as J,f as S,g as K,h as y,i as T,k as t,w as o,m as e,T as r,l as n,F as Y,s as Z,t as ee,j as l,v as f,q,D as _,_ as h,P as M,z as p,n as v,B as te,C as j,S as I,N as se,E as oe,G as ae,O as le}from"./index.62cb36ac.js";const N="http://garage_api.test/api/",ne=G({id:"useAuthQuoteStore",state:()=>({ItemDetail:[],Items:[],ItemView:[]}),getters:{getItems(d){return d.Items},getItemView(d){return d.ItemView},getItemsDetail(d){return d.ItemDetail}},actions:{async una_somnong_quotes(){await C.get("v1/somnong/una_somnong_quotes").then(d=>{if(d.data.success)return this.Items=d.data.data,this.Items})},async ItemsById(d){await C.get(`v1/somnong/auth_quote_view/${d}`).then(s=>{if(s.data.success)return this.ItemView=s.data.data,this.ItemView})},async auth_somnong_quotes(d){return await C.post(N+"v1/somnong/auth_somnong_quotes",d).then(async s=>{if(s.data.success)return s.data.success}).catch(s=>{if(s.response&&s.response.data){const u=s.response.data;V().setErrors(u.errors)}})},async reject_somnong_quotes(d){return console.log(d),await C.post(N+"v1/somnong/reject_somnong_quotes",d).then(async s=>{if(s.data.success)return s.data.success}).catch(s=>{if(s.response&&s.response.data){const u=s.response.data;V().setErrors(u.errors)}})}}}),re={class:"grid grid-cols-12 gap-6 mt-5"},de={key:0,class:"col-span-12 overflow-auto intro-y lg:overflow-visible"},ue={href:"",class:"font-medium whitespace-nowrap"},ie={class:"text-slate-500 text-xs whitespace-nowrap mt-0.5"},ce={class:"flex items-center justify-center"},_e=["onClick"],me={key:1,class:"col-span-12 overflow-auto intro-y lg:overflow-visible",role:"alert"},fe=se('<div class="flex"><div class="py-1"><svg class="fill-current h-6 w-6 text-teal-500 mr-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.93 17.07A10 10 0 1 1 17.07 2.93 10 10 0 0 1 2.93 17.07zm12.73-1.41A8 8 0 1 0 4.34 4.34a8 8 0 0 0 11.32 11.32zM9 11V9h2v6H9v-4zm0-6h2v2H9V5z"></path></svg></div><div><p class="font-bold">No record display</p><p class="text-sm">Make sure you already booking.</p></div></div>',1),pe=[fe],ve={class:"p-5 text-center"},he=l("div",{class:"mt-5 text-3xl"},"Are you sure ?",-1),be={class:"mt-2 text-slate-500"},we={class:"px-5 pb-8 text-center"},ge={class:"p-5 text-center"},xe=l("div",{class:"mt-5 text-3xl"},"Are you sure?",-1),ye={class:"mt-2 text-slate-500"},qe={class:"px-5 pb-8 text-center"},ke={class:"text-center"},Ce={class:"p-5"},Te={class:"mr-auto text-base font-medium"},Ie={class:"col-span-12 sm:col-span-12"},Fe={class:"col-span-12 sm:col-span-6"},Ae={class:"col-span-12 sm:col-span-6"},Se={class:"col-span-12 sm:col-span-6"},Be={class:"col-span-12 sm:col-span-6"},$e={class:"col-span-12 sm:col-span-12"},Pe={class:"col-span-12 sm:col-span-6"},De={class:"col-span-12 sm:col-span-6"},Ve={class:"col-span-12 sm:col-span-12"},Me=l("div",{class:"ml-4 mr-4"},[l("div",{class:"font-medium"},"Trasaction has been authorized!")],-1),je=l("div",{class:"ml-4 mr-4"},[l("div",{class:"mt-1 text-slate-500"},"Please check the fileld form.")],-1),Re=X({__name:"AuthorizeQuote",setup(d){const s=U({}),u=ne();w(null);const F=w(null),R=w(null),A=w(!1),b=c=>{A.value=c},B=w(!1),k=c=>{B.value=c},$=w(!1),g=c=>{$.value=c};J(async()=>{await u.una_somnong_quotes()});const P=S(()=>u.getItems),i=S(()=>u.getItemView);async function z(c){await u.ItemsById(c),i.value.length>0&&(console.log(i.value),s.status="auth_so_quote",s.quote_code=i.value[0].quote_code,s.client_name=i.value[0].client_name,s.tranDate=i.value[0].tranDate,s.house_number=i.value[0].house_number,s.quote_leader=i.value[0].quote_leader,s.quote_status=i.value[0].quote_status,s.quote_title=i.value[0].quote_title,s.google_map=i.value[0].google_map,s.remark=i.value[0].remark,s.address=i.value[0].address,b(!0))}function D(){s.quote_code="",s.branch_code="",s.quote_leader="",s.quote_title="",s.quote_status="",s.address="",s.remark="",s.inputter="",x.value.$reset(),s.status="auth_so_quote"}const L=S(()=>({quote_code:{required:oe.withMessage("Please verify point of sale code",ae),minLength:le(1)}})),x=K(L,s,{$autoDirty:!0});async function E(){g(!0)}async function O(){k(!0)}async function Q(){if(x.value.$touch(),x.value.$invalid){const a=document.querySelectorAll("#failed-notification-content")[0].cloneNode(!0);a.classList.remove("hidden"),I({node:a,duration:3e3,newWindow:!0,close:!0,gravity:"top",position:"right",stopOnFocus:!0}).showToast()}else{console.log(s);var c=await u.auth_somnong_quotes(s);if(c){const a=document.querySelectorAll("#success-notification-content")[0].cloneNode(!0);a.classList.remove("hidden"),I({node:a,duration:3e3,newWindow:!0,close:!0,gravity:"top",position:"right",stopOnFocus:!0}).showToast(),await u.una_somnong_quotes(),b(!1),g(!1),D()}}}async function W(){if(x.value.$touch(),x.value.$invalid){const a=document.querySelectorAll("#failed-notification-content")[0].cloneNode(!0);a.classList.remove("hidden"),I({node:a,duration:3e3,newWindow:!0,close:!0,gravity:"top",position:"right",stopOnFocus:!0}).showToast()}else{s.status="reject_so_qoute";var c=await u.reject_somnong_quotes(s);if(c){const a=document.querySelectorAll("#success-notification-content")[0].cloneNode(!0);a.classList.remove("hidden"),I({node:a,duration:3e3,newWindow:!0,close:!0,gravity:"top",position:"right",stopOnFocus:!0}).showToast(),await u.una_somnong_quotes(),b(!1),g(!1),k(!1),D()}}}return(c,a)=>(y(),T("div",re,[P.value.length>0?(y(),T("div",de,[t(e(r),{class:"border-spacing-y-[10px] border-separate -mt-2"},{default:o(()=>[t(e(r).Thead,null,{default:o(()=>[t(e(r).Tr,null,{default:o(()=>[t(e(r).Th,{class:"border-b-0 whitespace-nowrap"},{default:o(()=>[n(" Quote ID ")]),_:1}),t(e(r).Th,{class:"border-b-0 whitespace-nowrap"},{default:o(()=>[n(" Client ")]),_:1}),t(e(r).Th,{class:"border-b-0 whitespace-nowrap"},{default:o(()=>[n(" Tittle ")]),_:1}),t(e(r).Th,{class:"border-b-0 whitespace-nowrap"},{default:o(()=>[n(" Status ")]),_:1}),t(e(r).Th,{class:"border-b-0 whitespace-nowrap"},{default:o(()=>[n(" Inputter ")]),_:1}),t(e(r).Th,{class:"text-center border-b-0 whitespace-nowrap"},{default:o(()=>[n(" Action ")]),_:1})]),_:1})]),_:1}),t(e(r).Tbody,null,{default:o(()=>[(y(!0),T(Y,null,Z(P.value,m=>(y(),ee(e(r).Tr,{key:m.quote_code,class:"intro-x"},{default:o(()=>[t(e(r).Td,{class:"first:rounded-l-md last:rounded-r-md bg-white border-b-0 dark:bg-darkmode-600 shadow-[20px_3px_20px_#0000000b]"},{default:o(()=>[l("a",ue,f(m.quote_title),1),l("div",ie," id: "+f(m.quote_code),1)]),_:2},1024),t(e(r).Td,{class:"first:rounded-l-md last:rounded-r-md bg-white border-b-0 dark:bg-darkmode-600 shadow-[20px_3px_20px_#0000000b]"},{default:o(()=>[n(f(m.client_name),1)]),_:2},1024),t(e(r).Td,{class:"first:rounded-l-md last:rounded-r-md bg-white border-b-0 dark:bg-darkmode-600 shadow-[20px_3px_20px_#0000000b]"},{default:o(()=>[n(f(m.quote_title),1)]),_:2},1024),t(e(r).Td,{class:"first:rounded-l-md last:rounded-r-md bg-white border-b-0 dark:bg-darkmode-600 shadow-[20px_3px_20px_#0000000b]"},{default:o(()=>[n(f(m.quote_status),1)]),_:2},1024),t(e(r).Td,{class:"first:rounded-l-md last:rounded-r-md bg-white border-b-0 dark:bg-darkmode-600 shadow-[20px_3px_20px_#0000000b]"},{default:o(()=>[n(f(m.inputter),1)]),_:2},1024),t(e(r).Td,{class:"first:rounded-l-md last:rounded-r-md w-56 bg-white border-b-0 dark:bg-darkmode-600 shadow-[20px_3px_20px_#0000000b] py-0 relative before:block before:w-px before:h-8 before:bg-slate-200 before:absolute before:left-0 before:inset-y-0 before:my-auto before:dark:bg-darkmode-400"},{default:o(()=>[l("div",ce,[l("a",{class:"flex items-center mr-3",href:"",onClick:H=>{H.preventDefault(),z(m.quote_code)}},[t(e(q),{icon:"CheckSquare",class:"w-4 h-4 mr-1"}),n(" Review ")],8,_e)])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])):(y(),T("div",me,pe)),t(e(_),{open:$.value,onClose:a[2]||(a[2]=()=>{g(!1)}),initialFocus:R.value},{default:o(()=>[t(e(_).Panel,null,{default:o(()=>[l("div",ve,[t(e(q),{icon:"CheckCircle",class:"w-16 h-16 mx-auto mt-3 text-success"}),he,l("div",be," Authorize quotation "+f(s.quote_code),1)]),l("div",we,[t(e(h),{type:"button",variant:"outline-secondary",onClick:a[0]||(a[0]=()=>{g(!1)}),class:"w-24 mr-1"},{default:o(()=>[n(" Cancel ")]),_:1}),t(e(h),{type:"button",variant:"primary",class:"w-24",ref:"{deleteButtonRef}",onClick:a[1]||(a[1]=()=>{Q()})},{default:o(()=>[n(" Ok ")]),_:1},512)])]),_:1})]),_:1},8,["open","initialFocus"]),t(e(_),{open:B.value,onClose:a[5]||(a[5]=()=>{k(!1)}),initialFocus:F.value},{default:o(()=>[t(e(_).Panel,null,{default:o(()=>[l("div",ge,[t(e(q),{icon:"XCircle",class:"w-16 h-16 mx-auto mt-3 text-danger"}),xe,l("div",ye," Reject quotation "+f(s.quote_code),1)]),l("div",qe,[t(e(h),{type:"button",variant:"outline-secondary",onClick:a[3]||(a[3]=()=>{k(!1)}),class:"w-24 mr-1"},{default:o(()=>[n(" Cancel ")]),_:1}),t(e(h),{type:"button",variant:"danger",class:"w-24",ref:"{deleteButtonRef}",onClick:a[4]||(a[4]=()=>{W()})},{default:o(()=>[n(" Ok ")]),_:1},512)])]),_:1})]),_:1},8,["open","initialFocus"]),t(e(_),{staticBackdrop:"",open:A.value,onClose:a[10]||(a[10]=()=>{b(!1)})},{default:o(()=>[t(e(_).Panel,{class:"px-5 py-10"},{default:o(()=>[l("div",ke,[t(e(M),{class:"mt-5 intro-y box"},{default:o(()=>[l("div",Ce,[t(e(M).Panel,null,{default:o(()=>[t(e(_),{staticBackdrop:"",open:A.value,onClose:a[9]||(a[9]=()=>{b(!1)})},{default:o(()=>[t(e(_).Panel,null,{default:o(()=>[t(e(_).Title,null,{default:o(()=>[l("h2",Te," Project Information "+f(s.quote_code?" : "+s.quote_code:""),1)]),_:1}),t(e(_).Description,{class:"grid grid-cols-12 gap-4 gap-y-3"},{default:o(()=>[l("div",Ie,[t(e(p),{htmlFor:"modal-form-1"},{default:o(()=>[n("Title")]),_:1}),t(e(v),{value:s.quote_title,type:"text",disabled:!0},null,8,["value"])]),l("div",Fe,[t(e(p),{htmlFor:"modal-form-1"},{default:o(()=>[n("Client")]),_:1}),t(e(v),{value:s.client_name,type:"text",disabled:!0},null,8,["value"])]),l("div",Ae,[t(e(p),{htmlFor:"modal-form-4"},{default:o(()=>[n("Date")]),_:1}),t(e(v),{value:s.tranDate,type:"text",disabled:!0},null,8,["value"])]),l("div",Se,[t(e(p),{htmlFor:"modal-form-4"},{default:o(()=>[n("House number ")]),_:1}),t(e(v),{value:s.house_number,type:"text",disabled:!0},null,8,["value"])]),l("div",Be,[t(e(p),{htmlFor:"modal-form-6"},{default:o(()=>[n("Address")]),_:1}),t(e(v),{value:s.address,type:"text",disabled:!0},null,8,["value"])]),l("div",$e,[t(e(p),{htmlFor:"modal-form-4"},{default:o(()=>[n(" Link Google Map ")]),_:1}),t(e(v),{value:s.google_map,type:"text",disabled:!0},null,8,["value"])]),l("div",Pe,[t(e(p),{htmlFor:"modal-form-1"},{default:o(()=>[n("Status")]),_:1}),t(e(v),{value:s.quote_status,type:"text",disabled:!0},null,8,["value"])]),l("div",De,[t(e(p),{htmlFor:"modal-form-1"},{default:o(()=>[n("Lead by")]),_:1}),t(e(v),{value:s.quote_leader,type:"text",disabled:!0},null,8,["value"])]),l("div",Ve,[t(e(p),{htmlFor:"remark"},{default:o(()=>[n(" Remark ")]),_:1}),t(e(te),{value:s.remark,disabled:!0},null,8,["value"])])]),_:1}),t(e(_).Footer,null,{default:o(()=>[t(e(h),{type:"button",variant:"outline-secondary",onClick:a[6]||(a[6]=()=>{b(!1)}),class:"w-20 mr-1"},{default:o(()=>[n(" Cancel ")]),_:1}),t(e(h),{class:"w-20 mr-1",variant:"outline-danger",type:"button",ref:"{sendButtonRef}",onClick:a[7]||(a[7]=m=>O())},{default:o(()=>[n(" Reject ")]),_:1},512),t(e(h),{variant:"primary",type:"button",class:"w-20",ref:"{sendButtonRef}",onClick:a[8]||(a[8]=m=>E())},{default:o(()=>[n(" Authorize ")]),_:1},512)]),_:1})]),_:1})]),_:1},8,["open"])]),_:1})])]),_:1})])]),_:1})]),_:1},8,["open"]),t(e(j),{id:"success-notification-content",class:"flex hidden"},{default:o(()=>[t(e(q),{icon:"CheckCircle",class:"text-success"}),Me]),_:1}),t(e(j),{id:"failed-notification-content",class:"flex hidden"},{default:o(()=>[t(e(q),{icon:"XCircle",class:"text-danger"}),je]),_:1})]))}});export{Re as default};
