import{d as he,a as w,u as C,b as ye,r as y,p as we,c as be,e as oe,f as S,H as R,o as ke,g as Ce,h as u,i as f,j as c,F as L,s as B,x as xe,k as t,m as e,q as _,v as x,A as Ie,n as I,w as l,I as v,l as i,_ as M,J as Ve,t as z,K as b,D as V,y as q,z as k,L as A,M as Se,C as Pe,N as Fe,E as j,G as H,O as K}from"./index.62cb36ac.js";import{_ as le}from"./FileIcon.vue_vue_type_script_setup_true_lang.9c6a0f59.js";const O="http://garage_api.test/api/",Le=he({id:"ProductStore",state:()=>({ItemDetail:[],ItemEdit:[],Categories:[],Pro_line:[],Pro_Color:[],Pro_Year:[],File:[],ProductImage:[]}),getters:{getItemsDetail(s){return s.ItemDetail},getItemsById(s){return s.ItemEdit},getCategories(s){return s.Categories},getLine(s){return s.Pro_line},getColor(s){return s.Pro_Color},getYear(s){return s.Pro_Year},getProduct_image(s){return s.ProductImage}},actions:{async product_image(s){await w.get(`v1/pos/product_image/${s}`).then(async r=>(this.ProductImage=r.data.data,this.ProductImage)).catch(r=>{if(r.response&&r.response.data){const p=r.response.data;C().setErrors(p.errors)}})},async ComboCatogories(){await w.get("v1/pos/combo/pos_cateogries").then(s=>{this.Categories=s.data.data}).catch(s=>{if(s.response&&s.response.data){const r=s.response.data;C().setErrors(r.errors)}})},async ComboColor(){await w.get("v1/pos/combo/pos_pro_color").then(s=>{this.Pro_Color=s.data.data}).catch(s=>{if(s.response&&s.response.data){const r=s.response.data;C().setErrors(r.errors)}})},async ComboYear(){await w.get("v1/pos/combo/pos_pro_year").then(s=>{this.Pro_Year=s.data.data}).catch(s=>{if(s.response&&s.response.data){const r=s.response.data;C().setErrors(r.errors)}})},async ComboLine(){await w.get("v1/pos/combo/pos_pro_line").then(s=>{this.Pro_line=s.data.data}).catch(s=>{if(s.response&&s.response.data){const r=s.response.data;C().setErrors(r.errors)}})},async ItemsById(s){await w.get(`v1/pos/Product_byId/${s}`).then(r=>{if(r.data.success)return this.ItemEdit=r.data.data,this.ItemEdit})},async ItemsByCategory(s){await w.get(`v1/pos/pro_by_category/${s}`).then(r=>{if(r.data.success)return this.ItemDetail=r.data.data,this.ItemDetail})},async ItemsList(){await w.get("v1/pos/getProduct").then(s=>{s.data.success&&(this.ItemDetail=s.data.data)}).catch(s=>{if(s.response&&s.response.data){const r=s.response.data;C().setErrors(r.errors)}})},async create_product(s){return await w.post(O+"v1/pos/create_product",s).then(async r=>{if(r.data.success)return r.data.success}).catch(r=>{if(r.response&&r.response.data){const p=r.response.data;C().setErrors(p.errors)}})},async delete_image(s){return await w.post(O+"v1/pos/del_product_image",s).then(async r=>{if(r.data.success)return this.product_image(s.pro_code),r.data.success}).catch(r=>{if(r.response&&r.response.data){const p=r.response.data;C().setErrors(p.errors)}})},async upload_image(s,r){let p=new FormData;return p.append("referent_id",r),p.append("name",s.name),p.append("image",s),p.append("description",r),await w.post(O+"v1/pos/product_upload_image",p).then(async h=>{if(h.data.success)return this.product_image(r),h.data.success}).catch(h=>{if(h.response&&h.response.data){const P=h.response.data;C().setErrors(P.errors)}})}}}),Be={class:"grid grid-cols-12 gap-6 mt-8"},De={class:"col-span-12 lg:col-span-3 2xl:col-span-2"},$e=c("h2",{class:"mt-2 mr-auto text-lg font-medium intro-y"},"Product list",-1),Ue={class:"p-5 mt-6 intro-y box"},Ee={class:"mt-1"},Me=["onClick"],qe={key:0},Ne={key:1},Te=Fe('<div class="pt-4 mt-4 border-t border-slate-200 dark:border-darkmode-400"><a href="" class="flex items-center px-3 py-2 rounded-md"><div class="w-2 h-2 mr-3 rounded-full bg-pending"></div> Custom Work </a><a href="" class="flex items-center px-3 py-2 mt-2 rounded-md"><div class="w-2 h-2 mr-3 rounded-full bg-success"></div> Important Meetings </a></div>',1),Ye={class:"col-span-12 lg:col-span-9 2xl:col-span-10"},Re={class:"flex flex-col-reverse items-center intro-y sm:flex-row"},ze={class:"relative w-full mt-3 mr-auto sm:w-auto sm:mt-0"},Ae={class:"flex w-full sm:w-auto"},je={class:"flex items-center justify-center w-5 h-5"},He={class:"grid grid-cols-12 gap-3 mt-5 intro-y sm:gap-6"},Ke={class:"relative px-3 pt-8 pb-5 rounded-md file box sm:px-5 zoom-in"},Xe={class:"absolute top-0 left-0 mt-3 ml-3"},Ge={href:"#",class:"block mt-4 font-medium text-center truncate"},Je={class:"text-slate-500 text-xs text-center mt-0.5"},Oe={class:"flex flex-wrap items-center mt-6 intro-y sm:flex-row sm:flex-nowrap"},We=c("h2",{class:"mr-auto text-base font-medium"},"Product Information",-1),Qe={class:"col-span-12 sm:col-span-6"},Ze={class:"col-span-12 sm:col-span-6"},et={class:"col-span-12 sm:col-span-6"},tt={class:"col-span-12 sm:col-span-6"},at={class:"col-span-12 sm:col-span-6"},st={class:"col-span-12 sm:col-span-6"},ot={class:"col-span-12 sm:col-span-6"},lt=["value"],rt={class:"col-span-12 sm:col-span-6"},nt=["value"],ct={class:"col-span-12 sm:col-span-6"},it=["value"],dt={class:"col-span-12 sm:col-span-6"},ut=["value"],mt={class:"col-span-12 sm:col-span-6"},pt=c("h2",{class:"mr-auto text-base font-medium"},"Refresh image",-1),_t={class:"col-span-12 intro-y lg:col-span-10"},ft={class:"grid grid-cols-12 gap-1 pt-5 mt-5"},vt={class:"relative p-3 rounded-md box zoom-in"},gt={class:"flex-none relative block before:block before:w-full before:pt-[100%]"},ht={class:"absolute top-0 left-0 w-full h-full image-fit"},yt=["src"],wt={class:"block mt-3 font-medium text-center truncate"},bt={class:"ml-4 mr-4"},kt={class:"font-medium"},It=ye({__name:"Registe_Product",setup(s){const r=y(),p=()=>{var d;(d=r.value)==null||d.showToast()};we("bind[basicStickyNotification]",d=>{r.value=d});const h=y(!1),P=d=>{h.value=d},N=y([]),W=y(!1),Q=d=>{W.value=d},re=y(null),Z=be(),m=Le(),o=oe({}),X=oe({}),D=y("0"),$=y("0"),U=y("0"),E=y("0"),T=y(""),G=y(""),ee=y("0"),te=S(()=>m.getCategories),ne=S(()=>m.getLine),ce=S(()=>m.getColor),ie=S(()=>m.getYear),g=S(()=>m.getItemsById),de=S(()=>m.getItemsDetail),ue=S(()=>m.getProduct_image);R(D,()=>{o.category_code=D.value}),R($,()=>{o.line_code=$.value}),R(U,()=>{o.color_code=U.value}),R(E,()=>{o.year_code=E.value}),ke(async()=>{J(),await m.ItemsList(),await m.ComboCatogories(),await m.ComboLine(),await m.ComboYear(),await m.ComboColor()});function J(){o.branch_code="",o.pro_code="",o.pro_name="",o.barcode="",o.category_code="",o.line_code="",o.color_code="",o.year_code="",o.cost=0,o.unitprice=0,o.discount=0,o.qty_alert=0,o.remark="",o.active=!0,o.tracking=!0,o.status="i",D.value="",U.value="",$.value="",E.value=""}const me=S(()=>({pro_name:{required:j.withMessage("Product name is required",H),minLength:K(3)},barcode:{required:j.withMessage("Barcode is required",H),minLength:K(3)},category_code:{required:j.withMessage("Cateogry is required",H),minLength:K(2)},line_code:{required:j.withMessage("Product line is required",H),minLength:K(2)}})),Y=Ce(me,o,{$autoDirty:!0});async function pe(){if(Y.value.$touch(),Y.value.$invalid)T.value=Y.value.$errors[0].$message,G.value="error",p();else{var d=await m.create_product(o);d&&(G.value="",o.status=="i"?T.value=Z.getInsert:T.value=Z.getUpdate,p(),P(!1),J(),await m.ItemsList())}}async function ae(d){J(),await m.ItemsById(d),o.status="u",o.pro_code=g.value[0].pro_code,o.pro_name=g.value[0].pro_name,o.barcode=g.value[0].barcode,o.cost=g.value[0].cost,o.unitprice=g.value[0].unitprice,o.discount=g.value[0].discount,o.discount=g.value[0].discount,o.qty_alert=g.value[0].qty_alert,D.value=g.value[0].category_code,$.value=g.value[0].line_code,U.value=g.value[0].color_code,E.value=g.value[0].year_code,o.active=o.active=!!g.value[0].active,o.tracking=o.tracking=!!g.value[0].tracking,P(!0)}async function _e(d){ee.value=d,d=="0"?await m.ItemsList():await m.ItemsByCategory(d)}async function fe(d){o.pro_code=d,await m.product_image(d)}const ve=()=>N.value=[],se=d=>{const n=d.target;n.files!==null&&(ve(),Array.from(n.files).forEach(a=>{N.value.push({referent_id:o.pro_code,file:a,percentage:0,status:"pending"})}),N.value.forEach(a=>{a.status="uploading",a.percentage=0,m.upload_image(a.file,o.pro_code)}))};async function ge(d){X.pro_code=o.pro_code,X.row=d,await m.delete_image(X)}return(d,n)=>(u(),f("div",Be,[c("div",De,[$e,c("div",Ue,[c("div",Ee,[(u(!0),f(L,null,B(te.value,a=>(u(),f("a",{href:"#",onClick:F=>_e(a.id),class:xe(["flex items-center px-3 py-2 mt-2 rounded-md ",{"text-white bg-primary":ee.value==a.id}]),key:a.id},[t(e(_),{icon:"Image",class:"w-4 h-4 mr-2"}),a.id=="0"?(u(),f("p",qe,"All")):a.id!="0"?(u(),f("p",Ne,x(a.name),1)):Ie("",!0)],10,Me))),128))]),Te])]),c("div",Ye,[c("div",Re,[c("div",ze,[t(e(_),{icon:"Search",class:"absolute inset-y-0 left-0 z-10 w-4 h-4 my-auto ml-3 text-slate-500"}),t(e(I),{type:"text",class:"w-full px-10 sm:w-64 !box",placeholder:"Search files"}),t(e(v),{class:"absolute inset-y-0 right-0 flex items-center mr-3"},{default:l(()=>[t(e(v).Button,{as:"a",role:"button",class:"block w-4 h-4",href:"#"},{default:l(()=>[t(e(_),{icon:"ChevronDown",class:"w-4 h-4 cursor-pointer text-slate-500"})]),_:1})]),_:1})]),c("div",Ae,[t(e(M),{variant:"primary",class:"mr-2 shadow-md",onClick:n[0]||(n[0]=()=>{P(!0)})},{default:l(()=>[i(" New Product ")]),_:1}),t(e(v),null,{default:l(()=>[t(e(v).Button,{as:e(M),class:"px-2 !box"},{default:l(()=>[c("span",je,[t(e(_),{icon:"Plus",class:"w-4 h-4"})])]),_:1},8,["as"]),t(e(v).Items,{class:"w-40"},{default:l(()=>[t(e(v).Item,null,{default:l(()=>[t(e(_),{icon:"File",class:"w-4 h-4 mr-2"}),i(" Share Files ")]),_:1}),t(e(v).Item,null,{default:l(()=>[t(e(_),{icon:"Settings",class:"w-4 h-4 mr-2"}),i(" Settings ")]),_:1})]),_:1})]),_:1})])]),c("div",He,[(u(!0),f(L,null,B(de.value,a=>(u(),f("div",{key:a.pro_code,class:"col-span-6 intro-y sm:col-span-4 md:col-span-3 2xl:col-span-2"},[c("div",Ke,[c("div",Xe,[t(e(Ve).Input,{class:"border",type:"checkbox",checked:a.active},null,8,["checked"])]),a.url?(u(),z(e(le),{key:0,class:"w-3/5 mx-auto",variant:"image",src:a.url,onClick:F=>{F.preventDefault(),ae(a.pro_code)}},null,8,["src","onClick"])):(u(),z(e(le),{key:1,class:"w-3/5 mx-auto",variant:"directory",src:a.url,onClick:F=>{F.preventDefault(),ae(a.pro_code)}},null,8,["src","onClick"])),c("a",Ge,x(a.pro_name),1),c("div",Je,x(a.unitprice),1),t(e(v),{class:"absolute top-0 right-0 mt-3 ml-auto mr-2"},{default:l(()=>[t(e(v).Button,{as:"a",class:"block w-5 h-5",href:"#"},{default:l(()=>[t(e(_),{icon:"MoreVertical",class:"w-5 h-5 text-slate-500"})]),_:1}),t(e(v).Items,{class:"w-40"},{default:l(()=>[t(e(v).Item,null,{default:l(()=>[t(e(_),{icon:"Users",class:"w-4 h-4 mr-2"}),i(" Share File ")]),_:1}),t(e(v).Item,{onClick:F=>{F.preventDefault(),fe(a.pro_code),Q(!0)}},{default:l(()=>[t(e(_),{icon:"Trash",class:"w-4 h-4 mr-2"}),i(" Upload image ")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)])]))),128))]),c("div",Oe,[t(e(b),{class:"w-full sm:w-auto sm:mr-auto"},{default:l(()=>[t(e(b).Link,null,{default:l(()=>[t(e(_),{icon:"ChevronsLeft",class:"w-4 h-4"})]),_:1}),t(e(b).Link,null,{default:l(()=>[t(e(_),{icon:"ChevronLeft",class:"w-4 h-4"})]),_:1}),t(e(b).Link,null,{default:l(()=>[i("...")]),_:1}),t(e(b).Link,null,{default:l(()=>[i("1")]),_:1}),t(e(b).Link,{active:""},{default:l(()=>[i("2")]),_:1}),t(e(b).Link,null,{default:l(()=>[i("3")]),_:1}),t(e(b).Link,null,{default:l(()=>[i("...")]),_:1}),t(e(b).Link,null,{default:l(()=>[t(e(_),{icon:"ChevronRight",class:"w-4 h-4"})]),_:1}),t(e(b).Link,null,{default:l(()=>[t(e(_),{icon:"ChevronsRight",class:"w-4 h-4"})]),_:1})]),_:1})])]),t(e(V),{staticBackdrop:"",open:h.value,onClose:n[15]||(n[15]=()=>{P(!1)})},{default:l(()=>[t(e(V).Panel,null,{default:l(()=>[t(e(V).Title,null,{default:l(()=>[We,t(e(q),{class:"mt-2"},{default:l(()=>[t(e(q).Input,{checked:o.active,modelValue:o.active,"onUpdate:modelValue":n[1]||(n[1]=a=>o.active=a),type:"checkbox"},null,8,["checked","modelValue"])]),_:1})]),_:1}),t(e(V).Description,{class:"grid grid-cols-12 gap-4 gap-y-3"},{default:l(()=>[c("div",Qe,[t(e(k),{htmlFor:"modal-form-1"},{default:l(()=>[i("Name")]),_:1}),t(e(I),{modelValue:o.pro_name,"onUpdate:modelValue":n[2]||(n[2]=a=>o.pro_name=a),type:"text",placeholder:"Product name"},null,8,["modelValue"])]),c("div",Ze,[t(e(k),{htmlFor:"modal-form-2"},{default:l(()=>[i("Barcode")]),_:1}),t(e(I),{modelValue:o.barcode,"onUpdate:modelValue":n[3]||(n[3]=a=>o.barcode=a),type:"text",placeholder:"Barcode"},null,8,["modelValue"])]),c("div",et,[t(e(k),{htmlFor:"modal-form-3"},{default:l(()=>[i("Cost ")]),_:1}),t(e(I),{modelValue:o.cost,"onUpdate:modelValue":n[4]||(n[4]=a=>o.cost=a),type:"text",placeholder:"Cost"},null,8,["modelValue"])]),c("div",tt,[t(e(k),{htmlFor:"modal-form-4"},{default:l(()=>[i(" Unit Price ")]),_:1}),t(e(I),{modelValue:o.unitprice,"onUpdate:modelValue":n[5]||(n[5]=a=>o.unitprice=a),type:"text",placeholder:"Unit price"},null,8,["modelValue"])]),c("div",at,[t(e(k),{htmlFor:"modal-form-5"},{default:l(()=>[i(" Discount ")]),_:1}),t(e(I),{modelValue:o.discount,"onUpdate:modelValue":n[6]||(n[6]=a=>o.discount=a),type:"text",placeholder:"Discount"},null,8,["modelValue"])]),c("div",st,[t(e(k),{htmlFor:"modal-form-6"},{default:l(()=>[i("Alert")]),_:1}),t(e(I),{modelValue:o.qty_alert,"onUpdate:modelValue":n[7]||(n[7]=a=>o.qty_alert=a),type:"text",placeholder:"Stock alert"},null,8,["modelValue"])]),c("div",ot,[t(e(k),{htmlFor:"modal-form-6"},{default:l(()=>[i("Category")]),_:1}),t(e(A),{id:"crud-form-2",modelValue:D.value,"onUpdate:modelValue":n[8]||(n[8]=a=>D.value=a),class:"w-full"},{default:l(()=>[(u(!0),f(L,null,B(te.value,a=>(u(),f("option",{value:a.id,key:a.id},x(a.name),9,lt))),128))]),_:1},8,["modelValue"])]),c("div",rt,[t(e(k),{htmlFor:"modal-form-6"},{default:l(()=>[i("Line")]),_:1}),t(e(A),{modelValue:$.value,"onUpdate:modelValue":n[9]||(n[9]=a=>$.value=a),class:"w-full"},{default:l(()=>[(u(!0),f(L,null,B(ne.value,a=>(u(),f("option",{value:a.id,key:a.id},x(a.name),9,nt))),128))]),_:1},8,["modelValue"])]),c("div",ct,[t(e(k),{htmlFor:"modal-form-7"},{default:l(()=>[i("Color")]),_:1}),t(e(A),{modelValue:U.value,"onUpdate:modelValue":n[10]||(n[10]=a=>U.value=a),class:"w-full"},{default:l(()=>[(u(!0),f(L,null,B(ce.value,a=>(u(),f("option",{value:a.id,key:a.id},x(a.name),9,it))),128))]),_:1},8,["modelValue"])]),c("div",dt,[t(e(k),{htmlFor:"modal-form-6"},{default:l(()=>[i("Years")]),_:1}),t(e(A),{id:"crud-form-2",modelValue:E.value,"onUpdate:modelValue":n[11]||(n[11]=a=>E.value=a),class:"w-full"},{default:l(()=>[(u(!0),f(L,null,B(ie.value,a=>(u(),f("option",{value:a.id,key:a.id},x(a.name),9,ut))),128))]),_:1},8,["modelValue"])]),c("div",mt,[t(e(q),{class:"flex flex-col items-start mt-3"},{default:l(()=>[t(e(q).Label,{htmlFor:"post-form-5",class:"mb-2 ml-0"},{default:l(()=>[i(" Stock tracking ")]),_:1}),t(e(q).Input,{checked:o.tracking,modelValue:o.tracking,"onUpdate:modelValue":n[12]||(n[12]=a=>o.tracking=a),id:"post-form-5",type:"checkbox"},null,8,["checked","modelValue"])]),_:1})])]),_:1}),t(e(V).Footer,null,{default:l(()=>[t(e(M),{type:"button",variant:"outline-secondary",onClick:n[13]||(n[13]=()=>{P(!1)}),class:"w-20 mr-1"},{default:l(()=>[i(" Cancel ")]),_:1}),t(e(M),{variant:"primary",type:"button",class:"w-20",ref:"{sendButtonRef}",disable:e(Y).$invalid,onClick:n[14]||(n[14]=a=>pe())},{default:l(()=>[i(" Commit ")]),_:1},8,["disable"])]),_:1})]),_:1})]),_:1},8,["open"]),t(e(V),{open:W.value,onClose:n[16]||(n[16]=()=>{Q(!1)}),initialFocus:re.value},{default:l(()=>[t(e(V).Panel,null,{default:l(()=>[t(e(V).Title,null,{default:l(()=>[pt,t(e(M),{variant:"outline-secondary",class:"hidden sm:flex"},{default:l(()=>[t(e(_),{icon:"File",class:"w-4 h-4 mr-2"}),i(" Upload Images "),t(e(I),{type:"file",class:"absolute top-0 left-0 w-full h-full opacity-0",accept:"image/png, image/jpeg",onChange:se})]),_:1}),t(e(v),{class:"sm:hidden"},{default:l(()=>[t(e(v).Button,{class:"block w-5 h-5",href:"#"},{default:l(()=>[t(e(_),{icon:"MoreHorizontal",class:"w-5 h-5 text-slate-500"})]),_:1}),t(e(v).Items,{class:"w-40"},{default:l(()=>[t(e(v).Item,null,{default:l(()=>[t(e(_),{icon:"File",class:"w-4 h-4 mr-2"}),i(" Download Image "),t(e(I),{type:"file",class:"absolute top-0 left-0 w-full h-full opacity-0",accept:"image/png, image/jpeg",onChange:se})]),_:1})]),_:1})]),_:1})]),_:1}),t(e(V).Description,{class:"grid grid-cols-5 gap-5 gap-y-3"},{default:l(()=>[c("div",_t,[c("div",ft,[(u(!0),f(L,null,B(ue.value,a=>(u(),f("a",{key:a.row,href:"#",class:"block col-span-12 intro-y sm:col-span-4 2xl:col-span-3"},[c("div",vt,[c("div",gt,[c("div",ht,[c("img",{alt:"Midone Tailwind HTML Admin Template",class:"rounded-md",src:a.url},null,8,yt),t(e(Se),{as:"div",content:"Remove this image ?",class:"absolute top-0 right-0 flex items-center justify-center w-5 h-5 -mt-2 -mr-2 text-white rounded-full bg-danger",onClick:F=>ge(a.row)},{default:l(()=>[t(e(_),{icon:"X",class:"w-4 h-4"})]),_:2},1032,["onClick"])])]),c("div",wt,x(a.pro_name),1)])]))),128))])])]),_:1})]),_:1})]),_:1},8,["open","initialFocus"]),t(e(Pe),{refKey:"basicStickyNotification",options:{duration:1500},class:"flex hidden"},{default:l(()=>[G.value=="error"?(u(),z(e(_),{key:0,icon:"XCircle",class:"text-danger"})):(u(),z(e(_),{key:1,icon:"CheckCircle",class:"text-success"})),c("div",bt,[c("div",kt,x(T.value),1)])]),_:1})]))}});export{It as default};
