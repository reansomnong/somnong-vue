import{d as X,a as k,u as $,b as J,e as K,r as S,H as Q,f as C,g as Y,o as Z,h,i as w,j as d,k as t,w as a,l as i,m as e,_ as I,I as g,q as m,n as P,T as c,F as L,s as V,t as ee,v as p,x as B,D as v,P as D,y as q,z as E,A as te,L as ae,B as se,C as N,S as A,E as M,G as U,O as R}from"./index.62cb36ac.js";const oe="http://garage_api.test/api/",re=X({id:"CategoriesStore",state:()=>({ItemDetail:[],ItemEdit:[],Line:[]}),getters:{getItemsDetail(n){return n.ItemDetail},getItemsById(n){return n.ItemEdit},getLine(n){return n.Line}},actions:{async ComboLine(){await k.get("v1/pos/combo/pos_line").then(n=>{this.Line=n.data.data}).catch(n=>{if(n.response&&n.response.data){const l=n.response.data;$().setErrors(l.errors)}})},async ItemsById(n){await k.get(`v1/pos/view_category/${n}`).then(l=>{if(l.data.success)return this.ItemEdit=l.data.data,this.ItemEdit})},async ItemsList(){await k.get("v1/pos/pos_category").then(n=>{n.data.success&&(this.ItemDetail=n.data.data)}).catch(n=>{if(n.response&&n.response.data){const l=n.response.data;$().setErrors(l.errors)}})},async Register(n){return await k.post(oe+"v1/pos/create_category",n).then(async l=>{if(l.data.success)return l.data.success}).catch(l=>{if(l.response&&l.response.data){const s=l.response.data;$().setErrors(s.errors)}})}}}),ne={class:"grid grid-cols-12 gap-6 mt-5"},le={class:"flex flex-wrap items-center col-span-12 mt-2 intro-y sm:flex-nowrap"},de={class:"flex items-center justify-center w-5 h-5"},ie=d("div",{class:"hidden mx-auto md:block text-slate-500"}," Showing 1 to 10 of 150 entries ",-1),ce={class:"w-full mt-3 sm:w-auto sm:mt-0 sm:ml-auto md:ml-0"},ue={class:"relative w-56 text-slate-500"},me={class:"col-span-12 overflow-auto intro-y lg:overflow-visible"},_e={href:"",class:"font-medium whitespace-nowrap"},pe={class:"text-slate-500 text-xs whitespace-nowrap mt-0.5"},fe={class:"flex items-center justify-center"},he=["onClick"],ve={class:"text-center"},be={class:"p-5"},we=d("h2",{class:"mr-auto text-base font-medium"}," Register Items ",-1),ge={class:"col-span-12 sm:col-span-6"},xe={class:"col-span-12 sm:col-span-6"},ye=["value"],ke={class:"col-span-12 sm:col-span-12"},Ce=d("div",{class:"ml-4 mr-4"},[d("div",{class:"font-medium"},"Registration success!")],-1),Ie=d("div",{class:"ml-4 mr-4"},[d("div",{class:"mt-1 text-slate-500"},"Please check the fileld form.")],-1),$e=J({__name:"Category",setup(n){const l=re(),s=K({});S(null);const x=S(!1),b=S("0"),y=_=>{F(),u.value.$reset(),x.value=_},j=_=>{x.value=_};Q(b,()=>{s.parent_id=b.value});function F(){s.active=!0,s.branch_code="",s.lin_code="",s.lin_name="",s.remark="",s.status="i"}async function O(){if(u.value.$touch(),u.value.$invalid){const r=document.querySelectorAll("#failed-notification-content")[0].cloneNode(!0);r.classList.remove("hidden"),A({node:r,duration:3e3,newWindow:!0,close:!0,gravity:"top",position:"right",stopOnFocus:!0}).showToast()}else{var _=await l.Register(s);if(_){const r=document.querySelectorAll("#success-notification-content")[0].cloneNode(!0);r.classList.remove("hidden"),A({node:r,duration:3e3,newWindow:!0,close:!0,gravity:"top",position:"right",stopOnFocus:!0}).showToast(),y(!1),await l.ItemsList(),F()}}}const z=C(()=>({lin_name:{required:M.withMessage("Item name is required",U),minLength:R(2)},parent_id:{required:M.withMessage("Line is required",U),minLength:R(2)}})),u=Y(z,s,{$autoDirty:!0});async function W(_){await l.ItemsById(_),s.status="u",s.branch_code=f.value[0].branch_code,s.lin_code=f.value[0].lin_code,s.lin_name=f.value[0].lin_name,s.parent_id=f.value[0].parent_id,s.remark=f.value[0].remark,s.active=s.active=!!f.value[0].active,b.value=f.value[0].parent_id,j(!0)}Z(async()=>{await l.ItemsList(),await l.ComboLine()});const G=C(()=>l.getLine),H=C(()=>l.getItemsDetail),f=C(()=>l.getItemsById);return(_,r)=>(h(),w("div",ne,[d("div",le,[t(e(I),{variant:"primary",class:"mr-2 shadow-md",onClick:r[0]||(r[0]=()=>{y(!0)})},{default:a(()=>[i(" Create New ")]),_:1}),t(e(g),null,{default:a(()=>[t(e(g).Button,{as:e(I),class:"px-2 !box"},{default:a(()=>[d("span",de,[t(e(m),{icon:"Plus",class:"w-4 h-4"})])]),_:1},8,["as"]),t(e(g).Items,{class:"w-40"},{default:a(()=>[t(e(g).Item,null,{default:a(()=>[t(e(m),{icon:"Printer",class:"w-4 h-4 mr-2"}),i(" Print ")]),_:1}),t(e(g).Item,null,{default:a(()=>[t(e(m),{icon:"FileText",class:"w-4 h-4 mr-2"}),i(" Export to Excel ")]),_:1}),t(e(g).Item,null,{default:a(()=>[t(e(m),{icon:"FileText",class:"w-4 h-4 mr-2"}),i(" Export to PDF ")]),_:1})]),_:1})]),_:1}),ie,d("div",ce,[d("div",ue,[t(e(P),{type:"text",class:"w-56 pr-10 !box",placeholder:"Search..."}),t(e(m),{icon:"Search",class:"absolute inset-y-0 right-0 w-4 h-4 my-auto mr-3"})])])]),d("div",me,[t(e(c),{class:"border-spacing-y-[10px] border-separate -mt-2"},{default:a(()=>[t(e(c).Thead,null,{default:a(()=>[t(e(c).Tr,null,{default:a(()=>[t(e(c).Th,{class:"border-b-0 whitespace-nowrap"},{default:a(()=>[i(" Code ")]),_:1}),t(e(c).Th,{class:"border-b-0 whitespace-nowrap"},{default:a(()=>[i(" Name ")]),_:1}),t(e(c).Th,{class:"border-b-0 whitespace-nowrap"},{default:a(()=>[i(" Type ")]),_:1}),t(e(c).Th,{class:"border-b-0 whitespace-nowrap"},{default:a(()=>[i(" Comments ")]),_:1}),t(e(c).Th,{class:"text-center border-b-0 whitespace-nowrap"},{default:a(()=>[i(" Status ")]),_:1}),t(e(c).Th,{class:"text-center border-b-0 whitespace-nowrap"},{default:a(()=>[i(" Action ")]),_:1})]),_:1})]),_:1}),t(e(c).Tbody,null,{default:a(()=>[(h(!0),w(L,null,V(H.value,o=>(h(),ee(e(c).Tr,{key:o.lin_code,class:"intro-x"},{default:a(()=>[t(e(c).Td,{class:"first:rounded-l-md last:rounded-r-md bg-white border-b-0 dark:bg-darkmode-600 shadow-[20px_3px_20px_#0000000b]"},{default:a(()=>[d("a",_e,p(o.lin_code),1),d("div",pe," Tags: "+p(o.lin_name),1)]),_:2},1024),t(e(c).Td,{class:"first:rounded-l-md last:rounded-r-md bg-white border-b-0 dark:bg-darkmode-600 shadow-[20px_3px_20px_#0000000b]"},{default:a(()=>[i(p(o.lin_name),1)]),_:2},1024),t(e(c).Td,{class:"first:rounded-l-md last:rounded-r-md bg-white border-b-0 dark:bg-darkmode-600 shadow-[20px_3px_20px_#0000000b]"},{default:a(()=>[i(p(o.parent),1)]),_:2},1024),t(e(c).Td,{class:"first:rounded-l-md last:rounded-r-md bg-white border-b-0 dark:bg-darkmode-600 shadow-[20px_3px_20px_#0000000b]"},{default:a(()=>[i(p(o.remark),1)]),_:2},1024),t(e(c).Td,{class:"first:rounded-l-md last:rounded-r-md w-40 bg-white border-b-0 dark:bg-darkmode-600 shadow-[20px_3px_20px_#0000000b]"},{default:a(()=>[d("div",{class:B(["flex items-center justify-center",{"text-success":o.active},{"text-danger":!o.active}])},[t(e(m),{icon:"CheckSquare",class:"w-4 h-4 mr-2"}),i(" "+p(o.active?"Active":"Inactive"),1)],2)]),_:2},1024),t(e(c).Td,{class:"first:rounded-l-md last:rounded-r-md w-56 bg-white border-b-0 dark:bg-darkmode-600 shadow-[20px_3px_20px_#0000000b] py-0 relative before:block before:w-px before:h-8 before:bg-slate-200 before:absolute before:left-0 before:inset-y-0 before:my-auto before:dark:bg-darkmode-400"},{default:a(()=>[d("div",fe,[d("a",{class:"flex items-center mr-3",href:"",onClick:T=>{T.preventDefault(),W(o.lin_code)}},[t(e(m),{icon:"CheckSquare",class:"w-4 h-4 mr-1"}),i(" Edit ")],8,he)])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),t(e(v),{staticBackdrop:"",open:x.value,onClose:r[8]||(r[8]=()=>{y(!1)})},{default:a(()=>[t(e(v).Panel,{class:"px-5 py-10"},{default:a(()=>[d("div",ve,[t(e(D),{class:"mt-5 intro-y box"},{default:a(()=>[d("div",be,[t(e(D).Panel,null,{default:a(()=>[t(e(v),{staticBackdrop:"",open:x.value,onClose:r[7]||(r[7]=()=>{y(!1)})},{default:a(()=>[t(e(v).Panel,null,{default:a(()=>[t(e(v).Title,null,{default:a(()=>[we,t(e(q),{class:"mt-2"},{default:a(()=>[t(e(q).Input,{name:"active",id:"checkbox-1",modelValue:s.active,"onUpdate:modelValue":r[1]||(r[1]=o=>s.active=o),type:"checkbox"},null,8,["modelValue"])]),_:1})]),_:1}),t(e(v).Description,{class:"grid grid-cols-12 gap-4 gap-y-3"},{default:a(()=>[d("div",ge,[t(e(E),{htmlFor:"modal-form-1"},{default:a(()=>[i("Name")]),_:1}),t(e(P),{id:"name",name:"name",type:"text",placeholder:"category name",modelValue:s.lin_name,"onUpdate:modelValue":r[2]||(r[2]=o=>s.lin_name=o),error:e(u).lin_name.$error,class:B({"border-danger":e(u).lin_name.$error})},null,8,["modelValue","error","class"]),e(u).lin_name.$errors?(h(!0),w(L,{key:0},V(e(u).lin_name.$errors,(o,T)=>(h(),w("div",{key:T,class:"mt-2 text-danger"},p(o.$message),1))),128)):te("",!0)]),d("div",xe,[t(e(E),{htmlFor:"modal-form-1"},{default:a(()=>[i("Type")]),_:1}),t(e(ae),{name:"cboLine",modelValue:b.value,"onUpdate:modelValue":r[3]||(r[3]=o=>b.value=o),value:b.value,error:e(u).parent_id.$error,class:B({"border-danger":e(u).parent_id.$error})},{default:a(()=>[(h(!0),w(L,null,V(G.value,o=>(h(),w("option",{value:o.id,key:o.id},p(o.name),9,ye))),128))]),_:1},8,["modelValue","value","error","class"])]),d("div",ke,[t(e(E),{htmlFor:"modal-form-5"},{default:a(()=>[i(" Comment ")]),_:1}),t(e(se),{id:"validation-form-6",name:"remark",modelValue:s.remark,"onUpdate:modelValue":r[4]||(r[4]=o=>s.remark=o),placeholder:"Type your comments"},null,8,["modelValue"])])]),_:1}),t(e(v).Footer,null,{default:a(()=>[t(e(I),{type:"button",variant:"outline-secondary",onClick:r[5]||(r[5]=()=>{y(!1)}),class:"w-20 mr-1"},{default:a(()=>[i(" Cancel ")]),_:1}),t(e(I),{name:"btnOk",variant:"primary",type:"button",class:"w-20",ref:"{sendButtonRef}",disable:e(u).$invalid,onClick:r[6]||(r[6]=o=>O())},{default:a(()=>[i(" Commit ")]),_:1},8,["disable"])]),_:1})]),_:1})]),_:1},8,["open"])]),_:1})])]),_:1})])]),_:1})]),_:1},8,["open"]),t(e(N),{id:"success-notification-content",class:"flex hidden"},{default:a(()=>[t(e(m),{icon:"CheckCircle",class:"text-success"}),Ce]),_:1}),t(e(N),{id:"failed-notification-content",class:"flex hidden"},{default:a(()=>[t(e(m),{icon:"XCircle",class:"text-danger"}),Ie]),_:1})]))}});export{$e as default};
