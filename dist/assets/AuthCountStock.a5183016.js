import{d as K,a as g,u as j,b as Y,r as m,e as Z,o as ee,f as T,g as te,h as v,i as y,k as t,w as s,m as e,T as l,l as r,F as M,s as N,t as q,j as n,v as f,q as b,D as _,P as z,z as E,n as R,_ as h,C as $,S,N as se,E as ae,G as oe,O as ne}from"./index.62cb36ac.js";const L="http://garage_api.test/api/",le=K({id:"AuthCountStock",state:()=>({Items:[],ItemDetail:[],ItemView:[]}),getters:{getItems(c){return c.Items},getItemView(c){return c.ItemView},getItemsDetail(c){return c.ItemDetail}},actions:{async una_count_stock(){await g.get("v1/pos/una_count_stock").then(c=>{if(c.data.success)return this.Items=c.data.data,this.Items})},async view_una_count_stock(c){await g.get(`v1/pos/una_count_stock/${c}`).then(a=>{if(a.data.success)return this.ItemView=a.data.data,this.ItemView})},async view_una_count_stock_details(c){await g.get(`v1/pos/una_count_stock_details/${c}`).then(a=>{if(a.data.success)return this.ItemDetail=a.data.data,this.ItemDetail})},async auth_count_stock(c){return await g.post(L+"v1/pos/auth_count_stock",c).then(async a=>{if(a.data.success)return a.data.success}).catch(a=>{if(a.response&&a.response.data){const i=a.response.data;j().setErrors(i.errors)}})},async reject_count_stock(c){return console.log(c),await g.post(L+"v1/pos/reject_count_stock",c).then(async a=>{if(a.data.success)return a.data.success}).catch(a=>{if(a.response&&a.response.data){const i=a.response.data;j().setErrors(i.errors)}})}}}),re={class:"grid grid-cols-12 gap-6 mt-5"},ce={key:0,class:"col-span-12 overflow-auto intro-y lg:overflow-visible"},de={href:"",class:"font-medium whitespace-nowrap"},ie={class:"text-slate-500 text-xs whitespace-nowrap mt-0.5"},ue={class:"flex items-center justify-center"},_e=["onClick"],fe={key:1,class:"col-span-12 overflow-auto intro-y lg:overflow-visible",role:"alert"},pe=se('<div class="flex"><div class="py-1"><svg class="fill-current h-6 w-6 text-teal-500 mr-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.93 17.07A10 10 0 1 1 17.07 2.93 10 10 0 0 1 2.93 17.07zm12.73-1.41A8 8 0 1 0 4.34 4.34a8 8 0 0 0 11.32 11.32zM9 11V9h2v6H9v-4zm0-6h2v2H9V5z"></path></svg></div><div><p class="font-bold">No record display</p><p class="text-sm">Make sure you already booking.</p></div></div>',1),me=[pe],ve={class:"text-center"},he={class:"p-5"},we=n("h2",{class:"mr-auto text-base font-medium"}," Authorize Count Stock ",-1),be={class:"col-span-12 sm:col-span-6"},ke={class:"col-span-12 sm:col-span-6"},xe={class:"col-span-12 sm:col-span-12"},ge={class:"p-5 text-center"},ye=n("div",{class:"mt-5 text-3xl"},"Are you sure ?",-1),Ce={class:"mt-2 text-slate-500"},Te={class:"px-5 pb-8 text-center"},Se={class:"p-5 text-center"},Ie=n("div",{class:"mt-5 text-3xl"},"Are you sure?",-1),Ve={class:"mt-2 text-slate-500"},$e={class:"px-5 pb-8 text-center"},Ae=n("div",{class:"ml-4 mr-4"},[n("div",{class:"font-medium"},"Trasaction has been authorized!")],-1),Be=n("div",{class:"ml-4 mr-4"},[n("div",{class:"font-medium"},"Trasaction has been rejected!")],-1),De=n("div",{class:"ml-4 mr-4"},[n("div",{class:"mt-1 text-slate-500"},"Please check the fileld form.")],-1),Fe=Y({__name:"AuthCountStock",setup(c){m(!1);const a=Z({}),i=le();m(null);const I=m(null),O=m(null),V=m(!1),w=u=>{V.value=u},A=m(!1),C=u=>{A.value=u},B=m(!1),k=u=>{B.value=u};ee(async()=>{await i.una_count_stock()});const D=T(()=>i.getItems),x=T(()=>i.getItemView),P=T(()=>i.getItemsDetail);async function W(u){await i.view_una_count_stock(u),await i.view_una_count_stock_details(u),a.status="auth_count_stock",a.tran_code=x.value[0].tran_code,a.stock_name=x.value[0].stock_name,a.stc_code=x.value[0].stc_code,a.inputter=x.value[0].inputter,console.log(x.value),console.log(P.value),w(!0)}function F(){a.tran_code="",a.stc_code="",a.remark="",p.value.$reset(),a.status="auth_count_stock"}const U=T(()=>({tran_code:{required:ae.withMessage("Please verify transfer transaction ",oe),minLength:ne(1)}})),p=te(U,a,{$autoDirty:!0});async function H(){k(!0)}async function X(){C(!0)}async function G(){if(p.value.$touch(),p.value.$invalid){const o=document.querySelectorAll("#failed-notification-content")[0].cloneNode(!0);o.classList.remove("hidden"),S({node:o,duration:3e3,newWindow:!0,close:!0,gravity:"top",position:"right",stopOnFocus:!0}).showToast()}else{var u=await i.auth_count_stock(a);if(u){const o=document.querySelectorAll("#success-notification-content")[0].cloneNode(!0);o.classList.remove("hidden"),S({node:o,duration:3e3,newWindow:!0,close:!0,gravity:"top",position:"right",stopOnFocus:!0}).showToast(),await i.una_count_stock(),w(!1),k(!1),F(),p.value.$reset()}}}async function Q(){if(p.value.$touch(),p.value.$invalid){const o=document.querySelectorAll("#failed-notification-content")[0].cloneNode(!0);o.classList.remove("hidden"),S({node:o,duration:3e3,newWindow:!0,close:!0,gravity:"top",position:"right",stopOnFocus:!0}).showToast()}else{a.status="reject_count_stock";var u=await i.reject_count_stock(a);if(u){const o=document.querySelectorAll("#reject-notification-content")[0].cloneNode(!0);o.classList.remove("hidden"),S({node:o,duration:3e3,newWindow:!0,close:!0,gravity:"top",position:"right",stopOnFocus:!0}).showToast(),await i.una_count_stock(),w(!1),k(!1),C(!1),F(),p.value.$reset()}}}return(u,o)=>(v(),y("div",re,[D.value.length>0?(v(),y("div",ce,[t(e(l),{class:"border-spacing-y-[10px] border-separate -mt-2"},{default:s(()=>[t(e(l).Thead,null,{default:s(()=>[t(e(l).Tr,null,{default:s(()=>[t(e(l).Th,{class:"border-b-0 whitespace-nowrap"},{default:s(()=>[r(" Count Stock ")]),_:1}),t(e(l).Th,{class:"border-b-0 whitespace-nowrap"},{default:s(()=>[r(" Inputter ")]),_:1}),t(e(l).Th,{class:"border-b-0 whitespace-nowrap"},{default:s(()=>[r(" InputDate ")]),_:1}),t(e(l).Th,{class:"text-center border-b-0 whitespace-nowrap"},{default:s(()=>[r(" Action ")]),_:1})]),_:1})]),_:1}),t(e(l).Tbody,null,{default:s(()=>[(v(!0),y(M,null,N(D.value,d=>(v(),q(e(l).Tr,{key:d.tran_code,class:"intro-x"},{default:s(()=>[t(e(l).Td,{class:"first:rounded-l-md last:rounded-r-md bg-white border-b-0 dark:bg-darkmode-600 shadow-[20px_3px_20px_#0000000b]"},{default:s(()=>[n("a",de,f(d.stock_name),1),n("div",ie," ID: "+f(d.tran_code),1)]),_:2},1024),t(e(l).Td,{class:"first:rounded-l-md last:rounded-r-md bg-white border-b-0 dark:bg-darkmode-600 shadow-[20px_3px_20px_#0000000b]"},{default:s(()=>[r(f(d.inputter),1)]),_:2},1024),t(e(l).Td,{class:"first:rounded-l-md last:rounded-r-md bg-white border-b-0 dark:bg-darkmode-600 shadow-[20px_3px_20px_#0000000b]"},{default:s(()=>[r(f(d.input_date),1)]),_:2},1024),t(e(l).Td,{class:"first:rounded-l-md last:rounded-r-md w-56 bg-white border-b-0 dark:bg-darkmode-600 shadow-[20px_3px_20px_#0000000b] py-0 relative before:block before:w-px before:h-8 before:bg-slate-200 before:absolute before:left-0 before:inset-y-0 before:my-auto before:dark:bg-darkmode-400"},{default:s(()=>[n("div",ue,[n("a",{class:"flex items-center mr-3",href:"",onClick:J=>{J.preventDefault(),W(d.tran_code)}},[t(e(b),{icon:"CheckSquare",class:"w-4 h-4 mr-1"}),r(" Edit ")],8,_e)])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])):(v(),y("div",fe,me)),t(e(_),{staticBackdrop:"",open:V.value,onClose:o[6]||(o[6]=()=>{w(!1)})},{default:s(()=>[t(e(_).Panel,{class:"px-5 py-10"},{default:s(()=>[n("div",ve,[t(e(z),{class:"mt-5 intro-y box"},{default:s(()=>[n("div",he,[t(e(z).Panel,null,{default:s(()=>[t(e(_),{staticBackdrop:"",open:V.value,onClose:o[5]||(o[5]=()=>{w(!1)})},{default:s(()=>[t(e(_).Panel,null,{default:s(()=>[t(e(_).Title,null,{default:s(()=>[we]),_:1}),t(e(_).Description,{class:"grid grid-cols-12 gap-4 gap-y-3"},{default:s(()=>[n("div",be,[t(e(E),{htmlFor:"modal-form-1"},{default:s(()=>[r("Code")]),_:1}),t(e(R),{value:a.tran_code,modelValue:a.tran_code,"onUpdate:modelValue":o[0]||(o[0]=d=>a.tran_code=d),type:"text",disabled:!0},null,8,["value","modelValue"])]),n("div",ke,[t(e(E),{htmlFor:"modal-form-1"},{default:s(()=>[r("Stock")]),_:1}),t(e(R),{value:a.stock_name,modelValue:a.stock_name,"onUpdate:modelValue":o[1]||(o[1]=d=>a.stock_name=d),type:"text",disabled:!0},null,8,["value","modelValue"])]),n("div",xe,[t(e(l),{class:"border-spacing-y-[10px] border-separate -mt-2"},{default:s(()=>[t(e(l).Thead,null,{default:s(()=>[t(e(l).Tr,null,{default:s(()=>[t(e(l).Th,{class:"border-b-0 whitespace-nowrap"},{default:s(()=>[r(" Items ")]),_:1}),t(e(l).Th,{class:"border-b-0 whitespace-nowrap"},{default:s(()=>[r(" Qty ")]),_:1})]),_:1})]),_:1}),t(e(l).Tbody,null,{default:s(()=>[(v(!0),y(M,null,N(P.value,d=>(v(),q(e(l).Tr,{key:d.tran_code,class:"intro-x"},{default:s(()=>[t(e(l).Td,{class:"first:rounded-l-md last:rounded-r-md bg-white border-b-0 dark:bg-darkmode-600 shadow-[20px_3px_20px_#0000000b]"},{default:s(()=>[r(f(d.pro_name),1)]),_:2},1024),t(e(l).Td,{class:"first:rounded-l-md last:rounded-r-md bg-white border-b-0 dark:bg-darkmode-600 shadow-[20px_3px_20px_#0000000b]"},{default:s(()=>[r(f(d.qty),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])]),_:1}),t(e(_).Footer,null,{default:s(()=>[t(e(h),{type:"button",variant:"outline-secondary",onClick:o[2]||(o[2]=()=>{w(!1)}),class:"w-20 mr-1"},{default:s(()=>[r(" Cancel ")]),_:1}),t(e(h),{class:"w-20 mr-1",variant:"outline-danger",type:"button",ref:"{sendButtonRef}",onClick:o[3]||(o[3]=d=>X())},{default:s(()=>[r(" Reject ")]),_:1},512),t(e(h),{variant:"primary",type:"button",class:"w-20",ref:"{sendButtonRef}",onClick:o[4]||(o[4]=d=>H())},{default:s(()=>[r(" Authorize ")]),_:1},512)]),_:1})]),_:1})]),_:1},8,["open"])]),_:1})])]),_:1})])]),_:1})]),_:1},8,["open"]),t(e(_),{open:B.value,onClose:o[9]||(o[9]=()=>{k(!1)}),initialFocus:O.value},{default:s(()=>[t(e(_).Panel,null,{default:s(()=>[n("div",ge,[t(e(b),{icon:"CheckCircle",class:"w-16 h-16 mx-auto mt-3 text-success"}),ye,n("div",Ce," Authorize Count Stock "+f(a.tran_code),1)]),n("div",Te,[t(e(h),{type:"button",variant:"outline-secondary",onClick:o[7]||(o[7]=()=>{k(!1)}),class:"w-24 mr-1"},{default:s(()=>[r(" Cancel ")]),_:1}),t(e(h),{type:"button",variant:"primary",class:"w-24",ref:"{deleteButtonRef}",onClick:o[8]||(o[8]=()=>{G()})},{default:s(()=>[r(" Ok ")]),_:1},512)])]),_:1})]),_:1},8,["open","initialFocus"]),t(e(_),{open:A.value,onClose:o[12]||(o[12]=()=>{C(!1)}),initialFocus:I.value},{default:s(()=>[t(e(_).Panel,null,{default:s(()=>[n("div",Se,[t(e(b),{icon:"XCircle",class:"w-16 h-16 mx-auto mt-3 text-danger"}),Ie,n("div",Ve," Reject Count stock "+f(a.tran_code),1)]),n("div",$e,[t(e(h),{type:"button",variant:"outline-secondary",onClick:o[10]||(o[10]=()=>{C(!1)}),class:"w-24 mr-1"},{default:s(()=>[r(" Cancel ")]),_:1}),t(e(h),{type:"button",variant:"danger",class:"w-24",ref:"{deleteButtonRef}",onClick:o[11]||(o[11]=()=>{Q()})},{default:s(()=>[r(" Ok ")]),_:1},512)])]),_:1})]),_:1},8,["open","initialFocus"]),t(e($),{id:"success-notification-content",class:"flex hidden"},{default:s(()=>[t(e(b),{icon:"CheckCircle",class:"text-success"}),Ae]),_:1}),t(e($),{id:"reject-notification-content",class:"flex hidden"},{default:s(()=>[t(e(b),{icon:"CheckCircle",class:"text-success"}),Be]),_:1}),t(e($),{id:"failed-notification-content",class:"flex hidden"},{default:s(()=>[t(e(b),{icon:"XCircle",class:"text-danger"}),De]),_:1})]))}});export{Fe as default};
