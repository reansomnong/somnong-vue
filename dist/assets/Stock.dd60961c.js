import{d as K,a as V,u as U,b as X,r as x,p as Y,c as H,e as J,o as Q,f as B,g as W,h as p,i as C,j as r,k as t,w as a,l as i,m as e,_ as D,n as q,q as k,T as d,F as L,s as M,t as N,v as _,x as I,D as b,P as A,y as g,z as j,A as Z,B as ee,C as te,E as ae,G as se}from"./index.62cb36ac.js";const oe="http://garage_api.test/api/",re=K({id:"StockStore",state:()=>({stockDetail:[],stockEdit:[]}),getters:{getStockList(l){return l.stockDetail},getStockById(l){return l.stockEdit}},actions:{async StockById(l){await V.get(`v1/pos/getStock_byId/${l}`).then(n=>{if(n.data.success)return this.stockEdit=n.data.data,this.stockEdit})},async StockList(){await V.get("v1/pos/getStock").then(l=>{l.data.success&&(this.stockDetail=l.data.data)}).catch(l=>{if(l.response&&l.response.data){const n=l.response.data;U().setErrors(n.errors)}})},async create_stock(l){return await V.post(oe+"v1/pos/create_stock",l).then(async n=>{if(n.data.success)return n.data.success}).catch(n=>{if(n.response&&n.response.data){const h=n.response.data;U().setErrors(h.errors)}})}}}),ce={class:"grid grid-cols-12 gap-6 mt-5"},le={class:"flex flex-wrap items-center col-span-12 mt-2 intro-y sm:flex-nowrap"},de=r("div",{class:"hidden mx-auto md:block text-slate-500"}," Showing 1 to 10 of 150 entries ",-1),ne={class:"w-full mt-3 sm:w-auto sm:mt-0 sm:ml-auto md:ml-0"},ie={class:"relative w-56 text-slate-500"},ue={class:"col-span-12 overflow-auto intro-y lg:overflow-visible"},me={href:"",class:"font-medium whitespace-nowrap"},_e={class:"text-slate-500 text-xs whitespace-nowrap mt-0.5"},fe={href:"",class:"font-medium whitespace-nowrap"},pe={class:"flex items-center justify-center"},be=["onClick"],ve={class:"text-center"},ke={class:"p-5"},he=r("h2",{class:"mr-auto text-base font-medium"}," Register Stock ",-1),we={class:"col-span-12 sm:col-span-12"},xe={class:"col-span-12 sm:col-span-6"},ge={class:"col-span-12 sm:col-span-12"},ye={class:"ml-4 mr-4"},Se={class:"font-medium"},Te=X({__name:"Stock",setup(l){const n=x(),h=()=>{var u;(u=n.value)==null||u.showToast()};Y("bind[basicStickyNotification]",u=>{n.value=u});const f=re(),P=H(),s=J({});x(null);const y=x(!1),S=x(""),T=x(""),w=u=>{E(),y.value=u},O=u=>{y.value=u};function E(){s.branch_code="",s.stc_code="",s.stc_name="",s.comments="",s.active=!0,s.status="i",m.value.$reset()}async function z(u){await f.StockById(u),s.status="u",s.stc_code=v.value[0].stc_code,s.branch_code=v.value[0].branch_code,s.stc_name=v.value[0].stc_name,s.comments=v.value[0].comments,s.stc_default=v.value[0].stc_default,s.active=s.active=!!v.value[0].active,O(!0)}Q(async()=>{s.active=!0,await f.StockList(),console.log(F.value)});const v=B(()=>f.getStockById),F=B(()=>f.getStockList),R=B(()=>({stc_name:{required:ae.withMessage("Stock name is required",se)}})),m=W(R,s,{$autoDirty:!0});async function G(){if(m.value.$touch(),m.value.$invalid)S.value=m.value.$errors[0].$message,T.value="error",h();else{var u=await f.create_stock(s);u&&(T.value="",s.status=="i"?S.value=P.getInsert:S.value=P.getUpdate,h(),w(!1),await f.StockList(),E())}}return(u,c)=>(p(),C("div",ce,[r("div",le,[t(e(D),{variant:"primary",class:"mr-2 shadow-md",onClick:c[0]||(c[0]=()=>{w(!0)})},{default:a(()=>[i(" Stock Control ")]),_:1}),de,r("div",ne,[r("div",ie,[t(e(q),{type:"text",class:"w-56 pr-10 !box",placeholder:"Search..."}),t(e(k),{icon:"Search",class:"absolute inset-y-0 right-0 w-4 h-4 my-auto mr-3"})])])]),r("div",ue,[t(e(d),{class:"border-spacing-y-[10px] border-separate -mt-2"},{default:a(()=>[t(e(d).Thead,null,{default:a(()=>[t(e(d).Tr,null,{default:a(()=>[t(e(d).Th,{class:"border-b-0 whitespace-nowrap"},{default:a(()=>[i(" Stock Name ")]),_:1}),t(e(d).Th,{class:"border-b-0 whitespace-nowrap"},{default:a(()=>[i(" Comment ")]),_:1}),t(e(d).Th,{class:"text-center border-b-0 whitespace-nowrap"},{default:a(()=>[i(" POS Default ")]),_:1}),t(e(d).Th,{class:"text-center border-b-0 whitespace-nowrap"},{default:a(()=>[i(" STATUS ")]),_:1}),t(e(d).Th,{class:"text-center border-b-0 whitespace-nowrap"},{default:a(()=>[i(" ACTIONS ")]),_:1})]),_:1})]),_:1}),t(e(d).Tbody,null,{default:a(()=>[(p(!0),C(L,null,M(F.value,o=>(p(),N(e(d).Tr,{key:o.stc_code,class:"intro-x"},{default:a(()=>[t(e(d).Td,{class:"first:rounded-l-md last:rounded-r-md bg-white border-b-0 dark:bg-darkmode-600 shadow-[20px_3px_20px_#0000000b]"},{default:a(()=>[r("a",me,_(o.stc_name),1),r("div",_e," Tags: "+_(o.branch_code)+"-"+_(o.comments),1)]),_:2},1024),t(e(d).Td,{class:"first:rounded-l-md last:rounded-r-md bg-white border-b-0 dark:bg-darkmode-600 shadow-[20px_3px_20px_#0000000b]"},{default:a(()=>[r("a",fe,_(o.comments),1)]),_:2},1024),t(e(d).Td,{class:"first:rounded-l-md last:rounded-r-md w-40 bg-white border-b-0 dark:bg-darkmode-600 shadow-[20px_3px_20px_#0000000b]"},{default:a(()=>[r("div",{class:I(["flex items-center justify-center",{"text-success":o.stc_default},{"text-danger":!o.stc_default}])},[t(e(k),{icon:"CheckSquare",class:"w-4 h-4 mr-2"}),i(" "+_(o.stc_default?"Yes":"No"),1)],2)]),_:2},1024),t(e(d).Td,{class:"first:rounded-l-md last:rounded-r-md w-40 bg-white border-b-0 dark:bg-darkmode-600 shadow-[20px_3px_20px_#0000000b]"},{default:a(()=>[r("div",{class:I(["flex items-center justify-center",{"text-success":o.active},{"text-danger":!o.active}])},[t(e(k),{icon:"CheckSquare",class:"w-4 h-4 mr-2"}),i(" "+_(o.active?"Active":"Inactive"),1)],2)]),_:2},1024),t(e(d).Td,{class:"first:rounded-l-md last:rounded-r-md w-56 bg-white border-b-0 dark:bg-darkmode-600 shadow-[20px_3px_20px_#0000000b] py-0 relative before:block before:w-px before:h-8 before:bg-slate-200 before:absolute before:left-0 before:inset-y-0 before:my-auto before:dark:bg-darkmode-400"},{default:a(()=>[r("div",pe,[r("a",{class:"flex items-center mr-3",href:"",onClick:$=>{$.preventDefault(),z(o.stc_code)}},[t(e(k),{icon:"CheckSquare",class:"w-4 h-4 mr-1"}),i(" Edit ")],8,be)])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),t(e(b),{staticBackdrop:"",open:y.value,onClose:c[8]||(c[8]=()=>{w(!1)})},{default:a(()=>[t(e(b).Panel,{class:"px-5 py-10"},{default:a(()=>[r("div",ve,[t(e(A),{class:"mt-5 intro-y box"},{default:a(()=>[r("div",ke,[t(e(A).Panel,null,{default:a(()=>[t(e(b),{staticBackdrop:"",open:y.value,onClose:c[7]||(c[7]=()=>{w(!1)})},{default:a(()=>[t(e(b).Panel,null,{default:a(()=>[t(e(b).Title,null,{default:a(()=>[he,t(e(g),{class:"mt-2"},{default:a(()=>[t(e(g).Input,{name:"active",id:"checkbox-1",modelValue:s.active,"onUpdate:modelValue":c[1]||(c[1]=o=>s.active=o),type:"checkbox"},null,8,["modelValue"])]),_:1})]),_:1}),t(e(b).Description,{class:"grid grid-cols-12 gap-4 gap-y-3"},{default:a(()=>[r("div",we,[t(e(j),{htmlFor:"modal-form-1"},{default:a(()=>[i("Stock Name")]),_:1}),t(e(q),{id:"stc_name",name:"stc_name",type:"text",placeholder:"stock name",modelValue:s.stc_name,"onUpdate:modelValue":c[2]||(c[2]=o=>s.stc_name=o),error:e(m).stc_name.$error,class:I({"border-danger":e(m).stc_name.$error})},null,8,["modelValue","error","class"]),e(m).stc_name.$errors?(p(!0),C(L,{key:0},M(e(m).stc_name.$errors,(o,$)=>(p(),C("div",{key:$,class:"mt-2 text-danger"},_(o.$message),1))),128)):Z("",!0)]),r("div",xe,[t(e(g),{class:"flex flex-col items-start mt-3"},{default:a(()=>[t(e(g).Label,{htmlFor:"post-form-5",class:"mb-2 ml-0"},{default:a(()=>[i(" POS Default ")]),_:1}),t(e(g).Input,{checked:s.stc_default,modelValue:s.stc_default,"onUpdate:modelValue":c[3]||(c[3]=o=>s.stc_default=o),type:"checkbox"},null,8,["checked","modelValue"])]),_:1})]),r("div",ge,[t(e(j),{htmlFor:"modal-form-5"},{default:a(()=>[i(" Comment ")]),_:1}),t(e(ee),{id:"validation-form-6",name:"comments",modelValue:s.comments,"onUpdate:modelValue":c[4]||(c[4]=o=>s.comments=o),placeholder:"Type your comments"},null,8,["modelValue"])])]),_:1}),t(e(b).Footer,null,{default:a(()=>[t(e(D),{type:"button",variant:"outline-secondary",onClick:c[5]||(c[5]=()=>{w(!1)}),class:"w-20 mr-1"},{default:a(()=>[i(" Cancel ")]),_:1}),t(e(D),{name:"btnOk",variant:"primary",type:"button",class:"w-20",ref:"{sendButtonRef}",disable:e(m).$invalid,onClick:c[6]||(c[6]=o=>G())},{default:a(()=>[i(" Commit ")]),_:1},8,["disable"])]),_:1})]),_:1})]),_:1},8,["open"])]),_:1})])]),_:1})])]),_:1})]),_:1},8,["open"]),t(e(te),{refKey:"basicStickyNotification",options:{duration:1500},class:"flex hidden"},{default:a(()=>[T.value=="error"?(p(),N(e(k),{key:0,icon:"XCircle",class:"text-danger"})):(p(),N(e(k),{key:1,icon:"CheckCircle",class:"text-success"})),r("div",ye,[r("div",Se,_(S.value),1)])]),_:1})]))}});export{Te as default};
