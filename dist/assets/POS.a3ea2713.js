import{d as Ge,a as b,u as H,b as Qe,r as C,p as je,e as ie,c as He,o as We,f as w,H as $e,g as Se,h as m,i as v,j as s,l as p,v as c,A as ue,k as l,w as n,m as e,_ as D,I as W,q as $,t as Z,F as E,s as L,V as J,n as S,X as Ze,W as U,D as y,z as k,L as Ve,x as O,B as Pe,C as Je,E as Y,G as ee,O as te}from"./index.62cb36ac.js";import{u as Ye}from"./Exchangerates.00c1e11d.js";const de="http://garage_api.test/api/",et=Ge({id:"PosStore",state:()=>({ItemDetails:[],ItemEdit:[],Details:[],SysdocDetails:[],ProductDefault:[],Categories:[],Customer:[],Stock:[],Product:[],UNA_Combo:[],Charges:[]}),getters:{getItemsDetail(r){return r.ItemDetails},getItemsById(r){return r.ItemEdit},getCustomer(r){return r.Customer},getStock(r){return r.Stock},getProduct(r){return r.Product},getSysdocDetails(r){return r.SysdocDetails},getUNACombo(r){return r.UNA_Combo},getCategories(r){return r.Categories.filter(u=>u.id!="0")},getProductDefault(r){return r.ProductDefault},getCharges(r){return r.Charges}},actions:{async _clear_record(){this.Details=[],this.SysdocDetails=[],this.ItemDetails=[]},async ProductById(r){await b.get(`v1/pos/productById/${r}`).then(u=>{if(u.data.success)return this.ProductDefault=u.data.data,this.ItemDetails})},async StockActive(){await b.get("v1/pos/combo/stock_active").then(r=>{r.data.success&&(this.Stock=r.data.data)})},async comboCatogories(){await b.get("v1/pos/combo/top_pos_cateogries").then(r=>{this.Categories=r.data.data}).catch(r=>{if(r.response&&r.response.data){const u=r.response.data;H().setErrors(u.errors)}})},async ItemsByCategory(r){await b.get(`v1/pos/pos_by_category/${r}`).then(u=>{if(u.data.success)return this.Product=u.data.data,this.ItemDetails})},async cboCustomer(){await b.get("v1/pos/combo/active_customer").then(r=>{this.Customer=r.data.data}).catch(r=>{if(r.response&&r.response.data){const u=r.response.data;H().setErrors(u.errors)}})},async combo_una_list(){await b.get("v1/pos/combo/una_pos_list").then(r=>{if(r.data.success)return this.UNA_Combo=r.data.data,this.UNA_Combo})},async search_items(r){await b.get(`v1/pos/search_pos/${r}`).then(u=>{u.data.data.length>0&&(this.Product=u.data.data)})},async una_details_sysdoc(r){await b.get(`v1/pos/una_transfer_sysdoc/${r}`).then(u=>{if(u.data.success)return this.SysdocDetails=u.data.data,this.SysdocDetails})},async delete_sysdoc(r){return await b.post(de+"v1/pos/pos_delete_sysdoc",r).then(async u=>{if(u.data.success)return u.data.success}).catch()},async pos_charges(r){return await b.post(de+"v1/pos/pos_charges",r).then(async u=>{if(u.data.success)return this.Charges=u.data.data,u.data.success}).catch(u=>{if(console.log(u.response),u.response&&u.response.data){const g=u.response.data;H().setErrors(g.errors)}})},async create_details(r){return await b.post(de+"v1/pos/create_pos_details",r).then(async u=>{if(u.data.success)return u.data.success}).catch(u=>{if(u.response&&u.response.data){const g=u.response.data;H().setErrors(g.errors)}})},async create_trans(r){return await b.post(de+"v1/pos/create_pos_invoice",r).then(async u=>{if(u.data.success)return u.data.success}).catch(u=>{if(u.response&&u.response.data){const g=u.response.data;H().setErrors(g.errors)}})},async una_tran_by_id(r){await b.get(`v1/pos/una_pos/${r}`).then(u=>{if(u.data.success)return this.ItemEdit=u.data.data,this.ItemEdit})},async una_details_id(r){await b.get(`v1/pos/una_pos_details/${r}`).then(u=>{if(u.data.success)return this.ItemDetails=u.data.data,this.ItemDetails})},async una_pos_sysdoc(r){await b.get(`v1/pos/una_pos_sysdoc/${r}`).then(u=>{if(u.data.success)return this.SysdocDetails=u.data.data,this.SysdocDetails})}}}),tt={class:"flex flex-col items-center mt-8 intro-y sm:flex-row"},st={class:"mr-auto text-lg font-medium"},at={key:0},ot={key:1,class:"font-medium text-danger"},lt={class:"flex w-full mt-4 sm:w-auto sm:mt-0"},nt={key:0},rt={key:1},it={class:"flex items-center justify-center w-5 h-5"},ut=["onClick"],dt=s("span",{class:"truncate"}," don't have invoice ",-1),ct={class:"grid grid-cols-12 gap-5 mt-5 intro-y"},_t={class:"col-span-12 intro-y lg:col-span-8"},mt={class:"lg:flex intro-y"},pt={class:"relative"},vt=s("option",null,"Sort By",-1),ft=s("option",null,"A to Z",-1),ht=s("option",null,"Z to A",-1),yt=s("option",null,"Lowest Price",-1),gt=s("option",null,"Highest Price",-1),bt={class:"grid grid-cols-12 gap-5 mt-5"},kt=["onClick"],xt={class:"text-base font-medium"},Ct={class:"text-slate-500"},wt={class:"grid grid-cols-12 gap-5 pt-5 mt-5 border-t"},Dt=["onClick"],$t={class:"relative p-3 rounded-md box zoom-in"},St={class:"flex-none relative block before:block before:w-full before:pt-[100%]"},Vt={class:"absolute top-0 left-0 w-full h-full image-fit"},Pt=["src"],It={class:"block mt-3 font-medium text-center truncate"},Ft={class:"pr-1 intro-y"},qt={class:"p-2 box"},Ut={key:0,class:"p-2 mt-5 box"},Nt=["onClick"],Tt=["onClick"],At=["onClick"],Bt={class:"p-5 mt-5 box"},Mt={class:"flex"},Et=s("div",{class:"mr-auto"},"Subtotal",-1),Kt={class:"font-medium"},Lt={class:"flex mt-4"},Ot=s("div",{class:"mr-auto"},"Discount",-1),Rt={class:"font-medium text-danger"},zt={key:0,class:"flex mt-4"},Xt={class:"mr-auto"},Gt={class:"font-medium"},Qt={class:"flex pt-4 mt-4 border-t border-slate-200/60 dark:border-darkmode-400"},jt=s("div",{class:"mr-auto text-base font-medium"},"Total Charge",-1),Ht={class:"text-base font-medium"},Wt={class:"flex mt-5"},Zt={class:"p-5 mt-5 box"},Jt={class:"flex items-center pb-5 border-b border-slate-200 dark:border-darkmode-400"},Yt=s("div",{class:"text-slate-500"},"Time",-1),es={class:"mt-1"},ts={class:"flex items-center py-5 border-b border-slate-200 dark:border-darkmode-400"},ss=s("div",{class:"text-slate-500"},"Customer",-1),as={class:"mt-1"},os={class:"flex items-center py-5 border-b border-slate-200 dark:border-darkmode-400"},ls=s("div",{class:"text-slate-500"},"People",-1),ns={class:"mt-1"},rs={class:"flex items-center pt-5"},is=s("div",{class:"text-slate-500"},"Table",-1),us={class:"mt-1"},ds={class:"p-5 text-center"},cs=s("div",{class:"mt-5 text-3xl"},"Are you sure?",-1),_s={class:"px-5 pb-8 text-center"},ms={class:"mr-auto text-base font-medium"},ps={key:0},vs={key:1},fs={class:"col-span-12"},hs=["value"],ys={class:"col-span-12"},gs={class:"col-span-12"},bs={class:"col-span-12"},ks={key:0},xs={key:1},Cs={class:"mr-auto text-base font-medium"},ws={class:"col-span-12 sm:col-span-6"},Ds=["value"],$s={class:"col-span-12 sm:col-span-6"},Ss={class:"col-span-12 sm:col-span-6"},Vs={class:"col-span-12 sm:col-span-6"},Ps={class:"col-span-12 sm:col-span-6"},Is={class:"col-span-12"},Fs={class:"p-5 text-center"},qs=s("div",{class:"mt-5 text-3xl"},"Invalid Ticket",-1),Us=s("div",{class:"mt-2 text-slate-500"},"Please create your ticket POS !",-1),Ns={class:"px-5 pb-8 text-center"},Ts={class:"mr-auto text-base font-medium"},As={key:0},Bs={key:1},Ms={class:"col-span-6"},Es={class:"col-span-6"},Ks={class:"col-span-12"},Ls={class:"col-span-6"},Os={class:"col-span-6"},Rs=s("span",null," Commit ",-1),zs={class:"ml-4 mr-4"},Xs={class:"font-medium"},js=Qe({__name:"POS",setup(r){const u=C(),g=()=>{var d;(d=u.value)==null||d.showToast()};je("bind[basicStickyNotification]",d=>{u.value=d});const R=C(!1),se=d=>{R.value=d},t=ie({}),i=ie({}),ae=ie({}),f=ie({}),z=He(),_=et(),ve=Ye(),T=C("0"),N=C("0"),X=C(""),q=C(""),A=C(""),fe=C(!1),he=C(!1),ye=C(!1),oe=d=>{ye.value=d},le=d=>{fe.value=d},B=d=>{(i.pos_code==""||i.pos_code==null)&&d==!0?ne(!0):he.value=d},ge=C(!1),ne=d=>{ge.value=d},re=C(null),be=C(null);We(async()=>{_e(),Q(),await ve.Base_currency_exist(),Ce.value.length<=0?(q.value="Please register exchange rate !!",A.value="error",g()):(Q(),await _.StockActive(),await _.combo_una_list(),await _.comboCatogories(),await _.cboCustomer(),await _.ItemsByCategory("All"))});const ke=w(()=>_.getCharges),Ie=w(()=>_.getStock),xe=w(()=>_.getUNACombo),Ce=w(()=>ve.get_base_curr_exist),Fe=w(()=>_.getCategories),qe=w(()=>_.getCustomer),Ue=w(()=>_.getProduct),M=w(()=>_.getProductDefault),h=w(()=>_.getItemsById),G=w(()=>_.ItemDetails),V=w(()=>_.getSysdocDetails);$e(N,()=>{i.sto_code=N.value}),$e(T,()=>{t.cus_code=T.value});async function Ne(d){await _.ItemsByCategory(d)}async function Te(){X.value==""||X.value==null?await _.search_items("all"):await _.search_items(X.value)}async function Ae(d){Q(),await _.ProductById(d),M.value.length>0&&(i.pro_code=M.value[0].pro_code,i.barcode=M.value[0].barcode,i.unitprice=M.value[0].unitprice,i.discount=M.value[0].discount,i.sto_code=M.value[0].sto_code,N.value=M.value[0].sto_code,K())}const Be=w(()=>({cus_code:{required:Y.withMessage("Customer info is required",ee),minLength:te(1)}})),Me=w(()=>({sto_code:{required:Y.withMessage("Stock name is required",ee),minLength:te(1)},unitprice:{required:Y.withMessage("Price is required",ee),minLength:te(1)},discount:{required:Y.withMessage("Discount is required",ee),minLength:te(1)},qty:{required:Y.withMessage("Qty is required",ee),minLength:te(1)}})),x=Se(Me,i,{$autoDirty:!0}),P=Se(Be,t,{$autoDirty:!0});function ce(d){return d==null||typeof d=="string"&&String(d).trim().length===0}function we(){f.ref_exchange=t.ref_exchange,f.return_amount=0,f.total_charge=t.total_charge,f.charge=0}function _e(){t.status="i",t.pos_code="",t.branch_code="",t.cus_code="",t.people_num="",t.table_num="",t.ref_exchange="",t.subtotal=0,t.disamount=0,t.total_amount=0,t.total_charge=0,t.vat=0,t.remark="",t.inputter="",P.value.$reset()}function Q(){i.status="i",i.sto_code="",i.pro_code="",i.unitprice=0,i.discount=0,i.qty=1,i.amount=0,i.remark="",N.value="",x.value.$reset()}async function Ee(){if(ae.sysdoc!=""){var d=await _.delete_sysdoc(ae);d&&j(t.pos_code),se(!1)}}async function Ke(){if(P.value.$touch(),Ce.value.length<=0){q.value="Please register exchange rate !!",A.value="error",g();return}if(P.value.$invalid)q.value=P.value.$errors[0].$message,A.value="error",g();else{var d=await _.create_trans(t);d&&(A.value="",t.status=="i"?(q.value=z.getInsert,_e()):(q.value=z.getUpdate,await _.una_tran_by_id(t.pos_code)),g(),le(!1),await _.combo_una_list(),P.value.$reset())}}async function j(d){await _.una_tran_by_id(d),Q(),h.value.length>0&&(t.status="u",T.value=h.value[0].cus_code,t.pos_code=h.value[0].pos_code,t.cus_code=h.value[0].cus_code,t.cus_name=h.value[0].cus_name,t.subtotal=h.value[0].subtotal,t.disamount=h.value[0].disamount,t.vat=h.value[0].vat,t.vat_amount=h.value[0].vat_amount,t.total_amount=h.value[0].total_amount,t.people_num=h.value[0].people_num,t.table_num=h.value[0].table_num,t.exchange_rate=h.value[0].exchange_rate,t.total_charge=h.value[0].total_charge,t.symbol=h.value[0].symbol,t.remark=h.value[0].remark,t.inputter=h.value[0].inputter,t.input_date=h.value[0].input_date,t.check_payment=h.value[0].check_payment,Oe(t.pos_code))}async function Le(){if(x.value.$touch(),i.pos_code==""||i.pos_code==null)ne(!0);else if(x.value.$invalid)q.value=x.value.$errors[0].$message,A.value="error",g();else{var d=await _.create_details(i);d&&(A.value="",t.status=="i"?q.value=z.getInsert:q.value=z.getUpdate,B(!1),g(),j(t.pos_code),P.value.$reset(),x.value.$reset())}}async function Oe(d){await _.una_details_id(d),i.pos_code=d,G.value.length>0&&(i.pos_code=G.value[0].pos_code,i.status="i",i.qty=G.value[0].qty,K())}async function Re(){De(),q.value=z.getCharge,g(),oe(!1),we(),j(t.pos_code)}async function De(){f.pos_code=t.pos_code,f.ref_exchange=t.ref_exchange;const d=Number.isInteger(f.charge);console.log(d),console.log(f.charge);var a=await _.pos_charges(f);a&&(f.return_amount=ke.value[0].return_amount,f.exchange_amount=ke.value[0].exchange_amount)}function K(){var d=0,a=0,o=0,I=0,F=0;ce(i.unitprice)?I=0:I=i.unitprice,ce(i.discount)?a=0:a=i.discount,ce(i.qty)?F=0:F=i.qty,o=I*F*a/100,d=I*F-o,i.amount=Number(d.toFixed(3))}async function me(d){const a=["0","1","2","3","4","5","6","7","8","9","."],o=d.key;a.includes(o)||d.preventDefault()}async function pe(d){await _.una_pos_sysdoc(d),i.status="i",i.pos_code=V.value[0].pos_code,i.pro_code=V.value[0].pro_code,i.barcode=V.value[0].barcode,i.unitprice=V.value[0].unitprice,i.qty=V.value[0].qty,i.discount=V.value[0].discount,i.disamount=V.value[0].disamount,i.amount=V.value[0].amount,i.total=V.value[0].total,i.remark=V.value[0].remark,N.value=V.value[0].sto_code,K()}async function ze(d){ae.status="d",ae.sysdoc=d,se(!0)}async function Xe(){_e(),Q(),_._clear_record(),T.value="",t.status="i",t.pos_code=""}return(d,a)=>(m(),v(E,null,[s("div",tt,[s("h2",st,[p("Point of Sale "),t.pos_code?(m(),v("span",at,": "+c(t.pos_code),1)):ue("",!0),t.check_payment?(m(),v("span",ot," -"+c(t.check_payment),1)):ue("",!0)]),s("div",lt,[l(e(D),{as:"a",href:"#",variant:"primary",onClick:a[0]||(a[0]=o=>{o.preventDefault(),le(!0)}),class:"mr-2 shadow-md"},{default:n(()=>[t.pos_code==""?(m(),v("span",nt," New Order "+c(t.pos_code),1)):(m(),v("span",rt," Updating "))]),_:1}),l(e(W),{class:"ml-auto sm:ml-0"},{default:n(()=>[l(e(W).Button,{as:e(D),class:"px-2 !box"},{default:n(()=>[s("span",it,[l(e($),{icon:"ChevronDown",class:"w-4 h-4"})])]),_:1},8,["as"]),xe.value.length>0?(m(),Z(e(W).Items,{key:0},{default:n(()=>[(m(!0),v(E,null,L(xe.value,o=>(m(),Z(e(W).Item,{key:o.id},{default:n(()=>[l(e($),{icon:"Activity",class:"w-4 h-4 mr-2",onClick:I=>j(o.id)},null,8,["onClick"]),s("span",{class:"truncate",onClick:I=>j(o.id)},c(o.name),9,ut)]),_:2},1024))),128))]),_:1})):(m(),Z(e(W).Items,{key:1},{default:n(()=>[dt]),_:1}))]),_:1})])]),s("div",ct,[s("div",_t,[s("div",mt,[s("div",pt,[l(e(S),{type:"text",modelValue:X.value,"onUpdate:modelValue":a[1]||(a[1]=o=>X.value=o),value:"search",onKeyup:a[2]||(a[2]=J(o=>Te(),["enter"])),class:"w-full px-4 py-3 pr-10 lg:w-64 !box",placeholder:"Search item..."},null,8,["modelValue"]),l(e($),{icon:"Search",class:"absolute inset-y-0 right-0 w-4 h-4 my-auto mr-3 text-slate-500"})]),l(e(Ze),{class:"w-full px-4 py-3 mt-3 ml-auto !box lg:w-auto lg:mt-0"},{default:n(()=>[vt,ft,ht,yt,gt]),_:1})]),s("div",bt,[(m(!0),v(E,null,L(Fe.value,o=>(m(),v("div",{class:"col-span-12 p-5 cursor-pointer sm:col-span-4 2xl:col-span-3 box zoom-in",key:o.id,onClick:I=>{I.preventDefault(),Ne(o.id)}},[s("div",xt,c(o.name),1),s("div",Ct,c(o.id),1)],8,kt))),128))]),s("div",wt,[(m(!0),v(E,null,L(Ue.value,o=>(m(),v("a",{key:o.pro_code,href:"#",onClick:I=>{I.preventDefault(),B(!0),Ae(o.pro_code)},class:"block col-span-12 intro-y sm:col-span-4 2xl:col-span-3"},[s("div",$t,[s("div",St,[s("div",Vt,[s("img",{alt:"None product image",class:"rounded-md",src:o.url},null,8,Pt)])]),s("div",It,c(o.pro_name),1)])],8,Dt))),128))])]),l(e(U).Group,{class:"col-span-12 lg:col-span-4"},{default:n(()=>[s("div",Ft,[s("div",qt,[l(e(U).List,{variant:"pills"},{default:n(()=>[l(e(U),null,{default:n(()=>[l(e(U).Button,{as:"button",class:"w-full py-2"},{default:n(()=>[p(" Ticket ")]),_:1})]),_:1}),l(e(U),null,{default:n(()=>[l(e(U).Button,{as:"button",class:"w-full py-2"},{default:n(()=>[p(" Details ")]),_:1})]),_:1})]),_:1})])]),l(e(U).Panels,null,{default:n(()=>[l(e(U).Panel,null,{default:n(()=>[G.value.length>0?(m(),v("div",Ut,[(m(!0),v(E,null,L(G.value,(o,I)=>(m(),v("a",{href:"#",key:o.sysdoc,class:"flex items-center p-3 transition duration-300 ease-in-out bg-white rounded-md cursor-pointer dark:bg-darkmode-600 hover:bg-slate-100 dark:hover:bg-darkmode-400"},[s("div",{class:"max-w-[60%] truncate mr-1",onClick:F=>{F.preventDefault(),B(!0),pe(o.sysdoc)}},c(o.pro_name)+" - "+c(o.stc_name),9,Nt),s("div",{class:"text-slate-400",onClick:F=>{F.preventDefault(),B(!0),pe(o.sysdoc)}},"x "+c(o.qty),9,Tt),s("div",{class:"ml-auto font-medium",onClick:F=>{F.preventDefault(),B(!0),pe(o.sysdoc)}},c(o.symbol)+c(o.total),9,At),l(e($),{icon:"Trash",onClick:F=>ze(o.sysdoc),class:"w-4 h-4 ml-2 text-slate-500"},null,8,["onClick"])]))),128))])):ue("",!0),s("div",Bt,[s("div",Mt,[Et,s("div",Kt,c(t.symbol)+" "+c(t.subtotal),1)]),s("div",Lt,[Ot,s("div",Rt,c(t.symbol)+" "+c(t.disamount),1)]),t.vat>0?(m(),v("div",zt,[s("div",Xt,"Tax "+c(t.vat)+"% ",1),s("div",Gt,c(t.symbol)+" "+c(t.vat_amount),1)])):ue("",!0),s("div",Qt,[jt,s("div",Ht,c(t.symbol)+" "+c(t.total_charge),1)])]),s("div",Wt,[l(e(D),{class:"w-32 border-slate-300 dark:border-darkmode-400 text-slate-500",onClick:a[3]||(a[3]=o=>{o.preventDefault(),Xe()})},{default:n(()=>[p(" Clear Items ")]),_:1}),l(e(D),{variant:"primary",disabled:!t.pos_code,class:"w-32 ml-auto shadow-md",onClick:a[4]||(a[4]=()=>{oe(!0),we()})},{default:n(()=>[p(" Charge ")]),_:1},8,["disabled"])])]),_:1}),l(e(U).Panel,null,{default:n(()=>[s("div",Zt,[s("div",Jt,[s("div",null,[Yt,s("div",es,c(t.input_date?t.input_date:"None"),1)]),l(e($),{icon:"Clock",class:"w-4 h-4 ml-auto text-slate-500"})]),s("div",ts,[s("div",null,[ss,s("div",as,c(t.cus_name?t.cus_name:"None"),1)]),l(e($),{icon:"User",class:"w-4 h-4 ml-auto text-slate-500"})]),s("div",os,[s("div",null,[ls,s("div",ns,c(t.people_num),1)]),l(e($),{icon:"Users",class:"w-4 h-4 ml-auto text-slate-500"})]),s("div",rs,[s("div",null,[is,s("div",us,c(t.table_num),1)]),l(e($),{icon:"Mic",class:"w-4 h-4 ml-auto text-slate-500"})])])]),_:1})]),_:1})]),_:1})]),l(e(y),{open:R.value,onClose:a[7]||(a[7]=()=>{se(!1)})},{default:n(()=>[l(e(y).Panel,null,{default:n(()=>[s("div",ds,[l(e($),{icon:"XCircle",class:"w-16 h-16 mx-auto mt-3 text-danger"}),cs]),s("div",_s,[l(e(D),{type:"button",variant:"outline-secondary",onClick:a[5]||(a[5]=()=>{se(!1)}),class:"w-24 mr-1"},{default:n(()=>[p(" Cancel ")]),_:1}),l(e(D),{type:"button",variant:"danger",class:"w-24",onClick:a[6]||(a[6]=()=>{Ee()})},{default:n(()=>[p(" Delete ")]),_:1})])]),_:1})]),_:1},8,["open"]),l(e(y),{open:fe.value,onClsoe:a[14]||(a[14]=()=>{le(!1)}),initialFocus:re.value},{default:n(()=>[l(e(y).Panel,null,{default:n(()=>[l(e(y).Title,null,{default:n(()=>[s("h2",ms,[t.status=="i"?(m(),v("span",ps," New Order ")):(m(),v("span",vs," Verify Ref: "+c(t.pos_code),1))])]),_:1}),l(e(y).Description,{class:"grid grid-cols-12 gap-4 gap-y-3"},{default:n(()=>[s("div",fs,[l(e(k),{htmlFor:"pos-form-1"},{default:n(()=>[p("Name")]),_:1}),l(e(Ve),{name:"cboCustomer",modelValue:T.value,"onUpdate:modelValue":a[8]||(a[8]=o=>T.value=o),value:T.value,error:e(P).cus_code.$error,class:O({"border-danger":e(P).cus_code.$error})},{default:n(()=>[(m(!0),v(E,null,L(qe.value,o=>(m(),v("option",{value:o.id,key:o.id},c(o.name),9,hs))),128))]),_:1},8,["modelValue","value","error","class"])]),s("div",ys,[l(e(k),{htmlFor:"table_num"},{default:n(()=>[p("Table")]),_:1}),l(e(S),{id:"table_num",type:"text",class:"flex-1",modelValue:t.table_num,"onUpdate:modelValue":a[9]||(a[9]=o=>t.table_num=o),value:t.table_num,placeholder:"customer table"},null,8,["modelValue","value"])]),s("div",gs,[l(e(k),{htmlFor:"people_num"},{default:n(()=>[p("Number of People")]),_:1}),l(e(S),{id:"people_num",type:"text",class:"flex-1",modelValue:t.people_num,"onUpdate:modelValue":a[10]||(a[10]=o=>t.people_num=o),value:t.people_num,placeholder:"people"},null,8,["modelValue","value"])]),s("div",bs,[l(e(k),{htmlFor:"pos-form-3"},{default:n(()=>[p(" Remark ")]),_:1}),l(e(Pe),{id:"remark",modelValue:t.remark,"onUpdate:modelValue":a[11]||(a[11]=o=>t.remark=o),value:t.remark,placeholder:"item remark"},null,8,["modelValue","value"])])]),_:1}),l(e(y).Footer,{class:"text-right"},{default:n(()=>[l(e(D),{variant:"outline-secondary",type:"button",onClick:a[12]||(a[12]=()=>{le(!1)}),class:"w-32 mr-1"},{default:n(()=>[p(" Cancel ")]),_:1}),l(e(D),{variant:"primary",type:"button",class:"w-32",ref_key:"createTicketRef",ref:re,disable:e(P).$invalid,onClick:a[13]||(a[13]=o=>Ke())},{default:n(()=>[t.status=="i"?(m(),v("span",ks," Create Ticket ")):(m(),v("span",xs," Update Ticket "))]),_:1},8,["disable"])]),_:1})]),_:1})]),_:1},8,["open","initialFocus"]),l(e(y),{open:he.value,onClsoe:a[29]||(a[29]=()=>{B(!1)}),initialFocus:be.value},{default:n(()=>[l(e(y).Panel,null,{default:n(()=>[l(e(y).Title,null,{default:n(()=>[s("h2",Cs," Ticket : "+c(i.pos_code),1)]),_:1}),l(e(y).Description,{class:"grid grid-cols-12 gap-4 gap-y-3"},{default:n(()=>[s("div",ws,[l(e(k),{htmlFor:"pos-form-1"},{default:n(()=>[p("Stock ")]),_:1}),l(e(Ve),{name:"cboStock",modelValue:N.value,"onUpdate:modelValue":a[15]||(a[15]=o=>N.value=o),value:N.value,error:e(x).sto_code.$error,class:O({"border-danger":e(x).sto_code.$error})},{default:n(()=>[(m(!0),v(E,null,L(Ie.value,o=>(m(),v("option",{value:o.id,key:o.id},c(o.name),9,Ds))),128))]),_:1},8,["modelValue","value","error","class"])]),s("div",$s,[l(e(k),{htmlFor:"modal-form-3"},{default:n(()=>[p(" Price ")]),_:1}),l(e(S),{id:"price",name:"price",type:"number",placeholder:"Price",modelValue:i.unitprice,"onUpdate:modelValue":a[16]||(a[16]=o=>i.unitprice=o),value:i.unitprice,onKeyup:a[17]||(a[17]=J(o=>K(),["enter"])),onKeypress:a[18]||(a[18]=o=>me(o)),error:e(x).unitprice.$error,class:O({"border-danger":e(x).unitprice.$error})},null,8,["modelValue","value","error","class"])]),s("div",Ss,[l(e(k),{htmlFor:"modal-form-3"},{default:n(()=>[p(" Discount ")]),_:1}),l(e(S),{id:"discount",name:"discount",type:"number",placeholder:"Discount",modelValue:i.discount,"onUpdate:modelValue":a[19]||(a[19]=o=>i.discount=o),value:i.discount,onKeyup:a[20]||(a[20]=J(o=>K(),["enter"])),onKeypress:a[21]||(a[21]=o=>me(o)),error:e(x).discount.$error,class:O({"border-danger":e(x).discount.$error})},null,8,["modelValue","value","error","class"])]),s("div",Vs,[l(e(k),{htmlFor:"modal-form-3"},{default:n(()=>[p(" Qty ")]),_:1}),l(e(S),{id:"qty",name:"qty",type:"number",placeholder:"Discount",modelValue:i.qty,"onUpdate:modelValue":a[22]||(a[22]=o=>i.qty=o),value:i.qty,onKeyup:a[23]||(a[23]=J(o=>K(),["enter"])),onKeypress:a[24]||(a[24]=o=>me(o)),error:e(x).qty.$error,class:O({"border-danger":e(x).qty.$error})},null,8,["modelValue","value","error","class"])]),s("div",Ps,[l(e(k),{htmlFor:"modal-form-3"},{default:n(()=>[p(" Amount ")]),_:1}),l(e(S),{id:"qty",name:"qty",type:"number",disabled:!0,placeholder:"0.00",modelValue:i.amount,"onUpdate:modelValue":a[25]||(a[25]=o=>i.amount=o),value:i.amount},null,8,["modelValue","value"])]),s("div",Is,[l(e(k),{htmlFor:"pos-form-5"},{default:n(()=>[p("Notes")]),_:1}),l(e(Pe),{id:"pos-form-5",placeholder:"Item notes",modelValue:i.remark,"onUpdate:modelValue":a[26]||(a[26]=o=>i.remark=o),value:i.remark},null,8,["modelValue","value"])])]),_:1}),l(e(y).Footer,{class:"text-right"},{default:n(()=>[l(e(D),{variant:"outline-secondary",type:"button",onClick:a[27]||(a[27]=()=>{B(!1)}),class:"w-24 mr-1"},{default:n(()=>[p(" Cancel ")]),_:1}),l(e(D),{variant:"primary",type:"button",class:"w-24",ref_key:"addItemRef",ref:be,disable:e(P).$invalid,onClick:a[28]||(a[28]=o=>{o.preventDefault(),Le()})},{default:n(()=>[p(" Add Item ")]),_:1},8,["disable"])]),_:1})]),_:1})]),_:1},8,["open","initialFocus"]),l(e(y),{open:ge.value,onClose:a[31]||(a[31]=()=>{ne(!1)})},{default:n(()=>[l(e(y).Panel,null,{default:n(()=>[s("div",Fs,[l(e($),{icon:"XCircle",class:"w-16 h-16 mx-auto mt-3 text-danger"}),qs,Us]),s("div",Ns,[l(e(D),{type:"button",variant:"primary",onClick:a[30]||(a[30]=()=>{ne(!1)}),class:"w-24"},{default:n(()=>[p(" Ok ")]),_:1})])]),_:1})]),_:1},8,["open"]),l(e(y),{open:ye.value,onClsoe:a[38]||(a[38]=()=>{oe(!1)}),initialFocus:re.value},{default:n(()=>[l(e(y).Panel,null,{default:n(()=>[l(e(y).Title,null,{default:n(()=>[s("h2",Ts,[t.status=="i"?(m(),v("span",As," Payment ")):(m(),v("span",Bs," Invoice : "+c(t.pos_code),1))])]),_:1}),l(e(y).Description,{class:"grid grid-cols-12 gap-4 gap-y-3"},{default:n(()=>[s("div",Ms,[l(e(k),{htmlFor:"table_num"},{default:n(()=>[p("Table")]),_:1}),l(e(S),{id:"table",type:"text",disabled:!0,class:"flex-1",value:t.table_num},null,8,["value"])]),s("div",Es,[l(e(k),{htmlFor:"people_num"},{default:n(()=>[p("Grand total")]),_:1}),l(e(S),{type:"text",class:"flex-1",disabled:!0,value:t.total_charge,placeholder:"people"},null,8,["value"])]),s("div",Ks,[l(e(k),{htmlFor:"people_num"},{default:n(()=>[p("Amount")]),_:1}),l(e(S),{id:"txtcharge",type:"text",class:"flex-1",modelValue:f.charge,"onUpdate:modelValue":a[32]||(a[32]=o=>f.charge=o),value:f.charge,onKeyup:a[33]||(a[33]=J(o=>De(),["enter"])),placeholder:"amount"},null,8,["modelValue","value"])]),s("div",Ls,[l(e(k),{htmlFor:"people_num"},{default:n(()=>[p("Return")]),_:1}),l(e(S),{type:"text",class:"flex-1",disabled:!0,modelValue:f.return_amount,"onUpdate:modelValue":a[34]||(a[34]=o=>f.return_amount=o),value:f.return_amount,placeholder:"Return"},null,8,["modelValue","value"])]),s("div",Os,[l(e(k),{htmlFor:"people_num"},{default:n(()=>[p("Exchange")]),_:1}),l(e(S),{type:"text",class:O(["flex-1",{"border-danger":f.return_amount<=0,"text-danger":f.return_amount<=0}]),disabled:!0,modelValue:f.exchange_amount,"onUpdate:modelValue":a[35]||(a[35]=o=>f.exchange_amount=o),value:f.exchange_amount,placeholder:"Exchange"},null,8,["modelValue","value","class"])])]),_:1}),l(e(y).Footer,{class:"text-right"},{default:n(()=>[l(e(D),{variant:"outline-secondary",type:"button",onClick:a[36]||(a[36]=()=>{oe(!1)}),class:"w-32 mr-1"},{default:n(()=>[p(" Cancel ")]),_:1}),l(e(D),{variant:"primary",type:"button",class:"w-32",ref_key:"createTicketRef",ref:re,disable:e(P).$invalid,onClick:a[37]||(a[37]=o=>Re())},{default:n(()=>[Rs]),_:1},8,["disable"])]),_:1})]),_:1})]),_:1},8,["open","initialFocus"]),l(e(Je),{refKey:"basicStickyNotification",options:{duration:1500},class:"flex hidden"},{default:n(()=>[A.value=="error"?(m(),Z(e($),{key:0,icon:"XCircle",class:"text-danger"})):(m(),Z(e($),{key:1,icon:"CheckCircle",class:"text-success"})),s("div",zs,[s("div",Xs,c(q.value),1)])]),_:1})],64))}});export{js as default};
