import{d as ae,a as T,u as N,b as se,r as b,p as te,R as oe,c as re,e as le,o as de,f as I,H as O,g as ne,h as _,i as x,j as d,k as a,w as t,l as i,m as e,_ as U,n as F,q as S,T as u,F as A,s as M,t as R,v as f,x as $,D as g,P as z,y as H,z as C,L as K,B as ie,C as ue,E as B,G as D,O as E}from"./index.62cb36ac.js";const ce="http://garage_api.test/api/",me=ae({id:"CustomerStore",state:()=>({ItemDetail:[],ItemEdit:[],Gender:[]}),getters:{getItemsDetail(r){return r.ItemDetail},getItemsById(r){return r.ItemEdit},getGender(r){return r.Gender}},actions:{async ComboGender(){await T.get("v1/gb/combo/gender").then(r=>{this.Gender=r.data.data}).catch(r=>{if(r.response&&r.response.data){const n=r.response.data;console.log("\u{1F680} ~ file: Customer.ts:44 ~ awaitapi.get<DataResponse<Combo[]>> ~ errorresponse:",n);const p=N();console.log("\u{1F680} ~ file: Customer.ts:46 ~ awaitapi.get<DataResponse<Combo[]>> ~ alertStore:",p),p.setErrors(n.errors)}})},async ItemsById(r){await T.get(`v1/pos/Customer_byId/${r}`).then(n=>{if(n.data.success)return this.ItemEdit=n.data.data,console.log("\u{1F680} ~ file: Customer.ts:58 ~ .then ~ this.ItemEdit:",this.ItemEdit),this.ItemEdit})},async ItemsList(){await T.get("v1/pos/getCustomer").then(r=>{r.data.success&&(this.ItemDetail=r.data.data,console.log("\u{1F680} ~ file: Customer.ts:67 ~ awaitapi.get<DataResponse<Customer[]>> ~ response.data.data as Customer[]:",r.data.data))}).catch(r=>{if(r.response&&r.response.data){const n=r.response.data;console.log("\u{1F680} ~ file: Customer.ts:72 ~ awaitapi.get<DataResponse<Customer[]>> ~ errorresponse:",n);const p=N();console.log("\u{1F680} ~ file: Customer.ts:74 ~ awaitapi.get<DataResponse<Customer[]>> ~ alertStore:",p),p.setErrors(n.errors)}})},async create_customer(r){return await T.post(ce+"v1/pos/create_customer",r).then(async n=>{if(n.data.success)return n.data.success}).catch(n=>{if(n.response&&n.response.data){const p=n.response.data;N().setErrors(p.errors)}})}}}),pe={class:"grid grid-cols-12 gap-6 mt-5"},_e={class:"flex flex-wrap items-center col-span-12 mt-2 intro-y sm:flex-nowrap"},fe=d("div",{class:"hidden mx-auto md:block text-slate-500"}," Showing 1 to 10 of 150 entries ",-1),ve={class:"w-full mt-3 sm:w-auto sm:mt-0 sm:ml-auto md:ml-0"},he={class:"relative w-56 text-slate-500"},be={class:"col-span-12 overflow-auto intro-y lg:overflow-visible"},ge={href:"",class:"font-medium whitespace-nowrap"},we={class:"text-slate-500 text-xs whitespace-nowrap mt-0.5"},ye={class:"flex items-center justify-center"},ke=["onClick"],xe={class:"text-center"},Ce={class:"p-5"},Ie=d("h2",{class:"mr-auto text-base font-medium"}," Customer info ",-1),Se={class:"col-span-12 sm:col-span-6"},$e={class:"col-span-12 sm:col-span-6"},Ve=["value"],Te={class:"col-span-12 sm:col-span-6"},Fe={class:"col-span-12 sm:col-span-6"},Be={class:"col-span-12 sm:col-span-6"},De=["value"],Ee={class:"col-span-12 sm:col-span-12"},qe={class:"ml-4 mr-4"},Ge={class:"font-medium"},Le=se({__name:"Customer",setup(r){const n=b(),p=()=>{var m;(m=n.value)==null||m.showToast()};te("bind[basicStickyNotification]",m=>{n.value=m});const q=oe(),v=me(),j=re(),s=le({}),w=b("0"),y=b("0"),V=b(""),G=b("");b(null);const P=b(!1),k=m=>{c.value.$reset(),P.value=m};de(async()=>{L(),await v.ItemsList(),await v.ComboGender(),await q.getComboProvince()});const X=I(()=>q.getProvince),J=I(()=>v.getGender),h=I(()=>v.getItemsById),Q=I(()=>v.getItemsDetail);O(w,()=>{s.gender=w.value}),O(y,()=>{s.address_code=y.value});async function W(m){L(),await v.ItemsById(m),s.status="u",s.cus_code=h.value[0].cus_code,s.cus_name=h.value[0].cus_name,s.phone=h.value[0].phone,s.email=h.value[0].email,s.active=s.active=!!h.value[0].active,s.remark=h.value[0].remark,w.value=h.value[0].gender,y.value=h.value[0].address_code,k(!0)}function L(){s.branch_code="",s.cus_code="",s.cus_name="",s.phone="",s.email="",s.address="",s.remark="",c.value.$reset(),s.active=!0,s.status="i",w.value=""}const Y=I(()=>({cus_name:{required:B.withMessage("Customer name is required",D),minLength:E(3)},gender:{required:B.withMessage("Gender is required",D),minLength:E(1)},phone:{required:B.withMessage("Phone is required",D),minLength:E(1)},address_code:{required:B.withMessage("Address is required",D),minLength:E(1)}})),c=ne(Y,s,{$autoDirty:!0});async function Z(){if(c.value.$touch(),c.value.$invalid)V.value=c.value.$errors[0].$message,G.value="error",p();else{var m=await v.create_customer(s);m&&(G.value="",s.status=="i"?V.value=j.getInsert:V.value=j.getUpdate,p(),k(!1),await v.ItemsList(),L())}}return(m,l)=>(_(),x("div",pe,[d("div",_e,[a(e(U),{variant:"primary",class:"mr-2 shadow-md",onClick:l[0]||(l[0]=()=>{k(!0)})},{default:t(()=>[i(" Create New ")]),_:1}),fe,d("div",ve,[d("div",he,[a(e(F),{type:"text",class:"w-56 pr-10 !box",placeholder:"Search..."}),a(e(S),{icon:"Search",class:"absolute inset-y-0 right-0 w-4 h-4 my-auto mr-3"})])])]),d("div",be,[a(e(u),{class:"border-spacing-y-[10px] border-separate -mt-2"},{default:t(()=>[a(e(u).Thead,null,{default:t(()=>[a(e(u).Tr,null,{default:t(()=>[a(e(u).Th,{class:"border-b-0 whitespace-nowrap"},{default:t(()=>[i(" Customer name ")]),_:1}),a(e(u).Th,{class:"border-b-0 whitespace-nowrap"},{default:t(()=>[i(" Phone ")]),_:1}),a(e(u).Th,{class:"border-b-0 whitespace-nowrap"},{default:t(()=>[i(" Address ")]),_:1}),a(e(u).Th,{class:"text-center border-b-0 whitespace-nowrap"},{default:t(()=>[i(" STATUS ")]),_:1}),a(e(u).Th,{class:"text-center border-b-0 whitespace-nowrap"},{default:t(()=>[i(" ACTIONS ")]),_:1})]),_:1})]),_:1}),a(e(u).Tbody,null,{default:t(()=>[(_(!0),x(A,null,M(Q.value,o=>(_(),R(e(u).Tr,{key:o.cus_code,class:"intro-x"},{default:t(()=>[a(e(u).Td,{class:"first:rounded-l-md last:rounded-r-md bg-white border-b-0 dark:bg-darkmode-600 shadow-[20px_3px_20px_#0000000b]"},{default:t(()=>[d("a",ge,f(o.cus_name),1),d("div",we," id: "+f(o.cus_code)+"-"+f(o.email),1)]),_:2},1024),a(e(u).Td,{class:"first:rounded-l-md last:rounded-r-md bg-white border-b-0 dark:bg-darkmode-600 shadow-[20px_3px_20px_#0000000b]"},{default:t(()=>[i(f(o.phone),1)]),_:2},1024),a(e(u).Td,{class:"first:rounded-l-md last:rounded-r-md bg-white border-b-0 dark:bg-darkmode-600 shadow-[20px_3px_20px_#0000000b]"},{default:t(()=>[i(f(o.address),1)]),_:2},1024),a(e(u).Td,{class:"first:rounded-l-md last:rounded-r-md w-40 bg-white border-b-0 dark:bg-darkmode-600 shadow-[20px_3px_20px_#0000000b]"},{default:t(()=>[d("div",{class:$(["flex items-center justify-center",{"text-success":o.active},{"text-danger":!o.active}])},[a(e(S),{icon:"CheckSquare",class:"w-4 h-4 mr-2"}),i(" "+f(o.active?"Active":"Inactive"),1)],2)]),_:2},1024),a(e(u).Td,{class:"first:rounded-l-md last:rounded-r-md w-56 bg-white border-b-0 dark:bg-darkmode-600 shadow-[20px_3px_20px_#0000000b] py-0 relative before:block before:w-px before:h-8 before:bg-slate-200 before:absolute before:left-0 before:inset-y-0 before:my-auto before:dark:bg-darkmode-400"},{default:t(()=>[d("div",ye,[d("a",{class:"flex items-center mr-3",href:"",onClick:ee=>{ee.preventDefault(),W(o.cus_code)}},[a(e(S),{icon:"CheckSquare",class:"w-4 h-4 mr-1"}),i(" Edit ")],8,ke)])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),a(e(g),{staticBackdrop:"",open:P.value,onClose:l[11]||(l[11]=()=>{k(!1)})},{default:t(()=>[a(e(g).Panel,{class:"px-5 py-10"},{default:t(()=>[d("div",xe,[a(e(z),{class:"mt-5 intro-y box"},{default:t(()=>[d("div",Ce,[a(e(z).Panel,null,{default:t(()=>[a(e(g),{staticBackdrop:"",open:P.value,onClose:l[10]||(l[10]=()=>{k(!1)})},{default:t(()=>[a(e(g).Panel,null,{default:t(()=>[a(e(g).Title,null,{default:t(()=>[Ie,a(e(H),{class:"mt-2"},{default:t(()=>[a(e(H).Input,{checked:s.active,modelValue:s.active,"onUpdate:modelValue":l[1]||(l[1]=o=>s.active=o),type:"checkbox"},null,8,["checked","modelValue"])]),_:1})]),_:1}),a(e(g).Description,{class:"grid grid-cols-12 gap-4 gap-y-3"},{default:t(()=>[d("div",Se,[a(e(C),{htmlFor:"modal-form-1"},{default:t(()=>[i("Customer Name")]),_:1}),a(e(F),{value:s.cus_name,type:"text",placeholder:"Customer name",modelValue:s.cus_name,"onUpdate:modelValue":l[2]||(l[2]=o=>s.cus_name=o),error:e(c).cus_name.$error,class:$({"border-danger":e(c).cus_name.$error})},null,8,["value","modelValue","error","class"])]),d("div",$e,[a(e(C),{htmlFor:"modal-form-1"},{default:t(()=>[i("Gender")]),_:1}),a(e(K),{name:"cboGender",modelValue:w.value,"onUpdate:modelValue":l[3]||(l[3]=o=>w.value=o),error:e(c).gender.$error,class:$({"border-danger":e(c).gender.$error})},{default:t(()=>[(_(!0),x(A,null,M(J.value,o=>(_(),x("option",{value:o.id,key:o.id},f(o.name),9,Ve))),128))]),_:1},8,["modelValue","error","class"])]),d("div",Te,[a(e(C),{htmlFor:"modal-form-3"},{default:t(()=>[i(" Email ")]),_:1}),a(e(F),{type:"email",value:s.email,placeholder:"email",modelValue:s.email,"onUpdate:modelValue":l[4]||(l[4]=o=>s.email=o)},null,8,["value","modelValue"])]),d("div",Fe,[a(e(C),{htmlFor:"modal-form-4"},{default:t(()=>[i(" Phone ")]),_:1}),a(e(F),{type:"text",value:s.phone,placeholder:"phone",modelValue:s.phone,"onUpdate:modelValue":l[5]||(l[5]=o=>s.phone=o),error:e(c).phone.$error,class:$({"border-danger":e(c).phone.$error})},null,8,["value","modelValue","error","class"])]),d("div",Be,[a(e(C),{htmlFor:"modal-form-6"},{default:t(()=>[i("Address")]),_:1}),a(e(K),{name:"cboAddress",modelValue:y.value,"onUpdate:modelValue":l[6]||(l[6]=o=>y.value=o),value:y.value,error:e(c).address_code.$error,class:$({"border-danger":e(c).address_code.$error})},{default:t(()=>[(_(!0),x(A,null,M(X.value,o=>(_(),x("option",{value:o.id,key:o.id},f(o.name),9,De))),128))]),_:1},8,["modelValue","value","error","class"])]),d("div",Ee,[a(e(C),{htmlFor:"remark"},{default:t(()=>[i(" Remark ")]),_:1}),a(e(ie),{modelValue:s.remark,"onUpdate:modelValue":l[7]||(l[7]=o=>s.remark=o),value:s.remark,placeholder:"Type your comments"},null,8,["modelValue","value"])])]),_:1}),a(e(g).Footer,null,{default:t(()=>[a(e(U),{type:"button",variant:"outline-secondary",onClick:l[8]||(l[8]=()=>{k(!1)}),class:"w-20 mr-1"},{default:t(()=>[i(" Cancel ")]),_:1}),a(e(U),{name:"btnOk",variant:"primary",type:"button",class:"w-20",ref:"{sendButtonRef}",disable:e(c).$invalid,onClick:l[9]||(l[9]=o=>Z())},{default:t(()=>[i(" Commit ")]),_:1},8,["disable"])]),_:1})]),_:1})]),_:1},8,["open"])]),_:1})])]),_:1})])]),_:1})]),_:1},8,["open"]),a(e(ue),{refKey:"basicStickyNotification",options:{duration:1500},class:"flex hidden"},{default:t(()=>[G.value=="error"?(_(),R(e(S),{key:0,icon:"XCircle",class:"text-danger"})):(_(),R(e(S),{key:1,icon:"CheckCircle",class:"text-success"})),d("div",qe,[d("div",Ge,f(V.value),1)])]),_:1})]))}});export{Le as default};
