import{d as G,a as k,u as D,b as U,e as J,r as h,o as K,f as B,g as Q,h as b,i as C,k as t,w as s,m as e,T as r,l,F as Y,s as Z,t as ee,j as n,v as _,q as g,D as c,_ as f,P as M,z as T,n as S,B as te,C as R,S as I,N as ae,E as se,G as oe,O as ne}from"./index.62cb36ac.js";const j="http://garage_api.test/api/",le=G({id:"useAuthPyamentStore",state:()=>({ItemDetail:[],Items:[],ItemView:[]}),getters:{getItems(i){return i.Items},getItemView(i){return i.ItemView},getItemsDetail(i){return i.ItemDetail}},actions:{async una_somnong_payment(){await k.get("v1/somnong/una_somnong_payment").then(i=>{if(i.data.success)return this.Items=i.data.data,this.Items})},async ItemsById(i){await k.get(`v1/somnong/auth_payment_view/${i}`).then(a=>{if(a.data.success)return this.ItemView=a.data.data,this.ItemView})},async auth_somnong_payments(i){return await k.post(j+"v1/somnong/auth_somnong_payments",i).then(async a=>{if(a.data.success)return a.data.success}).catch(a=>{if(a.response&&a.response.data){const d=a.response.data;D().setErrors(d.errors)}})},async reject_somnong_payments(i){return console.log(i),await k.post(j+"v1/somnong/reject_somnong_payments",i).then(async a=>{if(a.data.success)return a.data.success}).catch(a=>{if(a.response&&a.response.data){const d=a.response.data;D().setErrors(d.errors)}})}}}),re={class:"grid grid-cols-12 gap-6 mt-5"},ie={key:0,class:"col-span-12 overflow-auto intro-y lg:overflow-visible"},de={href:"",class:"font-medium whitespace-nowrap"},ue={class:"text-slate-500 text-xs whitespace-nowrap mt-0.5"},ce={class:"flex items-center justify-center"},me=["onClick"],_e={key:1,class:"col-span-12 overflow-auto intro-y lg:overflow-visible",role:"alert"},pe=ae('<div class="flex"><div class="py-1"><svg class="fill-current h-6 w-6 text-teal-500 mr-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.93 17.07A10 10 0 1 1 17.07 2.93 10 10 0 0 1 2.93 17.07zm12.73-1.41A8 8 0 1 0 4.34 4.34a8 8 0 0 0 11.32 11.32zM9 11V9h2v6H9v-4zm0-6h2v2H9V5z"></path></svg></div><div><p class="font-bold">No record display</p><p class="text-sm">Make sure you already booking.</p></div></div>',1),fe=[pe],ve={class:"p-5 text-center"},he=n("div",{class:"mt-5 text-3xl"},"Are you sure ?",-1),ye={class:"mt-2 text-slate-500"},we={class:"px-5 pb-8 text-center"},be={class:"p-5 text-center"},ge=n("div",{class:"mt-5 text-3xl"},"Are you sure?",-1),xe={class:"mt-2 text-slate-500"},ke={class:"px-5 pb-8 text-center"},Ce={class:"text-center"},Te={class:"p-5"},Ie={class:"mr-auto text-base font-medium"},Ae={class:"col-span-12 sm:col-span-12"},Pe={class:"col-span-12 sm:col-span-6"},Be={class:"col-span-12 sm:col-span-6"},Se={class:"col-span-12 sm:col-span-12"},$e=n("div",{class:"ml-4 mr-4"},[n("div",{class:"font-medium"},"Trasaction has been authorized!")],-1),Fe=n("div",{class:"ml-4 mr-4"},[n("div",{class:"mt-1 text-slate-500"},"Please check the fileld form.")],-1),qe=U({__name:"AuthorizePayment",setup(i){const a=J({}),d=le();h(null);const A=h(null),N=h(null),P=h(!1),v=u=>{P.value=u},$=h(!1),x=u=>{$.value=u},F=h(!1),y=u=>{F.value=u};K(async()=>{await d.una_somnong_payment()});const V=B(()=>d.getItems),p=B(()=>d.getItemView);async function z(u){await d.ItemsById(u),p.value.length>0&&(a.status="auth_so_payments",a.payment_id=p.value[0].payment_id,a.title=p.value[0].title,a.currency=p.value[0].currency,a.tran_type=p.value[0].tran_type,a.remark=p.value[0].remark,a.amount=p.value[0].amount,v(!0))}function q(){a.branch_code="",a.amount=0,a.currency="",a.currency_code="",a.ref_exchange="",a.is_update=!0,a.status="i",w.value.$reset,a.status="auth_so_payment"}const E=B(()=>({payment_id:{required:se.withMessage("Please verify point of sale code",oe),minLength:ne(1)}})),w=Q(E,a,{$autoDirty:!0});async function L(){y(!0)}async function O(){x(!0)}async function W(){if(w.value.$touch(),w.value.$invalid){const o=document.querySelectorAll("#failed-notification-content")[0].cloneNode(!0);o.classList.remove("hidden"),I({node:o,duration:3e3,newWindow:!0,close:!0,gravity:"top",position:"right",stopOnFocus:!0}).showToast()}else{console.log(a);var u=await d.auth_somnong_payments(a);if(u){const o=document.querySelectorAll("#success-notification-content")[0].cloneNode(!0);o.classList.remove("hidden"),I({node:o,duration:3e3,newWindow:!0,close:!0,gravity:"top",position:"right",stopOnFocus:!0}).showToast(),await d.una_somnong_payment(),v(!1),y(!1),q()}}}async function H(){if(w.value.$touch(),w.value.$invalid){const o=document.querySelectorAll("#failed-notification-content")[0].cloneNode(!0);o.classList.remove("hidden"),I({node:o,duration:3e3,newWindow:!0,close:!0,gravity:"top",position:"right",stopOnFocus:!0}).showToast()}else{a.status="reject_so_payment";var u=await d.reject_somnong_payments(a);if(u){const o=document.querySelectorAll("#success-notification-content")[0].cloneNode(!0);o.classList.remove("hidden"),I({node:o,duration:3e3,newWindow:!0,close:!0,gravity:"top",position:"right",stopOnFocus:!0}).showToast(),await d.una_somnong_payment(),v(!1),y(!1),x(!1),q()}}}return(u,o)=>(b(),C("div",re,[V.value.length>0?(b(),C("div",ie,[t(e(r),{class:"border-spacing-y-[10px] border-separate -mt-2"},{default:s(()=>[t(e(r).Thead,null,{default:s(()=>[t(e(r).Tr,null,{default:s(()=>[t(e(r).Th,{class:"border-b-0 whitespace-nowrap"},{default:s(()=>[l(" Payment ID ")]),_:1}),t(e(r).Th,{class:"border-b-0 whitespace-nowrap"},{default:s(()=>[l(" Tittle ")]),_:1}),t(e(r).Th,{class:"border-b-0 whitespace-nowrap"},{default:s(()=>[l(" Amount ")]),_:1}),t(e(r).Th,{class:"border-b-0 whitespace-nowrap"},{default:s(()=>[l(" Remark ")]),_:1}),t(e(r).Th,{class:"border-b-0 whitespace-nowrap"},{default:s(()=>[l(" Inputter ")]),_:1}),t(e(r).Th,{class:"text-center border-b-0 whitespace-nowrap"},{default:s(()=>[l(" Action ")]),_:1})]),_:1})]),_:1}),t(e(r).Tbody,null,{default:s(()=>[(b(!0),C(Y,null,Z(V.value,m=>(b(),ee(e(r).Tr,{key:m.payment_id,class:"intro-x"},{default:s(()=>[t(e(r).Td,{class:"first:rounded-l-md last:rounded-r-md bg-white border-b-0 dark:bg-darkmode-600 shadow-[20px_3px_20px_#0000000b]"},{default:s(()=>[n("a",de,_(m.title),1),n("div",ue," id: "+_(m.payment_id),1)]),_:2},1024),t(e(r).Td,{class:"first:rounded-l-md last:rounded-r-md bg-white border-b-0 dark:bg-darkmode-600 shadow-[20px_3px_20px_#0000000b]"},{default:s(()=>[l(_(m.title),1)]),_:2},1024),t(e(r).Td,{class:"first:rounded-l-md last:rounded-r-md bg-white border-b-0 dark:bg-darkmode-600 shadow-[20px_3px_20px_#0000000b]"},{default:s(()=>[l(_(m.amount),1)]),_:2},1024),t(e(r).Td,{class:"first:rounded-l-md last:rounded-r-md bg-white border-b-0 dark:bg-darkmode-600 shadow-[20px_3px_20px_#0000000b]"},{default:s(()=>[l(_(m.remark),1)]),_:2},1024),t(e(r).Td,{class:"first:rounded-l-md last:rounded-r-md bg-white border-b-0 dark:bg-darkmode-600 shadow-[20px_3px_20px_#0000000b]"},{default:s(()=>[l(_(m.inputter),1)]),_:2},1024),t(e(r).Td,{class:"first:rounded-l-md last:rounded-r-md w-56 bg-white border-b-0 dark:bg-darkmode-600 shadow-[20px_3px_20px_#0000000b] py-0 relative before:block before:w-px before:h-8 before:bg-slate-200 before:absolute before:left-0 before:inset-y-0 before:my-auto before:dark:bg-darkmode-400"},{default:s(()=>[n("div",ce,[n("a",{class:"flex items-center mr-3",href:"",onClick:X=>{X.preventDefault(),z(m.payment_id)}},[t(e(g),{icon:"CheckSquare",class:"w-4 h-4 mr-1"}),l(" Review ")],8,me)])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])):(b(),C("div",_e,fe)),t(e(c),{open:F.value,onClose:o[2]||(o[2]=()=>{y(!1)}),initialFocus:N.value},{default:s(()=>[t(e(c).Panel,null,{default:s(()=>[n("div",ve,[t(e(g),{icon:"CheckCircle",class:"w-16 h-16 mx-auto mt-3 text-success"}),he,n("div",ye," Authorize quotation "+_(a.payment_id),1)]),n("div",we,[t(e(f),{type:"button",variant:"outline-secondary",onClick:o[0]||(o[0]=()=>{y(!1)}),class:"w-24 mr-1"},{default:s(()=>[l(" Cancel ")]),_:1}),t(e(f),{type:"button",variant:"primary",class:"w-24",ref:"{deleteButtonRef}",onClick:o[1]||(o[1]=()=>{W()})},{default:s(()=>[l(" Ok ")]),_:1},512)])]),_:1})]),_:1},8,["open","initialFocus"]),t(e(c),{open:$.value,onClose:o[5]||(o[5]=()=>{x(!1)}),initialFocus:A.value},{default:s(()=>[t(e(c).Panel,null,{default:s(()=>[n("div",be,[t(e(g),{icon:"XCircle",class:"w-16 h-16 mx-auto mt-3 text-danger"}),ge,n("div",xe," Reject payment trasaction "+_(a.payment_id),1)]),n("div",ke,[t(e(f),{type:"button",variant:"outline-secondary",onClick:o[3]||(o[3]=()=>{x(!1)}),class:"w-24 mr-1"},{default:s(()=>[l(" Cancel ")]),_:1}),t(e(f),{type:"button",variant:"danger",class:"w-24",ref:"{deleteButtonRef}",onClick:o[4]||(o[4]=()=>{H()})},{default:s(()=>[l(" Ok ")]),_:1},512)])]),_:1})]),_:1},8,["open","initialFocus"]),t(e(c),{staticBackdrop:"",open:P.value,onClose:o[10]||(o[10]=()=>{v(!1)})},{default:s(()=>[t(e(c).Panel,{class:"px-5 py-10"},{default:s(()=>[n("div",Ce,[t(e(M),{class:"mt-5 intro-y box"},{default:s(()=>[n("div",Te,[t(e(M).Panel,null,{default:s(()=>[t(e(c),{staticBackdrop:"",open:P.value,onClose:o[9]||(o[9]=()=>{v(!1)})},{default:s(()=>[t(e(c).Panel,null,{default:s(()=>[t(e(c).Title,null,{default:s(()=>[n("h2",Ie," Payment info "+_(a.payment_id?" : "+a.payment_id:""),1)]),_:1}),t(e(c).Description,{class:"grid grid-cols-12 gap-4 gap-y-3"},{default:s(()=>[n("div",Ae,[t(e(T),{htmlFor:"modal-form-1"},{default:s(()=>[l("Title")]),_:1}),t(e(S),{value:a.title,type:"text",disabled:!0},null,8,["value"])]),n("div",Pe,[t(e(T),{htmlFor:"modal-form-1"},{default:s(()=>[l("Amount")]),_:1}),t(e(S),{value:a.currency+" "+a.amount,type:"text",disabled:!0},null,8,["value"])]),n("div",Be,[t(e(T),{htmlFor:"modal-form-4"},{default:s(()=>[l("Type")]),_:1}),t(e(S),{value:a.tran_type,type:"text",disabled:!0},null,8,["value"])]),n("div",Se,[t(e(T),{htmlFor:"remark"},{default:s(()=>[l(" Remark ")]),_:1}),t(e(te),{value:a.remark,disabled:!0},null,8,["value"])])]),_:1}),t(e(c).Footer,null,{default:s(()=>[t(e(f),{type:"button",variant:"outline-secondary",onClick:o[6]||(o[6]=()=>{v(!1)}),class:"w-20 mr-1"},{default:s(()=>[l(" Cancel ")]),_:1}),t(e(f),{class:"w-20 mr-1",variant:"outline-danger",type:"button",ref:"{sendButtonRef}",onClick:o[7]||(o[7]=m=>O())},{default:s(()=>[l(" Reject ")]),_:1},512),t(e(f),{variant:"primary",type:"button",class:"w-20",ref:"{sendButtonRef}",onClick:o[8]||(o[8]=m=>L())},{default:s(()=>[l(" Authorize ")]),_:1},512)]),_:1})]),_:1})]),_:1},8,["open"])]),_:1})])]),_:1})])]),_:1})]),_:1},8,["open"]),t(e(R),{id:"success-notification-content",class:"flex hidden"},{default:s(()=>[t(e(g),{icon:"CheckCircle",class:"text-success"}),$e]),_:1}),t(e(R),{id:"failed-notification-content",class:"flex hidden"},{default:s(()=>[t(e(g),{icon:"XCircle",class:"text-danger"}),Fe]),_:1})]))}});export{qe as default};
